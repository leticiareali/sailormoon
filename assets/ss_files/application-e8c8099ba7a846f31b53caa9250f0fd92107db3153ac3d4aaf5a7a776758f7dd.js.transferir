function loadWitleeScript(){window.witleeLoaded||(window.witleeLoaded=!0,$.getScript("https://cdn.witlee.com/loaders/wtl-wehi-loader.js"))}function debounce(e,t,i){var n;return function(){var o=this,r=arguments,s=function(){n=null,i||e.apply(o,r)},a=i&&!n;clearTimeout(n),n=setTimeout(s,t),a&&e.apply(o,r)}}if("undefined"==typeof console){console={},console.log=function(){!0===console.alert&&alert(JSON.stringify(Array.prototype.slice.call(arguments)))};var logWithType=function(){console.log(this.type+": ",arguments)};console.debug=function(){logWithType.apply({type:"DEBUG"},arguments)},console.dir=function(){logWithType.apply({type:"DIR"},arguments)},console.error=function(){logWithType.apply({type:"ERROR"},arguments)},console.warn=function(){logWithType.apply({type:"WARNING"},arguments)},console.group=console.groupCollapsed=console.groupEnd=console.info=console.time=console.timeEnd=console.trace=function(){console.log("command not supported")}}Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var r,s,a=[];for(r in o)e.call(o,r)&&a.push(r);if(t)for(s=0;s<n;s++)e.call(o,i[s])&&a.push(i[s]);return a}}()),function(){for(var e=0,t=["webkit","moz"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),o=window.setTimeout((function(){t(i+n)}),n);return e=i+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),"bind"in Function.prototype||(Function.prototype.bind=function(e){var t=this;if(arguments.length<=1)return function(){return t.apply(e,arguments)};var i=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,0===arguments.length?i:i.concat(Array.prototype.slice.call(arguments)))}}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,t){void 0===t&&(t=0),t<0&&(t+=this.length),t<0&&(t=0);for(var i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(e,t){for(void 0===t&&(t=this.length-1),t<0&&(t+=this.length),t>this.length-1&&(t=this.length-1),t++;t-- >0;)if(t in this&&this[t]===e)return t;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(e,t){for(var i=0,n=this.length;i<n;i++)i in this&&e.call(t,this[i],i,this)}),"map"in Array.prototype||(Array.prototype.map=function(e,t){for(var i=new Array(this.length),n=0,o=this.length;n<o;n++)n in this&&(i[n]=e.call(t,this[n],n,this));return i}),"filter"in Array.prototype||(Array.prototype.filter=function(e,t){for(var i,n=[],o=0,r=this.length;o<r;o++)o in this&&e.call(t,i=this[o],o,this)&&n.push(i);return n}),"every"in Array.prototype||(Array.prototype.every=function(e,t){for(var i=0,n=this.length;i<n;i++)if(i in this&&!e.call(t,this[i],i,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(e,t){for(var i=0,n=this.length;i<n;i++)if(i in this&&e.call(t,this[i],i,this))return!0;return!1}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var i,n,o=this.length>>>0,r=!1;for(1<arguments.length&&(n=t,r=!0),i=0;o>i;++i)this.hasOwnProperty(i)&&(r?n=e(n,this[i],i,this):(n=this[i],r=!0));if(!r)throw new TypeError("Reduce of empty array with no initial value");return n}),function(e,t){"function"==typeof define&&define.amd?define("i18n",(function(){return t(e)})):"object"==typeof module&&module.exports?module.exports=t(e):e.I18n=t(e)}(this,(function(e){"use strict";var t=e&&e.I18n||{},i=Array.prototype.slice,n=function(e){return("0"+e.toString()).substr(-2)},o=function(e,t){return f("round",e,-t).toFixed(t)},r=function(e){var t=typeof e;return"function"===t||"object"===t},s=function(e){return"function"===typeof e},a=function(e){return null!=e},l=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},c=function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},u=function(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)},d=function(e){return!0===e||!1===e},h=function(e){return null===e},f=function(e,t,i){return void 0===i||0==+i?Math[e](t):(t=+t,i=+i,isNaN(t)||"number"!=typeof i||i%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-i:-i)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+i:i))))},p=function(e,t){return s(e)?e(t):e},m=function(e,t){var i,n;for(i in t)t.hasOwnProperty(i)&&(n=t[i],c(n)||u(n)||d(n)||l(n)||h(n)?e[i]=n:(null==e[i]&&(e[i]={}),m(e[i],n)));return e},g={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]},v={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1},b={unit:"$",precision:2,format:"%u%n",sign_first:!0,delimiter:",",separator:"."},w={unit:"%",precision:3,format:"%n%u",separator:".",delimiter:""},y=[null,"kb","mb","gb","tb"],_={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:!1,translations:{},missingBehaviour:"message",missingTranslationPrefix:""};return t.reset=function(){var e;for(e in _)this[e]=_[e]},t.initializeOptions=function(){var e;for(e in _)a(this[e])||(this[e]=_[e])},t.initializeOptions(),t.locales={},t.locales.get=function(e){var i=this[e]||this[t.locale]||this.default;return s(i)&&(i=i(e)),!1===l(i)&&(i=[i]),i},t.locales.default=function(e){var i=[],n=[];return e&&i.push(e),!e&&t.locale&&i.push(t.locale),t.fallbacks&&t.defaultLocale&&i.push(t.defaultLocale),i.forEach((function(e){var i=e.split("-"),o=null,r=null;3===i.length?(o=[i[0],i[1]].join("-"),r=i[0]):2===i.length&&(o=i[0]),-1===n.indexOf(e)&&n.push(e),t.fallbacks&&[o,r].forEach((function(t){null!=t&&t!==e&&-1===n.indexOf(t)&&n.push(t)}))})),i.length||i.push("en"),n},t.pluralization={},t.pluralization.get=function(e){return this[e]||this[t.locale]||this.default},t.pluralization.default=function(e){switch(e){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}},t.currentLocale=function(){return this.locale||this.defaultLocale},t.isSet=a,t.lookup=function(e,t){t=t||{};var i,n,o,r,s=this.locales.get(t.locale).slice();for(o=this.getFullScope(e,t);s.length;)if(i=s.shift(),n=o.split(this.defaultSeparator),r=this.translations[i]){for(;n.length&&null!=(r=r[n.shift()]););if(null!=r)return r}if(a(t.defaultValue))return p(t.defaultValue,e)},t.pluralizationLookupWithoutFallback=function(e,t,i){var n,o,s=this.pluralization.get(t)(e);if(r(i))for(;s.length;)if(n=s.shift(),a(i[n])){o=i[n];break}return o},t.pluralizationLookup=function(e,t,i){i=i||{};var n,o,s,l,c=this.locales.get(i.locale).slice();for(t=this.getFullScope(t,i);c.length;)if(n=c.shift(),o=t.split(this.defaultSeparator),s=this.translations[n]){for(;o.length&&(s=s[o.shift()],r(s));)0===o.length&&(l=this.pluralizationLookupWithoutFallback(e,n,s));if(null!=l)break}return null==l&&a(i.defaultValue)&&(l=r(i.defaultValue)?this.pluralizationLookupWithoutFallback(e,i.locale,i.defaultValue):i.defaultValue,s=i.defaultValue),{message:l,translations:s}},t.meridian=function(){var e=this.lookup("time"),t=this.lookup("date");return e&&e.am&&e.pm?[e.am,e.pm]:t&&t.meridian?t.meridian:g.meridian},t.prepareOptions=function(){for(var e,t=i.call(arguments),n={};t.length;)if("object"==typeof(e=t.shift()))for(var o in e)e.hasOwnProperty(o)&&(a(n[o])||(n[o]=e[o]));return n},t.createTranslationOptions=function(e,t){var i=[{scope:e}];return a(t.defaults)&&(i=i.concat(t.defaults)),a(t.defaultValue)&&i.push({message:t.defaultValue}),i},t.translate=function(e,t){t=t||{};var i,n=this.createTranslationOptions(e,t),o=e,s=this.prepareOptions(t);return delete s.defaultValue,n.some((function(t){if(a(t.scope)?(o=t.scope,i=this.lookup(o,s)):a(t.message)&&(i=p(t.message,e)),null!=i)return!0}),this)?("string"==typeof i?i=this.interpolate(i,t):l(i)?i=i.map((function(e){return"string"==typeof e?this.interpolate(e,t):e}),this):r(i)&&a(t.count)&&(i=this.pluralize(t.count,o,t)),i):this.missingTranslation(e,t)},t.interpolate=function(e,t){if(null==e)return e;t=t||{};var i,n,o,r,s=e.match(this.placeholder);if(!s)return e;for(;s.length;)o=(i=s.shift()).replace(this.placeholder,"$1"),n=a(t[o])?t[o].toString().replace(/\$/gm,"_#$#_"):o in t?this.nullPlaceholder(i,e,t):this.missingPlaceholder(i,e,t),r=new RegExp(i.replace(/{/gm,"\\{").replace(/}/gm,"\\}")),e=e.replace(r,n);return e.replace(/_#\$#_/g,"$")},t.pluralize=function(e,t,i){var n,o;return i=this.prepareOptions({count:String(e)},i),void 0===(o=this.pluralizationLookup(e,t,i)).translations||null==o.translations?this.missingTranslation(t,i):void 0!==o.message&&null!=o.message?this.interpolate(o.message,i):(n=this.pluralization.get(i.locale),this.missingTranslation(t+"."+n(e)[0],i))},t.missingTranslation=function(e,t){if("guess"===this.missingBehaviour){var i=e.split(".").slice(-1)[0];return(this.missingTranslationPrefix.length>0?this.missingTranslationPrefix:"")+i.replace("_"," ").replace(/([a-z])([A-Z])/g,(function(e,t,i){return t+" "+i.toLowerCase()}))}return'[missing "'+[null!=t&&null!=t.locale?t.locale:this.currentLocale(),this.getFullScope(e,t)].join(this.defaultSeparator)+'" translation]'},t.missingPlaceholder=function(e){return"[missing "+e+" value]"},t.nullPlaceholder=function(){return t.missingPlaceholder.apply(t,arguments)},t.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),v);var i,n,r=e<0,s=o(Math.abs(e),t.precision).toString().split("."),a=[],l=t.format||"%n",c=r?"-":"";for(e=s[0],i=s[1];e.length>0;)a.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);return n=a.join(t.delimiter),t.strip_insignificant_zeros&&i&&(i=i.replace(/0+$/,"")),t.precision>0&&i&&(n+=t.separator+i),n=(l=t.sign_first?"%s"+l:l.replace("%n","%s%n")).replace("%u",t.unit).replace("%n",n).replace("%s",c)},t.toCurrency=function(e,t){return t=this.prepareOptions(t,this.lookup("number.currency.format"),this.lookup("number.format"),b),this.toNumber(e,t)},t.localize=function(e,t,i){switch(i||(i={}),e){case"currency":return this.toCurrency(t);case"number":return e=this.lookup("number.format"),this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:var n;return n=e.match(/^(date|time)/)?this.toTime(e,t):t.toString(),this.interpolate(n,i)}},t.parseDate=function(e){var t,i,n;if(null==e)return e;if("object"==typeof e)return e;if(t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/)){for(var o=1;o<=6;o++)t[o]=parseInt(t[o],10)||0;t[2]-=1,n=t[7]?1e3*("0"+t[7]):null,i=t[8]?new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6],n)):new Date(t[1],t[2],t[3],t[4],t[5],t[6],n)}else"number"==typeof e?(i=new Date).setTime(e):e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)?(i=new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" "))):(e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/),(i=new Date).setTime(Date.parse(e)));return i},t.strftime=function(e,i){var o=this.lookup("date"),r=t.meridian();if(o||(o={}),o=this.prepareOptions(o,g),isNaN(e.getTime()))throw new Error("I18n.strftime() requires a valid date object, but received an invalid date.");var s=e.getDay(),a=e.getDate(),l=e.getFullYear(),c=e.getMonth()+1,u=e.getHours(),d=u,h=u>11?1:0,f=e.getSeconds(),p=e.getMinutes(),m=e.getTimezoneOffset(),v=Math.floor(Math.abs(m/60)),b=Math.abs(m)-60*v,w=(m>0?"-":"+")+(v.toString().length<2?"0"+v:v)+(b.toString().length<2?"0"+b:b);return d>12?d-=12:0===d&&(d=12),i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace("%a",o.abbr_day_names[s])).replace("%A",o.day_names[s])).replace("%b",o.abbr_month_names[c])).replace("%B",o.month_names[c])).replace("%d",n(a))).replace("%e",a)).replace("%-d",a)).replace("%H",n(u))).replace("%-H",u)).replace("%k",u)).replace("%I",n(d))).replace("%-I",d)).replace("%l",d)).replace("%m",n(c))).replace("%-m",c)).replace("%M",n(p))).replace("%-M",p)).replace("%p",r[h])).replace("%P",r[h].toLowerCase())).replace("%S",n(f))).replace("%-S",f)).replace("%w",s)).replace("%y",n(l))).replace("%-y",n(l).replace(/^0+/,""))).replace("%Y",l)).replace("%z",w)).replace("%Z",w)},t.toTime=function(e,t){var i=this.parseDate(t),n=this.lookup(e);if(null==i)return i;var o=i.toString();return o.match(/invalid/i)?o:n?this.strftime(i,n):o},t.toPercentage=function(e,t){return t=this.prepareOptions(t,this.lookup("number.percentage.format"),this.lookup("number.format"),w),this.toNumber(e,t)},t.toHumanSize=function(e,t){for(var i,n,o=1024,r=e,s=0;r>=o&&s<4;)r/=o,s+=1;return 0===s?(i=this.t("number.human.storage_units.units.byte",{count:r}),n=0):(i=this.t("number.human.storage_units.units."+y[s]),n=r-Math.floor(r)==0?0:1),t=this.prepareOptions(t,{unit:i,precision:n,format:"%n%u",delimiter:""}),this.toNumber(r,t)},t.getFullScope=function(e,t){return t=t||{},l(e)&&(e=e.join(this.defaultSeparator)),t.scope&&(e=[t.scope,e].join(this.defaultSeparator)),e},t.extend=function(e,t){return void 0===e&&void 0===t?{}:m(e,t)},t.t=t.translate.bind(t),t.l=t.localize.bind(t),t.p=t.pluralize.bind(t),t})),function(e,t){function i(e){var t,i,n=R[e]={};for(t=0,i=(e=e.split(/\s+/)).length;t<i;t++)n[e[t]]=!0;return n}function n(e,i,n){if(n===t&&1===e.nodeType){var o="data-"+i.replace(H,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(o))){try{n="true"===n||"false"!==n&&("null"===n?null:F.isNumeric(n)?parseFloat(n):L.test(n)?F.parseJSON(n):n)}catch(e){}F.data(e,i,n)}else n=t}return n}function o(e){for(var t in e)if(("data"!==t||!F.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function r(e,t,i){var n=t+"defer",o=t+"queue",r=t+"mark",s=F._data(e,n);!s||"queue"!==i&&F._data(e,o)||"mark"!==i&&F._data(e,r)||setTimeout((function(){F._data(e,o)||F._data(e,r)||(F.removeData(e,n,!0),s.fire())}),0)}function s(){return!1}function a(){return!0}function l(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function c(e,t,i){if(t=t||0,F.isFunction(t))return F.grep(e,(function(e,n){return!!t.call(e,n,e)===i}));if(t.nodeType)return F.grep(e,(function(e){return e===t===i}));if("string"==typeof t){var n=F.grep(e,(function(e){return 1===e.nodeType}));if(de.test(t))return F.filter(t,n,!i);t=F.filter(t,n)}return F.grep(e,(function(e){return F.inArray(e,t)>=0===i}))}function u(e){var t=me.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function d(e){return F.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e,t){if(1===t.nodeType&&F.hasData(e)){var i,n,o,r=F._data(e),s=F._data(t,r),a=r.events;if(a)for(i in delete s.handle,s.events={},a)for(n=0,o=a[i].length;n<o;n++)F.event.add(t,i+(a[i][n].namespace?".":"")+a[i][n].namespace,a[i][n],a[i][n].data);s.data&&(s.data=F.extend({},s.data))}}function f(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),"object"===(i=t.nodeName.toLowerCase())?t.outerHTML=e.outerHTML:"input"!==i||"checkbox"!==e.type&&"radio"!==e.type?"option"===i?t.selected=e.defaultSelected:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(F.expando))}function p(e){return void 0!==e.getElementsByTagName?e.getElementsByTagName("*"):void 0!==e.querySelectorAll?e.querySelectorAll("*"):[]}function m(e){"checkbox"!==e.type&&"radio"!==e.type||(e.defaultChecked=e.checked)}function g(e){var t=(e.nodeName||"").toLowerCase();"input"===t?m(e):"script"!==t&&void 0!==e.getElementsByTagName&&F.grep(e.getElementsByTagName("input"),m)}function v(e){var t=D.createElement("div");return Ae.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function b(e,t){t.src?F.ajax({url:t.src,async:!1,dataType:"script"}):F.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Se,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function w(e,t,i){var n="width"===t?e.offsetWidth:e.offsetHeight,o="width"===t?He:Me,r=0,s=o.length;if(n>0){if("border"!==i)for(;r<s;r++)i||(n-=parseFloat(F.css(e,"padding"+o[r]))||0),"margin"===i?n+=parseFloat(F.css(e,i+o[r]))||0:n-=parseFloat(F.css(e,"border"+o[r]+"Width"))||0;return n+"px"}if(((n=Ie(e,t,t))<0||null==n)&&(n=e.style[t]||0),n=parseFloat(n)||0,i)for(;r<s;r++)n+=parseFloat(F.css(e,"padding"+o[r]))||0,"padding"!==i&&(n+=parseFloat(F.css(e,"border"+o[r]+"Width"))||0),"margin"===i&&(n+=parseFloat(F.css(e,i+o[r]))||0);return n+"px"}function y(e){return function(t,i){if("string"!=typeof t&&(i=t,t="*"),F.isFunction(i))for(var n,o,r=t.toLowerCase().split(it),s=0,a=r.length;s<a;s++)n=r[s],(o=/^\+/.test(n))&&(n=n.substr(1)||"*"),(e[n]=e[n]||[])[o?"unshift":"push"](i)}}function _(e,i,n,o,r,s){(s=s||{})[r=r||i.dataTypes[0]]=!0;for(var a,l=e[r],c=0,u=l?l.length:0,d=e===st;c<u&&(d||!a);c++)"string"==typeof(a=l[c](i,n,o))&&(!d||s[a]?a=t:(i.dataTypes.unshift(a),a=_(e,i,n,o,a,s)));return!d&&a||s["*"]||(a=_(e,i,n,o,"*",s)),a}function x(e,i){var n,o,r=F.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((r[n]?e:o||(o={}))[n]=i[n]);o&&F.extend(!0,e,o)}function k(e,t,i,n){if(F.isArray(t))F.each(t,(function(t,o){i||ze.test(e)?n(e,o):k(e+"["+("object"==typeof o||F.isArray(o)?t:"")+"]",o,i,n)}));else if(i||null==t||"object"!=typeof t)n(e,t);else for(var o in t)k(e+"["+o+"]",t[o],i,n)}function $(e,i,n){var o,r,s,a,l=e.contents,c=e.dataTypes,u=e.responseFields;for(r in u)r in n&&(i[u[r]]=n[r]);for(;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||i.getResponseHeader("content-type"));if(o)for(r in l)if(l[r]&&l[r].test(o)){c.unshift(r);break}if(c[0]in n)s=c[0];else{for(r in n){if(!c[0]||e.converters[r+" "+c[0]]){s=r;break}a||(a=r)}s=s||a}if(s)return s!==c[0]&&c.unshift(s),n[s]}function C(e,i){e.dataFilter&&(i=e.dataFilter(i,e.dataType));var n,o,r,s,a,l,c,u,d=e.dataTypes,h={},f=d.length,p=d[0];for(n=1;n<f;n++){if(1===n)for(o in e.converters)"string"==typeof o&&(h[o.toLowerCase()]=e.converters[o]);if(s=p,"*"===(p=d[n]))p=s;else if("*"!==s&&s!==p){if(!(l=h[a=s+" "+p]||h["* "+p]))for(c in u=t,h)if(((r=c.split(" "))[0]===s||"*"===r[0])&&(u=h[r[1]+" "+p])){!0===(c=h[c])?l=u:!0===u&&(l=c);break}l||u||F.error("No conversion from "+a.replace(" "," to ")),!0!==l&&(i=l?l(i):u(c(i)))}}return i}function j(){try{return new e.XMLHttpRequest}catch(e){}}function S(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function T(){return setTimeout(A,0),bt=F.now()}function A(){bt=t}function I(e,t){var i={};return F.each(xt.concat.apply([],xt.slice(0,t)),(function(){i[this]=e})),i}function E(e){if(!wt[e]){var t=D.body,i=F("<"+e+">").appendTo(t),n=i.css("display");i.remove(),"none"!==n&&""!==n||(mt||((mt=D.createElement("iframe")).frameBorder=mt.width=mt.height=0),t.appendChild(mt),gt&&mt.createElement||((gt=(mt.contentWindow||mt.contentDocument).document).write(("CSS1Compat"===D.compatMode?"<!doctype html>":"")+"<html><body>"),gt.close()),i=gt.createElement(e),gt.body.appendChild(i),n=F.css(i,"display"),t.removeChild(mt)),wt[e]=n}return wt[e]}function P(e){return F.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var D=e.document,N=e.navigator,O=e.location,F=function(){function i(){if(!a.isReady){try{D.documentElement.doScroll("left")}catch(e){return void setTimeout(i,1)}a.ready()}}var n,o,r,s,a=function(e,t){return new a.fn.init(e,t,n)},l=e.jQuery,c=e.$,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,d=/\S/,h=/^\s+/,f=/\s+$/,p=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=/^[\],:{}\s]*$/,g=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,b=/(?:^|:|,)(?:\s*\[)+/g,w=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,_=/(msie) ([\w.]+)/,x=/(mozilla)(?:.*? rv:([\w.]+))?/,k=/-([a-z]|[0-9])/gi,$=/^-ms-/,C=function(e,t){return(t+"").toUpperCase()},j=N.userAgent,S=Object.prototype.toString,T=Object.prototype.hasOwnProperty,A=Array.prototype.push,I=Array.prototype.slice,E=String.prototype.trim,P=Array.prototype.indexOf,O={};return a.fn=a.prototype={constructor:a,init:function(e,i,n){var o,r,s,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!i&&D.body)return this.context=D,this[0]=D.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(!(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:u.exec(e))||!o[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(o[1])return l=(i=i instanceof a?i[0]:i)?i.ownerDocument||i:D,(s=p.exec(e))?a.isPlainObject(i)?(e=[D.createElement(s[1])],a.fn.attr.call(e,i,!0)):e=[l.createElement(s[1])]:e=((s=a.buildFragment([o[1]],[l])).cacheable?a.clone(s.fragment):s.fragment).childNodes,a.merge(this,e);if((r=D.getElementById(o[2]))&&r.parentNode){if(r.id!==o[2])return n.find(e);this.length=1,this[0]=r}return this.context=D,this.selector=e,this}return a.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),a.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return I.call(this,0)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,i){var n=this.constructor();return a.isArray(e)?A.apply(n,e):a.merge(n,e),n.prevObject=this,n.context=this.context,"find"===t?n.selector=this.selector+(this.selector?" ":"")+i:t&&(n.selector=this.selector+"."+t+"("+i+")"),n},each:function(e,t){return a.each(this,e,t)},ready:function(e){return a.bindReady(),r.add(e),this},eq:function(e){return-1===(e=+e)?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(I.apply(this,arguments),"slice",I.call(arguments).join(","))},map:function(e){return this.pushStack(a.map(this,(function(t,i){return e.call(t,i,t)})))},end:function(){return this.prevObject||this.constructor(null)},push:A,sort:[].sort,splice:[].splice},a.fn.init.prototype=a.fn,a.extend=a.fn.extend=function(){var e,i,n,o,r,s,l=arguments[0]||{},c=1,u=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[1]||{},c=2),"object"==typeof l||a.isFunction(l)||(l={}),u===c&&(l=this,--c);c<u;c++)if(null!=(e=arguments[c]))for(i in e)n=l[i],l!==(o=e[i])&&(d&&o&&(a.isPlainObject(o)||(r=a.isArray(o)))?(r?(r=!1,s=n&&a.isArray(n)?n:[]):s=n&&a.isPlainObject(n)?n:{},l[i]=a.extend(d,s,o)):o!==t&&(l[i]=o));return l},a.extend({noConflict:function(t){return e.$===a&&(e.$=c),t&&e.jQuery===a&&(e.jQuery=l),a},isReady:!1,readyWait:1,holdReady:function(e){e?a.readyWait++:a.ready(!0)},ready:function(e){if(!0===e&&!--a.readyWait||!0!==e&&!a.isReady){if(!D.body)return setTimeout(a.ready,1);if(a.isReady=!0,!0!==e&&--a.readyWait>0)return;r.fireWith(D,[a]),a.fn.trigger&&a(D).trigger("ready").off("ready")}},bindReady:function(){if(!r){if(r=a.Callbacks("once memory"),"complete"===D.readyState)return setTimeout(a.ready,1);if(D.addEventListener)D.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",a.ready,!1);else if(D.attachEvent){D.attachEvent("onreadystatechange",s),e.attachEvent("onload",a.ready);var t=!1;try{t=null==e.frameElement}catch(e){}D.documentElement.doScroll&&t&&i()}}},isFunction:function(e){return"function"===a.type(e)},isArray:Array.isArray||function(e){return"array"===a.type(e)},isWindow:function(e){return e&&"object"==typeof e&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):O[S.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==a.type(e)||e.nodeType||a.isWindow(e))return!1;try{if(e.constructor&&!T.call(e,"constructor")&&!T.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var i;for(i in e);return i===t||T.call(e,i)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){return"string"==typeof t&&t?(t=a.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):m.test(t.replace(g,"@").replace(v,"]").replace(b,""))?new Function("return "+t)():void a.error("Invalid JSON: "+t)):null},parseXML:function(i){var n;try{e.DOMParser?n=(new DOMParser).parseFromString(i,"text/xml"):((n=new ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(i))}catch(e){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||a.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&d.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace($,"ms-").replace(k,C)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,i,n){var o,r=0,s=e.length,l=s===t||a.isFunction(e);if(n)if(l){for(o in e)if(!1===i.apply(e[o],n))break}else for(;r<s&&!1!==i.apply(e[r++],n););else if(l){for(o in e)if(!1===i.call(e[o],o,e[o]))break}else for(;r<s&&!1!==i.call(e[r],r,e[r++]););return e},trim:E?function(e){return null==e?"":E.call(e)}:function(e){return null==e?"":e.toString().replace(h,"").replace(f,"")},makeArray:function(e,t){var i=t||[];if(null!=e){var n=a.type(e);null==e.length||"string"===n||"function"===n||"regexp"===n||a.isWindow(e)?A.call(i,e):a.merge(i,e)}return i},inArray:function(e,t,i){var n;if(t){if(P)return P.call(t,e,i);for(n=t.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=e.length,o=0;if("number"==typeof i.length)for(var r=i.length;o<r;o++)e[n++]=i[o];else for(;i[o]!==t;)e[n++]=i[o++];return e.length=n,e},grep:function(e,t,i){var n=[];i=!!i;for(var o=0,r=e.length;o<r;o++)i!==!!t(e[o],o)&&n.push(e[o]);return n},map:function(e,i,n){var o,r,s=[],l=0,c=e.length;if(e instanceof a||c!==t&&"number"==typeof c&&(c>0&&e[0]&&e[c-1]||0===c||a.isArray(e)))for(;l<c;l++)null!=(o=i(e[l],l,n))&&(s[s.length]=o);else for(r in e)null!=(o=i(e[r],r,n))&&(s[s.length]=o);return s.concat.apply([],s)},guid:1,proxy:function(e,i){if("string"==typeof i){var n=e[i];i=e,e=n}if(!a.isFunction(e))return t;var o=I.call(arguments,2),r=function(){return e.apply(i,o.concat(I.call(arguments)))};return r.guid=e.guid=e.guid||r.guid||a.guid++,r},access:function(e,i,n,o,r,s){var l=e.length;if("object"==typeof i){for(var c in i)a.access(e,c,i[c],o,r,n);return e}if(n!==t){o=!s&&o&&a.isFunction(n);for(var u=0;u<l;u++)r(e[u],i,o?n.call(e[u],u,r(e[u],i)):n,s);return e}return l?r(e[0],i):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=w.exec(e)||y.exec(e)||_.exec(e)||e.indexOf("compatible")<0&&x.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,i){return new e.fn.init(t,i)}a.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,n){return n&&n instanceof a&&!(n instanceof e)&&(n=e(n)),a.fn.init.call(this,i,n,t)},e.fn.init.prototype=e.fn;var t=e(D);return e},browser:{}}),a.each("Boolean Number String Function Array Date RegExp Object".split(" "),(function(e,t){O["[object "+t+"]"]=t.toLowerCase()})),(o=a.uaMatch(j)).browser&&(a.browser[o.browser]=!0,a.browser.version=o.version),a.browser.webkit&&(a.browser.safari=!0),d.test("\xa0")&&(h=/^[\s\xA0]+/,f=/[\s\xA0]+$/),n=a(D),D.addEventListener?s=function(){D.removeEventListener("DOMContentLoaded",s,!1),a.ready()}:D.attachEvent&&(s=function(){"complete"===D.readyState&&(D.detachEvent("onreadystatechange",s),a.ready())}),a}(),R={};F.Callbacks=function(e){e=e?R[e]||i(e):{};var n,o,r,s,a,l=[],c=[],u=function(t){var i,n,o,r;for(i=0,n=t.length;i<n;i++)o=t[i],"array"===(r=F.type(o))?u(o):"function"===r&&(e.unique&&h.has(o)||l.push(o))},d=function(t,i){for(i=i||[],n=!e.memory||[t,i],o=!0,a=r||0,r=0,s=l.length;l&&a<s;a++)if(!1===l[a].apply(t,i)&&e.stopOnFalse){n=!0;break}o=!1,l&&(e.once?!0===n?h.disable():l=[]:c&&c.length&&(n=c.shift(),h.fireWith(n[0],n[1])))},h={add:function(){if(l){var e=l.length;u(arguments),o?s=l.length:n&&!0!==n&&(r=e,d(n[0],n[1]))}return this},remove:function(){if(l)for(var t=arguments,i=0,n=t.length;i<n;i++)for(var r=0;r<l.length&&(t[i]!==l[r]||(o&&r<=s&&(s--,r<=a&&a--),l.splice(r--,1),!e.unique));r++);return this},has:function(e){if(l)for(var t=0,i=l.length;t<i;t++)if(e===l[t])return!0;return!1},empty:function(){return l=[],this},disable:function(){return l=c=n=t,this},disabled:function(){return!l},lock:function(){return c=t,n&&!0!==n||h.disable(),this},locked:function(){return!c},fireWith:function(t,i){return c&&(o?e.once||c.push([t,i]):e.once&&n||d(t,i)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h};var q=[].slice;F.extend({Deferred:function(e){var t,i=F.Callbacks("once memory"),n=F.Callbacks("once memory"),o=F.Callbacks("memory"),r="pending",s={resolve:i,reject:n,notify:o},a={done:i.add,fail:n.add,progress:o.add,state:function(){return r},isResolved:i.fired,isRejected:n.fired,then:function(e,t,i){return l.done(e).fail(t).progress(i),this},always:function(){return l.done.apply(l,arguments).fail.apply(l,arguments),this},pipe:function(e,t,i){return F.Deferred((function(n){F.each({done:[e,"resolve"],fail:[t,"reject"],progress:[i,"notify"]},(function(e,t){var i,o=t[0],r=t[1];F.isFunction(o)?l[e]((function(){(i=o.apply(this,arguments))&&F.isFunction(i.promise)?i.promise().then(n.resolve,n.reject,n.notify):n[r+"With"](this===l?n:this,[i])})):l[e](n[r])}))})).promise()},promise:function(e){if(null==e)e=a;else for(var t in a)e[t]=a[t];return e}},l=a.promise({});for(t in s)l[t]=s[t].fire,l[t+"With"]=s[t].fireWith;return l.done((function(){r="resolved"}),n.disable,o.lock).fail((function(){r="rejected"}),i.disable,o.lock),e&&e.call(l,l),l},when:function(e){function t(e){return function(t){n[e]=arguments.length>1?q.call(arguments,0):t,--a||l.resolveWith(l,n)}}function i(e){return function(t){s[e]=arguments.length>1?q.call(arguments,0):t,l.notifyWith(c,s)}}var n=q.call(arguments,0),o=0,r=n.length,s=new Array(r),a=r,l=r<=1&&e&&F.isFunction(e.promise)?e:F.Deferred(),c=l.promise();if(r>1){for(;o<r;o++)n[o]&&n[o].promise&&F.isFunction(n[o].promise)?n[o].promise().then(t(o),l.reject,i(o)):--a;a||l.resolveWith(l,n)}else l!==e&&l.resolveWith(l,r?[e]:[]);return c}}),F.support=function(){var t,i,n,o,r,s,a,l,c,u,d,h,f=D.createElement("div");D.documentElement;if(f.setAttribute("className","t"),f.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",i=f.getElementsByTagName("*"),n=f.getElementsByTagName("a")[0],!i||!i.length||!n)return{};r=(o=D.createElement("select")).appendChild(D.createElement("option")),s=f.getElementsByTagName("input")[0],t={leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.55/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===s.value,optSelected:r.selected,getSetAttribute:"t"!==f.className,enctype:!!D.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==D.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!r.disabled;try{delete f.test}catch(e){t.deleteExpando=!1}if(!f.addEventListener&&f.attachEvent&&f.fireEvent&&(f.attachEvent("onclick",(function(){t.noCloneEvent=!1})),f.cloneNode(!0).fireEvent("onclick")),(s=D.createElement("input")).value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","checked"),f.appendChild(s),
(l=D.createDocumentFragment()).appendChild(f.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=s.checked,l.removeChild(s),l.appendChild(f),f.innerHTML="",e.getComputedStyle&&((a=D.createElement("div")).style.width="0",a.style.marginRight="0",f.style.width="2px",f.appendChild(a),t.reliableMarginRight=0===(parseInt((e.getComputedStyle(a,null)||{marginRight:0}).marginRight,10)||0)),f.attachEvent)for(d in{submit:1,change:1,focusin:1})(h=(u="on"+d)in f)||(f.setAttribute(u,"return;"),h="function"==typeof f[u]),t[d+"Bubbles"]=h;return l.removeChild(f),l=o=r=a=f=s=null,F((function(){var e,i,n,o,r,s,a,l,u,d,p=D.getElementsByTagName("body")[0];p&&(s=1,l="visibility:hidden;border:0;",d="<div "+(u="style='"+(a="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;")+"border:5px solid #000;padding:0;'")+"><div></div></div><table "+u+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",(e=D.createElement("div")).style.cssText=l+"width:0;height:0;position:static;top:0;margin-top:"+s+"px",p.insertBefore(e,p.firstChild),f=D.createElement("div"),e.appendChild(f),f.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",c=f.getElementsByTagName("td"),h=0===c[0].offsetHeight,c[0].style.display="",c[1].style.display="none",t.reliableHiddenOffsets=h&&0===c[0].offsetHeight,f.innerHTML="",f.style.width=f.style.paddingLeft="1px",F.boxModel=t.boxModel=2===f.offsetWidth,void 0!==f.style.zoom&&(f.style.display="inline",f.style.zoom=1,t.inlineBlockNeedsLayout=2===f.offsetWidth,f.style.display="",f.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=2!==f.offsetWidth),f.style.cssText=a+l,f.innerHTML=d,n=(i=f.firstChild).firstChild,o=i.nextSibling.firstChild.firstChild,r={doesNotAddBorder:5!==n.offsetTop,doesAddBorderForTableAndCells:5===o.offsetTop},n.style.position="fixed",n.style.top="20px",r.fixedPosition=20===n.offsetTop||15===n.offsetTop,n.style.position=n.style.top="",i.style.overflow="hidden",i.style.position="relative",r.subtractsBorderForOverflowNotVisible=-5===n.offsetTop,r.doesNotIncludeMarginInBodyOffset=p.offsetTop!==s,p.removeChild(e),f=e=null,F.extend(t,r))})),t}();var L=/^(?:\{.*\}|\[.*\])$/,H=/([A-Z])/g;F.extend({cache:{},uuid:0,expando:"jQuery"+(F.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return!!(e=e.nodeType?F.cache[e[F.expando]]:e[F.expando])&&!o(e)},data:function(e,i,n,o){if(F.acceptData(e)){var r,s,a,l=F.expando,c="string"==typeof i,u=e.nodeType,d=u?F.cache:e,h=u?e[l]:e[l]&&l,f="events"===i;if(h&&d[h]&&(f||o||d[h].data)||!c||n!==t)return h||(u?e[l]=h=++F.uuid:h=l),d[h]||(d[h]={},u||(d[h].toJSON=F.noop)),"object"!=typeof i&&"function"!=typeof i||(o?d[h]=F.extend(d[h],i):d[h].data=F.extend(d[h].data,i)),r=s=d[h],o||(s.data||(s.data={}),s=s.data),n!==t&&(s[F.camelCase(i)]=n),f&&!s[i]?r.events:(c?null==(a=s[i])&&(a=s[F.camelCase(i)]):a=s,a)}},removeData:function(e,t,i){if(F.acceptData(e)){var n,r,s,a=F.expando,l=e.nodeType,c=l?F.cache:e,u=l?e[a]:a;if(c[u]){if(t&&(n=i?c[u]:c[u].data)){F.isArray(t)||(t=t in n||(t=F.camelCase(t))in n?[t]:t.split(" "));for(r=0,s=t.length;r<s;r++)delete n[t[r]];if(!(i?o:F.isEmptyObject)(n))return}(i||(delete c[u].data,o(c[u])))&&(F.support.deleteExpando||!c.setInterval?delete c[u]:c[u]=null,l&&(F.support.deleteExpando?delete e[a]:e.removeAttribute?e.removeAttribute(a):e[a]=null))}}},_data:function(e,t,i){return F.data(e,t,i,!0)},acceptData:function(e){if(e.nodeName){var t=F.noData[e.nodeName.toLowerCase()];if(t)return!(!0===t||e.getAttribute("classid")!==t)}return!0}}),F.fn.extend({data:function(e,i){var o,r,s,a=null;if(void 0===e){if(this.length&&(a=F.data(this[0]),1===this[0].nodeType&&!F._data(this[0],"parsedAttrs"))){for(var l=0,c=(r=this[0].attributes).length;l<c;l++)0===(s=r[l].name).indexOf("data-")&&(s=F.camelCase(s.substring(5)),n(this[0],s,a[s]));F._data(this[0],"parsedAttrs",!0)}return a}return"object"==typeof e?this.each((function(){F.data(this,e)})):((o=e.split("."))[1]=o[1]?"."+o[1]:"",i===t?((a=this.triggerHandler("getData"+o[1]+"!",[o[0]]))===t&&this.length&&(a=F.data(this[0],e),a=n(this[0],e,a)),a===t&&o[1]?this.data(o[0]):a):this.each((function(){var t=F(this),n=[o[0],i];t.triggerHandler("setData"+o[1]+"!",n),F.data(this,e,i),t.triggerHandler("changeData"+o[1]+"!",n)})))},removeData:function(e){return this.each((function(){F.removeData(this,e)}))}}),F.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",F._data(e,t,(F._data(e,t)||0)+1))},_unmark:function(e,t,i){if(!0!==e&&(i=t,t=e,e=!1),t){var n=(i=i||"fx")+"mark",o=e?0:(F._data(t,n)||1)-1;o?F._data(t,n,o):(F.removeData(t,n,!0),r(t,i,"mark"))}},queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=F._data(e,t),i&&(!n||F.isArray(i)?n=F._data(e,t,F.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=F.queue(e,t),n=i.shift(),o={};"inprogress"===n&&(n=i.shift()),n&&("fx"===t&&i.unshift("inprogress"),F._data(e,t+".run",o),n.call(e,(function(){F.dequeue(e,t)}),o)),i.length||(F.removeData(e,t+"queue "+t+".run",!0),r(e,t,"queue"))}}),F.fn.extend({queue:function(e,i){return"string"!=typeof e&&(i=e,e="fx"),i===t?F.queue(this[0],e):this.each((function(){var t=F.queue(this,e,i);"fx"===e&&"inprogress"!==t[0]&&F.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){F.dequeue(this,e)}))},delay:function(e,t){return e=F.fx&&F.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e){function i(){--a||o.resolveWith(r,[r])}"string"!=typeof e&&(e,e=t),e=e||"fx";for(var n,o=F.Deferred(),r=this,s=r.length,a=1,l=e+"defer",c=e+"queue",u=e+"mark";s--;)(n=F.data(r[s],l,t,!0)||(F.data(r[s],c,t,!0)||F.data(r[s],u,t,!0))&&F.data(r[s],l,F.Callbacks("once memory"),!0))&&(a++,n.add(i));return i(),o.promise()}});var M,W,U,B=/[\n\t\r]/g,z=/\s+/,G=/\r/g,X=/^(?:button|input)$/i,V=/^(?:button|input|object|select|textarea)$/i,Q=/^a(?:rea)?$/i,Y=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,J=F.support.getSetAttribute;F.fn.extend({attr:function(e,t){return F.access(this,e,t,!0,F.attr)},removeAttr:function(e){return this.each((function(){F.removeAttr(this,e)}))},prop:function(e,t){return F.access(this,e,t,!0,F.prop)},removeProp:function(e){return e=F.propFix[e]||e,this.each((function(){try{this[e]=t,delete this[e]}catch(e){}}))},addClass:function(e){var t,i,n,o,r,s,a;if(F.isFunction(e))return this.each((function(t){F(this).addClass(e.call(this,t,this.className))}));if(e&&"string"==typeof e)for(t=e.split(z),i=0,n=this.length;i<n;i++)if(1===(o=this[i]).nodeType)if(o.className||1!==t.length){for(r=" "+o.className+" ",s=0,a=t.length;s<a;s++)~r.indexOf(" "+t[s]+" ")||(r+=t[s]+" ");o.className=F.trim(r)}else o.className=e;return this},removeClass:function(e){var i,n,o,r,s,a,l;if(F.isFunction(e))return this.each((function(t){F(this).removeClass(e.call(this,t,this.className))}));if(e&&"string"==typeof e||e===t)for(i=(e||"").split(z),n=0,o=this.length;n<o;n++)if(1===(r=this[n]).nodeType&&r.className)if(e){for(s=(" "+r.className+" ").replace(B," "),a=0,l=i.length;a<l;a++)s=s.replace(" "+i[a]+" "," ");r.className=F.trim(s)}else r.className="";return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return F.isFunction(e)?this.each((function(i){F(this).toggleClass(e.call(this,i,this.className,t),t)})):this.each((function(){if("string"===i)for(var o,r=0,s=F(this),a=t,l=e.split(z);o=l[r++];)a=n?a:!s.hasClass(o),s[a?"addClass":"removeClass"](o);else"undefined"!==i&&"boolean"!==i||(this.className&&F._data(this,"__className__",this.className),this.className=this.className||!1===e?"":F._data(this,"__className__")||"")}))},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(B," ").indexOf(t)>-1)return!0;return!1},val:function(e){var i,n,o,r=this[0];return arguments.length?(o=F.isFunction(e),this.each((function(n){var r,s=F(this);1===this.nodeType&&(null==(r=o?e.call(this,n,s.val()):e)?r="":"number"==typeof r?r+="":F.isArray(r)&&(r=F.map(r,(function(e){return null==e?"":e+""}))),(i=F.valHooks[this.nodeName.toLowerCase()]||F.valHooks[this.type])&&"set"in i&&i.set(this,r,"value")!==t||(this.value=r))}))):r?(i=F.valHooks[r.nodeName.toLowerCase()]||F.valHooks[r.type])&&"get"in i&&(n=i.get(r,"value"))!==t?n:"string"==typeof(n=r.value)?n.replace(G,""):null==n?"":n:void 0}}),F.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i,n,o,r=e.selectedIndex,s=[],a=e.options,l="select-one"===e.type;if(r<0)return null;for(i=l?r:0,n=l?r+1:a.length;i<n;i++)if((o=a[i]).selected&&(F.support.optDisabled?!o.disabled:null===o.getAttribute("disabled"))&&(!o.parentNode.disabled||!F.nodeName(o.parentNode,"optgroup"))){if(t=F(o).val(),l)return t;s.push(t)}return l&&!s.length&&a.length?F(a[r]).val():s},set:function(e,t){var i=F.makeArray(t);return F(e).find("option").each((function(){this.selected=F.inArray(F(this).val(),i)>=0})),i.length||(e.selectedIndex=-1),i}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,i,n,o){var r,s,a,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return o&&i in F.attrFn?F(e)[i](n):void 0===e.getAttribute?F.prop(e,i,n):((a=1!==l||!F.isXMLDoc(e))&&(i=i.toLowerCase(),s=F.attrHooks[i]||(Y.test(i)?W:M)),n!==t?null===n?void F.removeAttr(e,i):s&&"set"in s&&a&&(r=s.set(e,n,i))!==t?r:(e.setAttribute(i,""+n),n):s&&"get"in s&&a&&null!==(r=s.get(e,i))?r:null===(r=e.getAttribute(i))?t:r)},removeAttr:function(e,t){var i,n,o,r,s=0;if(t&&1===e.nodeType)for(r=(n=t.toLowerCase().split(z)).length;s<r;s++)(o=n[s])&&(i=F.propFix[o]||o,F.attr(e,o,""),e.removeAttribute(J?o:i),Y.test(o)&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(X.test(e.nodeName)&&e.parentNode)F.error("type property can't be changed");else if(!F.support.radioValue&&"radio"===t&&F.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return M&&F.nodeName(e,"button")?M.get(e,t):t in e?e.value:null},set:function(e,t,i){if(M&&F.nodeName(e,"button"))return M.set(e,t,i);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,n){var o,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return(1!==s||!F.isXMLDoc(e))&&(i=F.propFix[i]||i,r=F.propHooks[i]),n!==t?r&&"set"in r&&(o=r.set(e,n,i))!==t?o:e[i]=n:r&&"get"in r&&null!==(o=r.get(e,i))?o:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):V.test(e.nodeName)||Q.test(e.nodeName)&&e.href?0:t}}}}),F.attrHooks.tabindex=F.propHooks.tabIndex,W={get:function(e,i){var n,o=F.prop(e,i);return!0===o||"boolean"!=typeof o&&(n=e.getAttributeNode(i))&&!1!==n.nodeValue?i.toLowerCase():t},set:function(e,t,i){var n;return!1===t?F.removeAttr(e,i):((n=F.propFix[i]||i)in e&&(e[n]=!0),e.setAttribute(i,i.toLowerCase())),i}},J||(U={name:!0,id:!0},M=F.valHooks.button={get:function(e,i){var n;return(n=e.getAttributeNode(i))&&(U[i]?""!==n.nodeValue:n.specified)?n.nodeValue:t},set:function(e,t,i){var n=e.getAttributeNode(i);return n||(n=D.createAttribute(i),e.setAttributeNode(n)),n.nodeValue=t+""}},F.attrHooks.tabindex.set=M.set,F.each(["width","height"],(function(e,t){F.attrHooks[t]=F.extend(F.attrHooks[t],{set:function(e,i){if(""===i)return e.setAttribute(t,"auto"),i}})})),F.attrHooks.contenteditable={get:M.get,set:function(e,t,i){""===t&&(t="false"),M.set(e,t,i)}}),F.support.hrefNormalized||F.each(["href","src","width","height"],(function(e,i){F.attrHooks[i]=F.extend(F.attrHooks[i],{get:function(e){var n=e.getAttribute(i,2);return null===n?t:n}})})),F.support.style||(F.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),F.support.optSelected||(F.propHooks.selected=F.extend(F.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),F.support.enctype||(F.propFix.enctype="encoding"),F.support.checkOn||F.each(["radio","checkbox"],(function(){F.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}})),F.each(["radio","checkbox"],(function(){F.valHooks[this]=F.extend(F.valHooks[this],{set:function(e,t){if(F.isArray(t))return e.checked=F.inArray(F(e).val(),t)>=0}})}));var Z=/^(?:textarea|input|select)$/i,K=/^([^\.]*)?(?:\.(.+))?$/,ee=/\bhover(\.\S+)?\b/,te=/^key/,ie=/^(?:mouse|contextmenu)|click/,ne=/^(?:focusinfocus|focusoutblur)$/,oe=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,re=function(e){var t=oe.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},se=function(e,t){var i=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(i.id||{}).value===t[2])&&(!t[3]||t[3].test((i.class||{}).value))},ae=function(e){return F.event.special.hover?e:e.replace(ee,"mouseenter$1 mouseleave$1")};F.event={add:function(e,i,n,o,r){var s,a,l,c,u,d,h,f,p,m,g;if(3!==e.nodeType&&8!==e.nodeType&&i&&n&&(s=F._data(e))){for(n.handler&&(n=(p=n).handler),n.guid||(n.guid=F.guid++),(l=s.events)||(s.events=l={}),(a=s.handle)||(s.handle=a=function(e){return void 0===F||e&&F.event.triggered===e.type?t:F.event.dispatch.apply(a.elem,arguments)},a.elem=e),i=F.trim(ae(i)).split(" "),c=0;c<i.length;c++)d=(u=K.exec(i[c])||[])[1],h=(u[2]||"").split(".").sort(),g=F.event.special[d]||{},d=(r?g.delegateType:g.bindType)||d,g=F.event.special[d]||{},f=F.extend({type:d,origType:u[1],data:o,handler:n,guid:n.guid,selector:r,quick:re(r),namespace:h.join(".")},p),(m=l[d])||((m=l[d]=[]).delegateCount=0,g.setup&&!1!==g.setup.call(e,o,h,a)||(e.addEventListener?e.addEventListener(d,a,!1):e.attachEvent&&e.attachEvent("on"+d,a))),g.add&&(g.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),r?m.splice(m.delegateCount++,0,f):m.push(f),F.event.global[d]=!0;e=null}},global:{},remove:function(e,t,i,n,o){var r,s,a,l,c,u,d,h,f,p,m,g,v=F.hasData(e)&&F._data(e);if(v&&(h=v.events)){for(t=F.trim(ae(t||"")).split(" "),r=0;r<t.length;r++)if(a=l=(s=K.exec(t[r])||[])[1],c=s[2],a){for(f=F.event.special[a]||{},u=(m=h[a=(n?f.delegateType:f.bindType)||a]||[]).length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=0;d<m.length;d++)g=m[d],!o&&l!==g.origType||i&&i.guid!==g.guid||c&&!c.test(g.namespace)||n&&n!==g.selector&&("**"!==n||!g.selector)||(m.splice(d--,1),g.selector&&m.delegateCount--,f.remove&&f.remove.call(e,g));0===m.length&&u!==m.length&&(f.teardown&&!1!==f.teardown.call(e,c)||F.removeEvent(e,a,v.handle),delete h[a])}else for(a in h)F.event.remove(e,a+t[r],i,n,!0);F.isEmptyObject(h)&&((p=v.handle)&&(p.elem=null),F.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,o,r){if(!o||3!==o.nodeType&&8!==o.nodeType){var s,a,l,c,u,d,h,f,p,m,g=i.type||i,v=[];if(!ne.test(g+F.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),a=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),o&&!F.event.customEvent[g]||F.event.global[g]))if((i="object"==typeof i?i[F.expando]?i:new F.Event(g,i):new F.Event(g)).type=g,i.isTrigger=!0,i.exclusive=a,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=g.indexOf(":")<0?"on"+g:"",o){if(i.result=t,i.target||(i.target=o),(n=null!=n?F.makeArray(n):[]).unshift(i),!(h=F.event.special[g]||{}).trigger||!1!==h.trigger.apply(o,n)){if(p=[[o,h.bindType||g]],!r&&!h.noBubble&&!F.isWindow(o)){for(m=h.delegateType||g,c=ne.test(m+g)?o:o.parentNode,u=null;c;c=c.parentNode)p.push([c,m]),u=c;u&&u===o.ownerDocument&&p.push([u.defaultView||u.parentWindow||e,m])}for(l=0;l<p.length&&!i.isPropagationStopped();l++)c=p[l][0],i.type=p[l][1],(f=(F._data(c,"events")||{})[i.type]&&F._data(c,"handle"))&&f.apply(c,n),(f=d&&c[d])&&F.acceptData(c)&&!1===f.apply(c,n)&&i.preventDefault();return i.type=g,r||i.isDefaultPrevented()||h._default&&!1!==h._default.apply(o.ownerDocument,n)||"click"===g&&F.nodeName(o,"a")||!F.acceptData(o)||d&&o[g]&&("focus"!==g&&"blur"!==g||0!==i.target.offsetWidth)&&!F.isWindow(o)&&((u=o[d])&&(o[d]=null),F.event.triggered=g,o[g](),F.event.triggered=t,u&&(o[d]=u)),i.result}}else for(l in s=F.cache)s[l].events&&s[l].events[g]&&F.event.trigger(i,n,s[l].handle.elem,!0)}},dispatch:function(i){i=F.event.fix(i||e.event);var n,o,r,s,a,l,c,u,d,h,f=(F._data(this,"events")||{})[i.type]||[],p=f.delegateCount,m=[].slice.call(arguments,0),g=!i.exclusive&&!i.namespace,v=[];if(m[0]=i,i.delegateTarget=this,p&&!i.target.disabled&&(!i.button||"click"!==i.type))for((s=F(this)).context=this.ownerDocument||this,r=i.target;r!=this;r=r.parentNode||this){for(l={},u=[],s[0]=r,n=0;n<p;n++)l[h=(d=f[n]).selector]===t&&(l[h]=d.quick?se(r,d.quick):s.is(h)),l[h]&&u.push(d);u.length&&v.push({elem:r,matches:u})}for(f.length>p&&v.push({elem:this,matches:f.slice(p)}),n=0;n<v.length&&!i.isPropagationStopped();n++)for(c=v[n],i.currentTarget=c.elem,o=0;o<c.matches.length&&!i.isImmediatePropagationStopped();o++)d=c.matches[o],(g||!i.namespace&&!d.namespace||i.namespace_re&&i.namespace_re.test(d.namespace))&&(i.data=d.data,i.handleObj=d,(a=((F.event.special[d.origType]||{}).handle||d.handler).apply(c.elem,m))!==t&&(i.result=a,!1===a&&(i.preventDefault(),i.stopPropagation())));return i.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,o,r,s=i.button,a=i.fromElement;return null==e.pageX&&null!=i.clientX&&(o=(n=e.target.ownerDocument||D).documentElement,r=n.body,e.pageX=i.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=i.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?i.toElement:a),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[F.expando])return e;var i,n,o=e,r=F.event.fixHooks[e.type]||{},s=r.props?this.props.concat(r.props):this.props;for(e=F.Event(o),i=s.length;i;)e[n=s[--i]]=o[n];return e.target||(e.target=o.srcElement||D),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),r.filter?r.filter(e,o):e},special:{ready:{setup:F.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){F.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,n){var o=F.extend(new F.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?F.event.trigger(o,null,t):F.event.dispatch.call(t,o),o.isDefaultPrevented()&&i.preventDefault()}},F.event.handle=F.event.dispatch,F.removeEvent=D.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){e.detachEvent&&e.detachEvent("on"+t,i)},F.Event=function(e,t){if(!(this instanceof F.Event))return new F.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?a:s):this.type=e,t&&F.extend(this,t),this.timeStamp=e&&e.timeStamp||F.now(),this[F.expando]=!0},F.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},F.each({mouseenter:"mouseover",mouseleave:"mouseout"},(function(e,t){F.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,r=e.handleObj;r.selector;return o&&(o===n||F.contains(n,o))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}})),F.support.submitBubbles||(F.event.special.submit={setup:function(){if(F.nodeName(this,"form"))return!1;F.event.add(this,"click._submit keypress._submit",(function(e){var i=e.target,n=F.nodeName(i,"input")||F.nodeName(i,"button")?i.form:t;n&&!n._submit_attached&&(F.event.add(n,"submit._submit",(function(e){this.parentNode&&!e.isTrigger&&F.event.simulate("submit",this.parentNode,e,!0)})),n._submit_attached=!0)}))},teardown:function(){if(F.nodeName(this,"form"))return!1;F.event.remove(this,"._submit")}}),F.support.changeBubbles||(F.event.special.change={setup:function(){if(Z.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(F.event.add(this,"propertychange._change",(function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)})),F.event.add(this,"click._change",(function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,F.event.simulate("change",this,e,!0))}))),!1;F.event.add(this,"beforeactivate._change",(function(e){var t=e.target;Z.test(t.nodeName)&&!t._change_attached&&(F.event.add(t,"change._change",(function(e){!this.parentNode||e.isSimulated||e.isTrigger||F.event.simulate("change",this.parentNode,e,!0)})),t._change_attached=!0)}))},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return F.event.remove(this,"._change"),Z.test(this.nodeName)}}),F.support.focusinBubbles||F.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=0,n=function(e){F.event.simulate(t,e.target,F.event.fix(e),!0)};F.event.special[t]={setup:function(){0==i++&&D.addEventListener(e,n,!0)},teardown:function(){0==--i&&D.removeEventListener(e,n,!0)}}})),F.fn.extend({on:function(e,i,n,o,r){var a,l;if("object"==typeof e){for(l in"string"!=typeof i&&(n=i,i=t),e)this.on(l,i,n,e[l],r);return this}if(null==n&&null==o?(o=i,n=i=t):null==o&&("string"==typeof i?(o=n,n=t):(o=n,n=i,i=t)),!1===o)o=s;else if(!o)return this;return 1===r&&(a=o,(o=function(e){return F().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=F.guid++)),this.each((function(){F.event.add(this,e,o,n,i)}))},one:function(e,t,i,n){return this.on.call(this,e,t,i,n,1)},off:function(e,i,n){if(e&&e.preventDefault&&e.handleObj){var o=e.handleObj;return F(e.delegateTarget).off(o.namespace?o.type+"."+o.namespace:o.type,o.selector,o.handler),this}if("object"==typeof e){for(var r in e)this.off(r,i,e[r]);return this}return!1!==i&&"function"!=typeof i||(n=i,i=t),!1===n&&(n=s),this.each((function(){F.event.remove(this,e,n,i)}))},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return F(this.context).on(e,this.selector,t,i),this},die:function(e,t){return F(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1==arguments.length?this.off(e,"**"):this.off(t,e,i)},trigger:function(e,t){return this.each((function(){F.event.trigger(e,t,this)}))},triggerHandler:function(e,t){if(this[0])return F.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,i=e.guid||F.guid++,n=0,o=function(i){var o=(F._data(this,"lastToggle"+e.guid)||0)%n;return F._data(this,"lastToggle"+e.guid,o+1),i.preventDefault(),t[o].apply(this,arguments)||!1};for(o.guid=i;n<t.length;)t[n++].guid=i;return this.click(o)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),F.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){F.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},F.attrFn&&(F.attrFn[t]=!0),te.test(t)&&(F.event.fixHooks[t]=F.event.keyHooks),ie.test(t)&&(F.event.fixHooks[t]=F.event.mouseHooks)})),function(){function e(e,t,i,n,r,s){for(var a=0,l=n.length;a<l;a++){var c=n[a];if(c){var u=!1;for(c=c[e];c;){if(c[o]===i){u=n[c.sizset];break}if(1!==c.nodeType||s||(c[o]=i,c.sizset=a),c.nodeName.toLowerCase()===t){u=c;break}c=c[e]}n[a]=u}}}function i(e,t,i,n,r,s){for(var a=0,l=n.length;a<l;a++){var c=n[a];if(c){var u=!1;for(c=c[e];c;){if(c[o]===i){u=n[c.sizset];break}if(1===c.nodeType)if(s||(c[o]=i,c.sizset=a),"string"!=typeof t){if(c===t){u=!0;break}}else if(h.filter(t,[c]).length>0){u=c;break}c=c[e]}n[a]=u}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o="sizcache"+(Math.random()+"").replace(".",""),r=0,s=Object.prototype.toString,a=!1,l=!0,c=/\\/g,u=/\r\n/g,d=/\W/;[0,0].sort((function(){return l=!1,0}));var h=function(e,t,i,o){i=i||[];var r=t=t||D;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return i;var a,l,c,u,d,f,g,v,b=!0,w=h.isXML(t),y=[],k=e;do{if(n.exec(""),(a=n.exec(k))&&(k=a[3],y.push(a[1]),a[2])){u=a[3];break}}while(a);if(y.length>1&&m.exec(e))if(2===y.length&&p.relative[y[0]])l=x(y[0]+y[1],t,o);else for(l=p.relative[y[0]]?[t]:h(y.shift(),t);y.length;)e=y.shift(),p.relative[e]&&(e+=y.shift()),l=x(e,l,o);else if(!o&&y.length>1&&9===t.nodeType&&!w&&p.match.ID.test(y[0])&&!p.match.ID.test(y[y.length-1])&&(t=(d=h.find(y.shift(),t,w)).expr?h.filter(d.expr,d.set)[0]:d.set[0]),t)for(l=(d=o?{expr:y.pop(),set:_(o)}:h.find(y.pop(),1!==y.length||"~"!==y[0]&&"+"!==y[0]||!t.parentNode?t:t.parentNode,w)).expr?h.filter(d.expr,d.set):d.set,y.length>0?c=_(l):b=!1;y.length;)g=f=y.pop(),p.relative[f]?g=y.pop():f="",null==g&&(g=t),p.relative[f](c,g,w);else c=y=[];if(c||(c=l),c||h.error(f||e),"[object Array]"===s.call(c))if(b)if(t&&1===t.nodeType)for(v=0;null!=c[v];v++)c[v]&&(!0===c[v]||1===c[v].nodeType&&h.contains(t,c[v]))&&i.push(l[v]);else for(v=0;null!=c[v];v++)c[v]&&1===c[v].nodeType&&i.push(l[v]);else i.push.apply(i,c);else _(c,i);return u&&(h(u,r,i,o),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(b&&(a=l,e.sort(b),a))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,i){var n,o,r,s,a,l;if(!e)return[];for(o=0,r=p.order.length;o<r;o++)if(a=p.order[o],(s=p.leftMatch[a].exec(e))&&(l=s[1],s.splice(1,1),"\\"!==l.substr(l.length-1)&&(s[1]=(s[1]||"").replace(c,""),null!=(n=p.find[a](s,t,i))))){e=e.replace(p.match[a],"");break}return n||(n=void 0!==t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:n,expr:e}},h.filter=function(e,i,n,o){for(var r,s,a,l,c,u,d,f,m,g=e,v=[],b=i,w=i&&i[0]&&h.isXML(i[0]);e&&i.length;){for(a in p.filter)if(null!=(r=p.leftMatch[a].exec(e))&&r[2]){if(u=p.filter[a],d=r[1],s=!1,r.splice(1,1),"\\"===d.substr(d.length-1))continue;if(b===v&&(v=[]),p.preFilter[a])if(r=p.preFilter[a](r,b,n,v,o,w)){if(!0===r)continue}else s=l=!0;if(r)for(f=0;null!=(c=b[f]);f++)c&&(m=o^(l=u(c,r,f,b)),n&&null!=l?m?s=!0:b[f]=!1:m&&(v.push(c),s=!0));if(l!==t){if(n||(b=v),e=e.replace(p.match[a],""),!s)return[];break}}if(e===g){if(null!=s)break;h.error(e)}g=e}return b},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var f=h.getText=function(e){var t,i,n=e.nodeType,o="";if(n){if(1===n||9===n){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(u,"");for(e=e.firstChild;e;e=e.nextSibling)o+=f(e)}else if(3===n||4===n)return e.nodeValue}else for(t=0;i=e[t];t++)8!==i.nodeType&&(o+=f(i));return o},p=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var i="string"==typeof t,n=i&&!d.test(t),o=i&&!n;n&&(t=t.toLowerCase());for(var r,s=0,a=e.length;s<a;s++)if(r=e[s]){for(;(r=r.previousSibling)&&1!==r.nodeType;);e[s]=o||r&&r.nodeName.toLowerCase()===t?r||!1:r===t}o&&h.filter(t,e,!0)},">":function(e,t){var i,n="string"==typeof t,o=0,r=e.length;if(n&&!d.test(t)){for(t=t.toLowerCase();o<r;o++)if(i=e[o]){var s=i.parentNode;e[o]=s.nodeName.toLowerCase()===t&&s}}else{for(;o<r;o++)(i=e[o])&&(e[o]=n?i.parentNode:i.parentNode===t);n&&h.filter(t,e,!0)}},"":function(t,n,o){var s,a=r++,l=i;"string"!=typeof n||d.test(n)||(s=n=n.toLowerCase(),l=e),l("parentNode",n,a,t,s,o)},"~":function(t,n,o){var s,a=r++,l=i;"string"!=typeof n||d.test(n)||(s=n=n.toLowerCase(),l=e),l("previousSibling",n,a,t,s,o)}},find:{ID:function(e,t,i){if(void 0!==t.getElementById&&!i){var n=t.getElementById(e[1]);return n&&n.parentNode?[n]:[]}},NAME:function(e,t){if(void 0!==t.getElementsByName){for(var i=[],n=t.getElementsByName(e[1]),o=0,r=n.length;o<r;o++)n[o].getAttribute("name")===e[1]&&i.push(n[o]);return 0===i.length?null:i}},TAG:function(e,t){if(void 0!==t.getElementsByTagName)return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,i,n,o,r){if(e=" "+e[1].replace(c,"")+" ",r)return e;for(var s,a=0;null!=(s=t[a]);a++)s&&(o^(s.className&&(" "+s.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?i||n.push(s):i&&(t[a]=!1));return!1},ID:function(e){return e[1].replace(c,"")},TAG:function(e){return e[1].replace(c,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(("even"===e[2]?"2n":"odd"===e[2]&&"2n+1")||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=r++,e},ATTR:function(e,t,i,n,o,r){var s=e[1]=e[1].replace(c,"");return!r&&p.attrMap[s]&&(e[1]=p.attrMap[s]),e[4]=(e[4]||e[5]||"").replace(c,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,i,o,r){if("not"===e[1]){if(!((n.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var s=h.filter(e[3],t,i,!0^r);return i||o.push.apply(o,s),!1}e[3]=h(e[3],null,null,t)}else if(p.match.POS.test(e[0])||p.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return!1===e.disabled&&"hidden"!==e.type},disabled:function(e){return!0===e.disabled},checked:function(e){return!0===e.checked},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,i){return!!h(i[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),i=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===i&&(t===i||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){
return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,i,n){return t===n.length-1},even:function(e,t){return t%2==0},odd:function(e,t){return t%2==1},lt:function(e,t,i){return t<i[3]-0},gt:function(e,t,i){return t>i[3]-0},nth:function(e,t,i){return i[3]-0===t},eq:function(e,t,i){return i[3]-0===t}},filter:{PSEUDO:function(e,t,i,n){var o=t[1],r=p.filters[o];if(r)return r(e,i,t,n);if("contains"===o)return(e.textContent||e.innerText||f([e])||"").indexOf(t[3])>=0;if("not"===o){for(var s=t[3],a=0,l=s.length;a<l;a++)if(s[a]===e)return!1;return!0}h.error(o)},CHILD:function(e,t){var i,n,r,s,a,l,c=t[1],u=e;switch(c){case"only":case"first":for(;u=u.previousSibling;)if(1===u.nodeType)return!1;if("first"===c)return!0;u=e;case"last":for(;u=u.nextSibling;)if(1===u.nodeType)return!1;return!0;case"nth":if(i=t[2],n=t[3],1===i&&0===n)return!0;if(r=t[0],(s=e.parentNode)&&(s[o]!==r||!e.nodeIndex)){for(a=0,u=s.firstChild;u;u=u.nextSibling)1===u.nodeType&&(u.nodeIndex=++a);s[o]=r}return l=e.nodeIndex-n,0===i?0===l:l%i==0&&l/i>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var i=t[1],n=h.attr?h.attr(e,i):p.attrHandle[i]?p.attrHandle[i](e):null!=e[i]?e[i]:e.getAttribute(i),o=n+"",r=t[2],s=t[4];return null==n?"!="===r:!r&&h.attr?null!=n:"="===r?o===s:"*="===r?o.indexOf(s)>=0:"~="===r?(" "+o+" ").indexOf(s)>=0:s?"!="===r?o!==s:"^="===r?0===o.indexOf(s):"$="===r?o.substr(o.length-s.length)===s:"|="===r&&(o===s||o.substr(0,s.length+1)===s+"-"):o&&!1!==n},POS:function(e,t,i,n){var o=t[2],r=p.setFilters[o];if(r)return r(e,i,t,n)}}},m=p.match.POS,g=function(e,t){return"\\"+(t-0+1)};for(var v in p.match)p.match[v]=new RegExp(p.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),p.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[v].source.replace(/\\(\d+)/g,g));var b,w,y,_=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(D.documentElement.childNodes,0)[0].nodeType}catch(e){_=function(e,t){var i=0,n=t||[];if("[object Array]"===s.call(e))Array.prototype.push.apply(n,e);else if("number"==typeof e.length)for(var o=e.length;i<o;i++)n.push(e[i]);else for(;e[i];i++)n.push(e[i]);return n}}D.documentElement.compareDocumentPosition?b=function(e,t){return e===t?(a=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(b=function(e,t){if(e===t)return a=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,n,o=[],r=[],s=e.parentNode,l=t.parentNode,c=s;if(s===l)return w(e,t);if(!s)return-1;if(!l)return 1;for(;c;)o.unshift(c),c=c.parentNode;for(c=l;c;)r.unshift(c),c=c.parentNode;i=o.length,n=r.length;for(var u=0;u<i&&u<n;u++)if(o[u]!==r[u])return w(o[u],r[u]);return u===i?w(e,r[u],-1):w(o[u],t,1)},w=function(e,t,i){if(e===t)return i;for(var n=e.nextSibling;n;){if(n===t)return-1;n=n.nextSibling}return 1}),function(){var e=D.createElement("div"),i="script"+(new Date).getTime(),n=D.documentElement;e.innerHTML="<a name='"+i+"'/>",n.insertBefore(e,n.firstChild),D.getElementById(i)&&(p.find.ID=function(e,i,n){if(void 0!==i.getElementById&&!n){var o=i.getElementById(e[1]);return o?o.id===e[1]||void 0!==o.getAttributeNode&&o.getAttributeNode("id").nodeValue===e[1]?[o]:t:[]}},p.filter.ID=function(e,t){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&i&&i.nodeValue===t}),n.removeChild(e),n=e=null}(),(y=D.createElement("div")).appendChild(D.createComment("")),y.getElementsByTagName("*").length>0&&(p.find.TAG=function(e,t){var i=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var n=[],o=0;i[o];o++)1===i[o].nodeType&&n.push(i[o]);i=n}return i}),y.innerHTML="<a href='#'></a>",y.firstChild&&void 0!==y.firstChild.getAttribute&&"#"!==y.firstChild.getAttribute("href")&&(p.attrHandle.href=function(e){return e.getAttribute("href",2)}),y=null,D.querySelectorAll&&function(){var e=h,t=D.createElement("div"),i="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){for(var n in h=function(t,n,o,r){if(n=n||D,!r&&!h.isXML(n)){var s=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(s&&(1===n.nodeType||9===n.nodeType)){if(s[1])return _(n.getElementsByTagName(t),o);if(s[2]&&p.find.CLASS&&n.getElementsByClassName)return _(n.getElementsByClassName(s[2]),o)}if(9===n.nodeType){if("body"===t&&n.body)return _([n.body],o);if(s&&s[3]){var a=n.getElementById(s[3]);if(!a||!a.parentNode)return _([],o);if(a.id===s[3])return _([a],o)}try{return _(n.querySelectorAll(t),o)}catch(e){}}else if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){var l=n,c=n.getAttribute("id"),u=c||i,d=n.parentNode,f=/^\s*[+~]/.test(t);c?u=u.replace(/'/g,"\\$&"):n.setAttribute("id",u),f&&d&&(n=n.parentNode);try{if(!f||d)return _(n.querySelectorAll("[id='"+u+"'] "+t),o)}catch(e){}finally{c||l.removeAttribute("id")}}}return e(t,n,o,r)},e)h[n]=e[n];t=null}}(),function(){var e=D.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var i=!t.call(D.createElement("div"),"div"),n=!1;try{t.call(D.documentElement,"[test!='']:sizzle")}catch(e){n=!0}h.matchesSelector=function(e,o){if(o=o.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!h.isXML(e))try{if(n||!p.match.PSEUDO.test(o)&&!/!=/.test(o)){var r=t.call(e,o);if(r||!i||e.document&&11!==e.document.nodeType)return r}}catch(e){}return h(o,null,null,[e]).length>0}}}(),function(){var e=D.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(p.order.splice(1,0,"CLASS"),p.find.CLASS=function(e,t,i){if(void 0!==t.getElementsByClassName&&!i)return t.getElementsByClassName(e[1])},e=null))}(),D.documentElement.contains?h.contains=function(e,t){return e!==t&&(!e.contains||e.contains(t))}:D.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(16&e.compareDocumentPosition(t))}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return!!t&&"HTML"!==t.nodeName};var x=function(e,t,i){for(var n,o=[],r="",s=t.nodeType?[t]:t;n=p.match.PSEUDO.exec(e);)r+=n[0],e=e.replace(p.match.PSEUDO,"");e=p.relative[e]?e+"*":e;for(var a=0,l=s.length;a<l;a++)h(e,s[a],o,i);return h.filter(r,o)};h.attr=F.attr,h.selectors.attrMap={},F.find=h,F.expr=h.selectors,F.expr[":"]=F.expr.filters,F.unique=h.uniqueSort,F.text=h.getText,F.isXMLDoc=h.isXML,F.contains=h.contains}();var le=/Until$/,ce=/^(?:parents|prevUntil|prevAll)/,ue=/,/,de=/^.[^:#\[\.,]*$/,he=Array.prototype.slice,fe=F.expr.match.POS,pe={children:!0,contents:!0,next:!0,prev:!0};F.fn.extend({find:function(e){var t,i,n=this;if("string"!=typeof e)return F(e).filter((function(){for(t=0,i=n.length;t<i;t++)if(F.contains(n[t],this))return!0}));var o,r,s,a=this.pushStack("","find",e);for(t=0,i=this.length;t<i;t++)if(o=a.length,F.find(e,this[t],a),t>0)for(r=o;r<a.length;r++)for(s=0;s<o;s++)if(a[s]===a[r]){a.splice(r--,1);break}return a},has:function(e){var t=F(e);return this.filter((function(){for(var e=0,i=t.length;e<i;e++)if(F.contains(this,t[e]))return!0}))},not:function(e){return this.pushStack(c(this,e,!1),"not",e)},filter:function(e){return this.pushStack(c(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?fe.test(e)?F(e,this.context).index(this[0])>=0:F.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var i,n,o=[],r=this[0];if(F.isArray(e)){for(var s=1;r&&r.ownerDocument&&r!==t;){for(i=0;i<e.length;i++)F(r).is(e[i])&&o.push({selector:e[i],elem:r,level:s});r=r.parentNode,s++}return o}var a=fe.test(e)||"string"!=typeof e?F(e,t||this.context):0;for(i=0,n=this.length;i<n;i++)for(r=this[i];r;){if(a?a.index(r)>-1:F.find.matchesSelector(r,e)){o.push(r);break}if(!(r=r.parentNode)||!r.ownerDocument||r===t||11===r.nodeType)break}return o=o.length>1?F.unique(o):o,this.pushStack(o,"closest",e)},index:function(e){return e?"string"==typeof e?F.inArray(this[0],F(e)):F.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?F(e,t):F.makeArray(e&&e.nodeType?[e]:e),n=F.merge(this.get(),i);return this.pushStack(l(i[0])||l(n[0])?n:F.unique(n))},andSelf:function(){return this.add(this.prevObject)}}),F.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return F.dir(e,"parentNode")},parentsUntil:function(e,t,i){return F.dir(e,"parentNode",i)},next:function(e){return F.nth(e,2,"nextSibling")},prev:function(e){return F.nth(e,2,"previousSibling")},nextAll:function(e){return F.dir(e,"nextSibling")},prevAll:function(e){return F.dir(e,"previousSibling")},nextUntil:function(e,t,i){return F.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return F.dir(e,"previousSibling",i)},siblings:function(e){return F.sibling(e.parentNode.firstChild,e)},children:function(e){return F.sibling(e.firstChild)},contents:function(e){return F.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:F.makeArray(e.childNodes)}},(function(e,t){F.fn[e]=function(i,n){var o=F.map(this,t,i);return le.test(e)||(n=i),n&&"string"==typeof n&&(o=F.filter(n,o)),o=this.length>1&&!pe[e]?F.unique(o):o,(this.length>1||ue.test(n))&&ce.test(e)&&(o=o.reverse()),this.pushStack(o,e,he.call(arguments).join(","))}})),F.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?F.find.matchesSelector(t[0],e)?[t[0]]:[]:F.find.matches(e,t)},dir:function(e,i,n){for(var o=[],r=e[i];r&&9!==r.nodeType&&(n===t||1!==r.nodeType||!F(r).is(n));)1===r.nodeType&&o.push(r),r=r[i];return o},nth:function(e,t,i){t=t||1;for(var n=0;e&&(1!==e.nodeType||++n!==t);e=e[i]);return e},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var me="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ge=/ jQuery\d+="(?:\d+|null)"/g,ve=/^\s+/,be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,we=/<([\w:]+)/,ye=/<tbody/i,_e=/<|&#?\w+;/,xe=/<(?:script|style)/i,ke=/<(?:script|object|embed|option|style)/i,$e=new RegExp("<(?:"+me+")","i"),Ce=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/\/(java|ecma)script/i,Se=/^\s*<!(?:\[CDATA\[|\-\-)/,Te={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ae=u(D);Te.optgroup=Te.option,Te.tbody=Te.tfoot=Te.colgroup=Te.caption=Te.thead,Te.th=Te.td,F.support.htmlSerialize||(Te._default=[1,"div<div>","</div>"]),F.fn.extend({text:function(e){return F.isFunction(e)?this.each((function(t){var i=F(this);i.text(e.call(this,t,i.text()))})):"object"!=typeof e&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||D).createTextNode(e)):F.text(this)},wrapAll:function(e){if(F.isFunction(e))return this.each((function(t){F(this).wrapAll(e.call(this,t))}));if(this[0]){var t=F(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e})).append(this)}return this},wrapInner:function(e){return F.isFunction(e)?this.each((function(t){F(this).wrapInner(e.call(this,t))})):this.each((function(){var t=F(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=F.isFunction(e);return this.each((function(i){F(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(){return this.parent().each((function(){F.nodeName(this,"body")||F(this).replaceWith(this.childNodes)})).end()},append:function(){return this.domManip(arguments,!0,(function(e){1===this.nodeType&&this.appendChild(e)}))},prepend:function(){return this.domManip(arguments,!0,(function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)}))},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,(function(e){this.parentNode.insertBefore(e,this)}));if(arguments.length){var e=F.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,(function(e){this.parentNode.insertBefore(e,this.nextSibling)}));if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,F.clean(arguments)),e}},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)e&&!F.filter(e,[i]).length||(t||1!==i.nodeType||(F.cleanData(i.getElementsByTagName("*")),F.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&F.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return F.clone(this,e,t)}))},html:function(e){if(e===t)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(ge,""):null;if("string"!=typeof e||xe.test(e)||!F.support.leadingWhitespace&&ve.test(e)||Te[(we.exec(e)||["",""])[1].toLowerCase()])F.isFunction(e)?this.each((function(t){var i=F(this);i.html(e.call(this,t,i.html()))})):this.empty().append(e);else{e=e.replace(be,"<$1></$2>");try{for(var i=0,n=this.length;i<n;i++)1===this[i].nodeType&&(F.cleanData(this[i].getElementsByTagName("*")),this[i].innerHTML=e)}catch(t){this.empty().append(e)}}return this},replaceWith:function(e){return this[0]&&this[0].parentNode?F.isFunction(e)?this.each((function(t){var i=F(this),n=i.html();i.replaceWith(e.call(this,t,n))})):("string"!=typeof e&&(e=F(e).detach()),this.each((function(){var t=this.nextSibling,i=this.parentNode;F(this).remove(),t?F(t).before(e):F(i).append(e)}))):this.length?this.pushStack(F(F.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,n){var o,r,s,a,l=e[0],c=[];if(!F.support.checkClone&&3===arguments.length&&"string"==typeof l&&Ce.test(l))return this.each((function(){F(this).domManip(e,i,n,!0)}));if(F.isFunction(l))return this.each((function(o){var r=F(this);e[0]=l.call(this,o,i?r.html():t),r.domManip(e,i,n)}));if(this[0]){if(a=l&&l.parentNode,r=1===(s=(o=F.support.parentNode&&a&&11===a.nodeType&&a.childNodes.length===this.length?{fragment:a}:F.buildFragment(e,this,c)).fragment).childNodes.length?s=s.firstChild:s.firstChild){i=i&&F.nodeName(r,"tr");for(var u=0,h=this.length,f=h-1;u<h;u++)n.call(i?d(this[u],r):this[u],o.cacheable||h>1&&u<f?F.clone(s,!0,!0):s)}c.length&&F.each(c,b)}return this}}),F.buildFragment=function(e,t,i){var n,o,r,s,a=e[0];return t&&t[0]&&(s=t[0].ownerDocument||t[0]),s.createDocumentFragment||(s=D),!(1===e.length&&"string"==typeof a&&a.length<512&&s===D&&"<"===a.charAt(0))||ke.test(a)||!F.support.checkClone&&Ce.test(a)||!F.support.html5Clone&&$e.test(a)||(o=!0,(r=F.fragments[a])&&1!==r&&(n=r)),n||(n=s.createDocumentFragment(),F.clean(e,s,n,i)),o&&(F.fragments[a]=r?n:1),{fragment:n,cacheable:o}},F.fragments={},F.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){F.fn[e]=function(i){var n=[],o=F(i),r=1===this.length&&this[0].parentNode;if(r&&11===r.nodeType&&1===r.childNodes.length&&1===o.length)return o[t](this[0]),this;for(var s=0,a=o.length;s<a;s++){var l=(s>0?this.clone(!0):this).get();F(o[s])[t](l),n=n.concat(l)}return this.pushStack(n,e,o.selector)}})),F.extend({clone:function(e,t,i){var n,o,r,s=F.support.html5Clone||!$e.test("<"+e.nodeName)?e.cloneNode(!0):v(e);if(!(F.support.noCloneEvent&&F.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||F.isXMLDoc(e)))for(f(e,s),n=p(e),o=p(s),r=0;n[r];++r)o[r]&&f(n[r],o[r]);if(t&&(h(e,s),i))for(n=p(e),o=p(s),r=0;n[r];++r)h(n[r],o[r]);return n=o=null,s},clean:function(e,t,i,n){var o;void 0===(t=t||D).createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||D);for(var r,s,a=[],l=0;null!=(s=e[l]);l++)if("number"==typeof s&&(s+=""),s){if("string"==typeof s)if(_e.test(s)){s=s.replace(be,"<$1></$2>");var c=(we.exec(s)||["",""])[1].toLowerCase(),d=Te[c]||Te._default,h=d[0],f=t.createElement("div");for(t===D?Ae.appendChild(f):u(t).appendChild(f),f.innerHTML=d[1]+s+d[2];h--;)f=f.lastChild;if(!F.support.tbody){var p=ye.test(s),m="table"!==c||p?"<table>"!==d[1]||p?[]:f.childNodes:f.firstChild&&f.firstChild.childNodes;for(r=m.length-1;r>=0;--r)F.nodeName(m[r],"tbody")&&!m[r].childNodes.length&&m[r].parentNode.removeChild(m[r])}!F.support.leadingWhitespace&&ve.test(s)&&f.insertBefore(t.createTextNode(ve.exec(s)[0]),f.firstChild),s=f.childNodes}else s=t.createTextNode(s);var v;if(!F.support.appendChecked)if(s[0]&&"number"==typeof(v=s.length))for(r=0;r<v;r++)g(s[r]);else g(s);s.nodeType?a.push(s):a=F.merge(a,s)}if(i)for(o=function(e){return!e.type||je.test(e.type)},l=0;a[l];l++)if(!n||!F.nodeName(a[l],"script")||a[l].type&&"text/javascript"!==a[l].type.toLowerCase()){if(1===a[l].nodeType){var b=F.grep(a[l].getElementsByTagName("script"),o);a.splice.apply(a,[l+1,0].concat(b))}i.appendChild(a[l])}else n.push(a[l].parentNode?a[l].parentNode.removeChild(a[l]):a[l]);return a},cleanData:function(e){for(var t,i,n,o=F.cache,r=F.event.special,s=F.support.deleteExpando,a=0;null!=(n=e[a]);a++)if((!n.nodeName||!F.noData[n.nodeName.toLowerCase()])&&(i=n[F.expando])){if((t=o[i])&&t.events){for(var l in t.events)r[l]?F.event.remove(n,l):F.removeEvent(n,l,t.handle);t.handle&&(t.handle.elem=null)}s?delete n[F.expando]:n.removeAttribute&&n.removeAttribute(F.expando),delete o[i]}}});var Ie,Ee,Pe,De=/alpha\([^)]*\)/i,Ne=/opacity=([^)]*)/,Oe=/([A-Z]|^ms)/g,Fe=/^-?\d+(?:px)?$/i,Re=/^-?\d/,qe=/^([\-+])=([\-+.\de]+)/,Le={position:"absolute",visibility:"hidden",display:"block"},He=["Left","Right"],Me=["Top","Bottom"];F.fn.css=function(e,i){return 2===arguments.length&&i===t?this:F.access(this,e,i,!0,(function(e,i,n){return n!==t?F.style(e,i,n):F.css(e,i)}))},F.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ie(e,"opacity","opacity");return""===i?"1":i}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:F.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,a=F.camelCase(i),l=e.style,c=F.cssHooks[a];if(i=F.cssProps[a]||a,n===t)return c&&"get"in c&&(r=c.get(e,!1,o))!==t?r:l[i];if(!("string"===(s=typeof n)&&(r=qe.exec(n))&&(n=+(r[1]+1)*+r[2]+parseFloat(F.css(e,i)),s="number"),null==n||"number"===s&&isNaN(n)||("number"!==s||F.cssNumber[a]||(n+="px"),c&&"set"in c&&(n=c.set(e,n))===t)))try{l[i]=n}catch(e){}}},css:function(e,i,n){var o,r;return i=F.camelCase(i),r=F.cssHooks[i],"cssFloat"===(i=F.cssProps[i]||i)&&(i="float"),r&&"get"in r&&(o=r.get(e,!0,n))!==t?o:Ie?Ie(e,i):void 0},swap:function(e,t,i){var n={};for(var o in t)n[o]=e.style[o],e.style[o]=t[o];for(o in i.call(e),t)e.style[o]=n[o]}}),F.curCSS=F.css,F.each(["height","width"],(function(e,t){F.cssHooks[t]={get:function(e,i,n){var o;if(i)return 0!==e.offsetWidth?w(e,t,n):(F.swap(e,Le,(function(){o=w(e,t,n)})),o)},set:function(e,t){return Fe.test(t)?(t=parseFloat(t))>=0?t+"px":void 0:t}}})),F.support.opacity||(F.cssHooks.opacity={get:function(e,t){return Ne.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,o=F.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,t>=1&&""===F.trim(r.replace(De,""))&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=De.test(r)?r.replace(De,o):r+" "+o)}}),F((function(){F.support.reliableMarginRight||(F.cssHooks.marginRight={get:function(e,t){var i;return F.swap(e,{display:"inline-block"},(function(){i=t?Ie(e,"margin-right","marginRight"):e.style.marginRight})),i}})})),D.defaultView&&D.defaultView.getComputedStyle&&(Ee=function(e,t){var i,n,o;return t=t.replace(Oe,"-$1").toLowerCase(),(n=e.ownerDocument.defaultView)&&(o=n.getComputedStyle(e,null))&&(""!==(i=o.getPropertyValue(t))||F.contains(e.ownerDocument.documentElement,e)||(i=F.style(e,t))),i}),D.documentElement.currentStyle&&(Pe=function(e,t){var i,n,o,r=e.currentStyle&&e.currentStyle[t],s=e.style;return null===r&&s&&(o=s[t])&&(r=o),!Fe.test(r)&&Re.test(r)&&(i=s.left,(n=e.runtimeStyle&&e.runtimeStyle.left)&&(e.runtimeStyle.left=e.currentStyle.left),s.left="fontSize"===t?"1em":r||0,r=s.pixelLeft+"px",s.left=i,n&&(e.runtimeStyle.left=n)),""===r?"auto":r}),Ie=Ee||Pe,F.expr&&F.expr.filters&&(F.expr.filters.hidden=function(e){var t=e.offsetWidth,i=e.offsetHeight;return 0===t&&0===i||!F.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||F.css(e,"display"))},F.expr.filters.visible=function(e){return!F.expr.filters.hidden(e)});var We,Ue,Be=/%20/g,ze=/\[\]$/,Ge=/\r?\n/g,Xe=/#.*$/,Ve=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Qe=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ye=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Je=/^(?:GET|HEAD)$/,Ze=/^\/\//,Ke=/\?/,et=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,tt=/^(?:select|textarea)/i,it=/\s+/,nt=/([?&])_=[^&]*/,ot=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,rt=F.fn.load,st={},at={},lt=["*/"]+["*"];try{We=O.href}catch(e){(We=D.createElement("a")).href="",We=We.href}Ue=ot.exec(We.toLowerCase())||[],F.fn.extend({load:function(e,i,n){if("string"!=typeof e&&rt)return rt.apply(this,arguments);if(!this.length)return this;var o=e.indexOf(" ");if(o>=0){var r=e.slice(o,e.length);e=e.slice(0,o)}var s="GET";i&&(F.isFunction(i)?(n=i,i=t):"object"==typeof i&&(i=F.param(i,F.ajaxSettings.traditional),s="POST"));var a=this;return F.ajax({url:e,type:s,dataType:"html",data:i,complete:function(e,t,i){i=e.responseText,e.isResolved()&&(e.done((function(e){i=e})),a.html(r?F("<div>").append(i.replace(et,"")).find(r):i)),n&&a.each(n,[i,t,e])}}),this},serialize:function(){return F.param(this.serializeArray())},serializeArray:function(){return this.map((function(){return this.elements?F.makeArray(this.elements):this})).filter((function(){return this.name&&!this.disabled&&(this.checked||tt.test(this.nodeName)||Qe.test(this.type))})).map((function(e,t){var i=F(this).val();return null==i?null:F.isArray(i)?F.map(i,(function(e){return{name:t.name,value:e.replace(Ge,"\r\n")}})):{name:t.name,value:i.replace(Ge,"\r\n")}})).get()}}),F.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),(function(e,t){F.fn[t]=function(e){return this.on(t,e)}})),F.each(["get","post"],(function(e,i){F[i]=function(e,n,o,r){return F.isFunction(n)&&(r=r||o,o=n,n=t),F.ajax({type:i,url:e,data:n,success:o,dataType:r})}})),F.extend({getScript:function(e,i){return F.get(e,t,i,"script")},getJSON:function(e,t,i){return F.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?x(e,F.ajaxSettings):(t=e,e=F.ajaxSettings),x(e,t),e},ajaxSettings:{url:We,isLocal:Ye.test(Ue[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":lt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":F.parseJSON,"text xml":F.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:y(st),ajaxTransport:y(at),ajax:function(e,i){function n(e,i,n,s){if(2!==y){y=2,l&&clearTimeout(l),a=t,r=s||"",x.readyState=e>0?4:0;var c,d,b,w,_,k=i,j=n?$(h,x,n):t;if(e>=200&&e<300||304===e)if(h.ifModified&&((w=x.getResponseHeader("Last-Modified"))&&(F.lastModified[o]=w),(_=x.getResponseHeader("Etag"))&&(F.etag[o]=_)),304===e)k="notmodified",c=!0;else try{d=C(h,j),k="success",c=!0}catch(e){k="parsererror",b=e}else b=k,k&&!e||(k="error",e<0&&(e=0));x.status=e,x.statusText=""+(i||k),c?m.resolveWith(f,[d,k,x]):m.rejectWith(f,[x,k,b]),x.statusCode(v),v=t,u&&p.trigger("ajax"+(c?"Success":"Error"),[x,h,c?d:b]),g.fireWith(f,[x,k]),u&&(p.trigger("ajaxComplete",[x,h]),--F.active||F.event.trigger("ajaxStop"))}}"object"==typeof e&&(i=e,e=t),i=i||{};var o,r,s,a,l,c,u,d,h=F.ajaxSetup({},i),f=h.context||h,p=f!==h&&(f.nodeType||f instanceof F)?F(f):F.event,m=F.Deferred(),g=F.Callbacks("once memory"),v=h.statusCode||{},b={},w={},y=0,x={readyState:0,setRequestHeader:function(e,t){if(!y){var i=e.toLowerCase();e=w[i]=w[i]||e,b[e]=t}return this},getAllResponseHeaders:function(){return 2===y?r:null},getResponseHeader:function(e){var i;if(2===y){if(!s)for(s={};i=Ve.exec(r);)s[i[1].toLowerCase()]=i[2];i=s[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return y||(h.mimeType=e),this},abort:function(e){return e=e||"abort",a&&a.abort(e),n(0,e),this}};if(m.promise(x),x.success=x.done,x.error=x.fail,x.complete=g.add,x.statusCode=function(e){var t;if(e)if(y<2)for(t in e)v[t]=[v[t],e[t]];else t=e[x.status],x.then(t,t);return this},h.url=((e||h.url)+"").replace(Xe,"").replace(Ze,Ue[1]+"//"),h.dataTypes=F.trim(h.dataType||"*").toLowerCase().split(it),null==h.crossDomain&&(c=ot.exec(h.url.toLowerCase()),h.crossDomain=!(!c||c[1]==Ue[1]&&c[2]==Ue[2]&&(c[3]||("http:"===c[1]?80:443))==(Ue[3]||("http:"===Ue[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=F.param(h.data,h.traditional)),_(st,h,i,x),2===y)return!1;if(u=h.global,h.type=h.type.toUpperCase(),h.hasContent=!Je.test(h.type),u&&0==F.active++&&F.event.trigger("ajaxStart"),!h.hasContent&&(h.data&&(h.url+=(Ke.test(h.url)?"&":"?")+h.data,delete h.data),o=h.url,!1===h.cache)){var k=F.now(),j=h.url.replace(nt,"$1_="+k);h.url=j+(j===h.url?(Ke.test(h.url)?"&":"?")+"_="+k:"")}for(d in(h.data&&h.hasContent&&!1!==h.contentType||i.contentType)&&x.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(o=o||h.url,F.lastModified[o]&&x.setRequestHeader("If-Modified-Since",F.lastModified[o]),F.etag[o]&&x.setRequestHeader("If-None-Match",F.etag[o])),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+lt+"; q=0.01":""):h.accepts["*"]),h.headers)x.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(f,x,h)||2===y))return x.abort(),!1;for(d in{success:1,error:1,complete:1})x[d](h[d]);if(a=_(at,h,i,x)){x.readyState=1,u&&p.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(l=setTimeout((function(){x.abort("timeout")}),h.timeout));try{y=1,a.send(b,n)}catch(e){if(!(y<2))throw e;n(-1,e)}}else n(-1,"No Transport");return x},param:function(e,i){var n=[],o=function(e,t){t=F.isFunction(t)?t():t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=F.ajaxSettings.traditional),F.isArray(e)||e.jquery&&!F.isPlainObject(e))F.each(e,(function(){o(this.name,this.value)}));else for(var r in e)k(r,e[r],i,o);return n.join("&").replace(Be,"+")}}),F.extend({active:0,lastModified:{},etag:{}});var ct=F.now(),ut=/(\=)\?(&|$)|\?\?/i;F.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return F.expando+"_"+ct++}}),F.ajaxPrefilter("json jsonp",(function(t,i,n){var o="application/x-www-form-urlencoded"===t.contentType&&"string"==typeof t.data;if("jsonp"===t.dataTypes[0]||!1!==t.jsonp&&(ut.test(t.url)||o&&ut.test(t.data))){var r,s=t.jsonpCallback=F.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[s],l=t.url,c=t.data,u="$1"+s+"$2";return!1!==t.jsonp&&(l=l.replace(ut,u),t.url===l&&(o&&(c=c.replace(ut,u)),t.data===c&&(l+=(/\?/.test(l)?"&":"?")+t.jsonp+"="+s))),t.url=l,t.data=c,e[s]=function(e){r=[e]},n.always((function(){e[s]=a,r&&F.isFunction(a)&&e[s](r[0])})),t.converters["script json"]=function(){return r||F.error(s+" was not called"),r[0]},t.dataTypes[0]="json","script"}})),F.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return F.globalEval(e),e}}}),F.ajaxPrefilter("script",(function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)})),F.ajaxTransport("script",(function(e){if(e.crossDomain){var i,n=D.head||D.getElementsByTagName("head")[0]||D.documentElement;return{send:function(o,r){(i=D.createElement("script")).async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,o){(o||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=t,o||r(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}}));var dt,ht,ft=!!e.ActiveXObject&&function(){for(var e in dt)dt[e](0,1)},pt=0;F.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&j()||S()}:j,ht=F.ajaxSettings.xhr(),F.extend(F.support,{ajax:!!ht,cors:!!ht&&"withCredentials"in ht}),F.support.ajax&&F.ajaxTransport((function(i){var n;if(!i.crossDomain||F.support.cors)return{send:function(o,r){var s,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(a in o)l.setRequestHeader(a,o[a])}catch(e){}l.send(i.hasContent&&i.data||null),n=function(e,o){var a,c,u,d,h;try{if(n&&(o||4===l.readyState))if(n=t,s&&(l.onreadystatechange=F.noop,ft&&delete dt[s]),o)4!==l.readyState&&l.abort();else{a=l.status,u=l.getAllResponseHeaders(),d={},(h=l.responseXML)&&h.documentElement&&(d.xml=h),d.text=l.responseText;try{c=l.statusText}catch(e){c=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=d.text?200:404}}catch(e){o||r(-1,e)}d&&r(a,c,d,u)},i.async&&4!==l.readyState?(s=++pt,ft&&(dt||(dt={},F(e).unload(ft)),dt[s]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}));var mt,gt,vt,bt,wt={},yt=/^(?:toggle|show|hide)$/,_t=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,xt=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];F.fn.extend({show:function(e,t,i){var n,o;if(e||0===e)return this.animate(I("show",3),e,t,i);for(var r=0,s=this.length;r<s;r++)(n=this[r]).style&&(o=n.style.display,F._data(n,"olddisplay")||"none"!==o||(o=n.style.display=""),""===o&&"none"===F.css(n,"display")&&F._data(n,"olddisplay",E(n.nodeName)));for(r=0;r<s;r++)(n=this[r]).style&&(""!==(o=n.style.display)&&"none"!==o||(n.style.display=F._data(n,"olddisplay")||""));return this},hide:function(e,t,i){if(e||0===e)return this.animate(I("hide",3),e,t,i);for(var n,o,r=0,s=this.length;r<s;r++)(n=this[r]).style&&("none"===(o=F.css(n,"display"))||F._data(n,"olddisplay")||F._data(n,"olddisplay",o));for(r=0;r<s;r++)this[r].style&&(this[r].style.display="none");return this},_toggle:F.fn.toggle,toggle:function(e,t,i){var n="boolean"==typeof e;return F.isFunction(e)&&F.isFunction(t)?this._toggle.apply(this,arguments):null==e||n?this.each((function(){var t=n?e:F(this).is(":hidden");F(this)[t?"show":"hide"]()})):this.animate(I("toggle",3),e,t,i),this},fadeTo:function(e,t,i,n){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){function o(){!1===r.queue&&F._mark(this);var t,i,n,o,s,a,l,c,u,d=F.extend({},r),h=1===this.nodeType,f=h&&F(this).is(":hidden");for(n in d.animatedProperties={},e){if(n!==(t=F.camelCase(n))&&(e[t]=e[n],delete e[n]),i=e[t],F.isArray(i)?(d.animatedProperties[t]=i[1],i=e[t]=i[0]):d.animatedProperties[t]=d.specialEasing&&d.specialEasing[t]||d.easing||"swing","hide"===i&&f||"show"===i&&!f)return d.complete.call(this);!h||"height"!==t&&"width"!==t||(d.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===F.css(this,"display")&&"none"===F.css(this,"float")&&(F.support.inlineBlockNeedsLayout&&"inline"!==E(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}for(n in null!=d.overflow&&(this.style.overflow="hidden"),e)o=new F.fx(this,d,n),i=e[n],yt.test(i)?(u=F._data(this,"toggle"+n)||("toggle"===i?f?"show":"hide":0))?(F._data(this,"toggle"+n,"show"===u?"hide":"show"),o[u]()):o[i]():(s=_t.exec(i),a=o.cur(),s?(l=parseFloat(s[2]),"px"!==(c=s[3]||(F.cssNumber[n]?"":"px"))&&(F.style(this,n,(l||1)+c),
a=(l||1)/o.cur()*a,F.style(this,n,a+c)),s[1]&&(l=("-="===s[1]?-1:1)*l+a),o.custom(a,l,c)):o.custom(a,i,""));return!0}var r=F.speed(t,i,n);return F.isEmptyObject(e)?this.each(r.complete,[!1]):(e=F.extend({},e),!1===r.queue?this.each(o):this.queue(r.queue,o))},stop:function(e,i,n){return"string"!=typeof e&&(n=i,i=e,e=t),i&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){function t(e,t,i){var o=t[i];F.removeData(e,i,!0),o.stop(n)}var i,o=!1,r=F.timers,s=F._data(this);if(n||F._unmark(!0,this),null==e)for(i in s)s[i]&&s[i].stop&&i.indexOf(".run")===i.length-4&&t(this,s,i);else s[i=e+".run"]&&s[i].stop&&t(this,s,i);for(i=r.length;i--;)r[i].elem!==this||null!=e&&r[i].queue!==e||(n?r[i](!0):r[i].saveState(),o=!0,r.splice(i,1));n&&o||F.dequeue(this,e)}))}}),F.each({slideDown:I("show",1),slideUp:I("hide",1),slideToggle:I("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){F.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),F.extend({speed:function(e,t,i){var n=e&&"object"==typeof e?F.extend({},e):{complete:i||!i&&t||F.isFunction(e)&&e,duration:e,easing:i&&t||t&&!F.isFunction(t)&&t};return n.duration=F.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in F.fx.speeds?F.fx.speeds[n.duration]:F.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(e){F.isFunction(n.old)&&n.old.call(this),n.queue?F.dequeue(this,n.queue):!1!==e&&F._unmark(this)},n},easing:{linear:function(e,t,i,n){return i+n*e},swing:function(e,t,i,n){return(-Math.cos(e*Math.PI)/2+.5)*n+i}},timers:[],fx:function(e,t,i){this.options=t,this.elem=e,this.prop=i,t.orig=t.orig||{}}}),F.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(F.fx.step[this.prop]||F.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=F.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,i,n){function o(e){return r.step(e)}var r=this,s=F.fx;this.startTime=bt||T(),this.end=i,this.now=this.start=e,this.pos=this.state=0,this.unit=n||this.unit||(F.cssNumber[this.prop]?"":"px"),o.queue=this.options.queue,o.elem=this.elem,o.saveState=function(){r.options.hide&&F._data(r.elem,"fxshow"+r.prop)===t&&F._data(r.elem,"fxshow"+r.prop,r.start)},o()&&F.timers.push(o)&&!vt&&(vt=setInterval(s.tick,s.interval))},show:function(){var e=F._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||F.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),F(this.elem).show()},hide:function(){this.options.orig[this.prop]=F._data(this.elem,"fxshow"+this.prop)||F.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,i,n,o=bt||T(),r=!0,s=this.elem,a=this.options;if(e||o>=a.duration+this.startTime){for(t in this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0,a.animatedProperties)!0!==a.animatedProperties[t]&&(r=!1);if(r){if(null==a.overflow||F.support.shrinkWrapBlocks||F.each(["","X","Y"],(function(e,t){s.style["overflow"+t]=a.overflow[e]})),a.hide&&F(s).hide(),a.hide||a.show)for(t in a.animatedProperties)F.style(s,t,a.orig[t]),F.removeData(s,"fxshow"+t,!0),F.removeData(s,"toggle"+t,!0);(n=a.complete)&&(a.complete=!1,n.call(s))}return!1}return a.duration==1/0?this.now=o:(i=o-this.startTime,this.state=i/a.duration,this.pos=F.easing[a.animatedProperties[this.prop]](this.state,i,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},F.extend(F.fx,{tick:function(){for(var e,t=F.timers,i=0;i<t.length;i++)(e=t[i])()||t[i]!==e||t.splice(i--,1);t.length||F.fx.stop()},interval:13,stop:function(){clearInterval(vt),vt=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){F.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),F.each(["width","height"],(function(e,t){F.fx.step[t]=function(e){F.style(e.elem,t,Math.max(0,e.now)+e.unit)}})),F.expr&&F.expr.filters&&(F.expr.filters.animated=function(e){return F.grep(F.timers,(function(t){return e===t.elem})).length});var kt=/^t(?:able|d|h)$/i,$t=/^(?:body|html)$/i;"getBoundingClientRect"in D.documentElement?F.fn.offset=function(e){var t,i=this[0];if(e)return this.each((function(t){F.offset.setOffset(this,e,t)}));if(!i||!i.ownerDocument)return null;if(i===i.ownerDocument.body)return F.offset.bodyOffset(i);try{t=i.getBoundingClientRect()}catch(e){}var n=i.ownerDocument,o=n.documentElement;if(!t||!F.contains(o,i))return t?{top:t.top,left:t.left}:{top:0,left:0};var r=n.body,s=P(n),a=o.clientTop||r.clientTop||0,l=o.clientLeft||r.clientLeft||0,c=s.pageYOffset||F.support.boxModel&&o.scrollTop||r.scrollTop,u=s.pageXOffset||F.support.boxModel&&o.scrollLeft||r.scrollLeft;return{top:t.top+c-a,left:t.left+u-l}}:F.fn.offset=function(e){var t=this[0];if(e)return this.each((function(t){F.offset.setOffset(this,e,t)}));if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return F.offset.bodyOffset(t);for(var i,n=t.offsetParent,o=t.ownerDocument,r=o.documentElement,s=o.body,a=o.defaultView,l=a?a.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,u=t.offsetLeft;(t=t.parentNode)&&t!==s&&t!==r&&(!F.support.fixedPosition||"fixed"!==l.position);)i=a?a.getComputedStyle(t,null):t.currentStyle,c-=t.scrollTop,u-=t.scrollLeft,t===n&&(c+=t.offsetTop,u+=t.offsetLeft,!F.support.doesNotAddBorder||F.support.doesAddBorderForTableAndCells&&kt.test(t.nodeName)||(c+=parseFloat(i.borderTopWidth)||0,u+=parseFloat(i.borderLeftWidth)||0),n,n=t.offsetParent),F.support.subtractsBorderForOverflowNotVisible&&"visible"!==i.overflow&&(c+=parseFloat(i.borderTopWidth)||0,u+=parseFloat(i.borderLeftWidth)||0),l=i;return"relative"!==l.position&&"static"!==l.position||(c+=s.offsetTop,u+=s.offsetLeft),F.support.fixedPosition&&"fixed"===l.position&&(c+=Math.max(r.scrollTop,s.scrollTop),u+=Math.max(r.scrollLeft,s.scrollLeft)),{top:c,left:u}},F.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return F.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(F.css(e,"marginTop"))||0,i+=parseFloat(F.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var n=F.css(e,"position");"static"===n&&(e.style.position="relative");var o,r,s=F(e),a=s.offset(),l=F.css(e,"top"),c=F.css(e,"left"),u={},d={};("absolute"===n||"fixed"===n)&&F.inArray("auto",[l,c])>-1?(o=(d=s.position()).top,r=d.left):(o=parseFloat(l)||0,r=parseFloat(c)||0),F.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(u.top=t.top-a.top+o),null!=t.left&&(u.left=t.left-a.left+r),"using"in t?t.using.call(e,u):s.css(u)}},F.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),i=this.offset(),n=$t.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(F.css(e,"marginTop"))||0,i.left-=parseFloat(F.css(e,"marginLeft"))||0,n.top+=parseFloat(F.css(t[0],"borderTopWidth"))||0,n.left+=parseFloat(F.css(t[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||D.body;e&&!$t.test(e.nodeName)&&"static"===F.css(e,"position");)e=e.offsetParent;return e}))}}),F.each(["Left","Top"],(function(e,i){var n="scroll"+i;F.fn[n]=function(i){var o,r;return i===t?(o=this[0])?(r=P(o))?"pageXOffset"in r?r[e?"pageYOffset":"pageXOffset"]:F.support.boxModel&&r.document.documentElement[n]||r.document.body[n]:o[n]:null:this.each((function(){(r=P(this))?r.scrollTo(e?F(r).scrollLeft():i,e?i:F(r).scrollTop()):this[n]=i}))}})),F.each(["Height","Width"],(function(e,i){var n=i.toLowerCase();F.fn["inner"+i]=function(){var e=this[0];return e?e.style?parseFloat(F.css(e,n,"padding")):this[n]():null},F.fn["outer"+i]=function(e){var t=this[0];return t?t.style?parseFloat(F.css(t,n,e?"margin":"border")):this[n]():null},F.fn[n]=function(e){var o=this[0];if(!o)return null==e?null:this;if(F.isFunction(e))return this.each((function(t){var i=F(this);i[n](e.call(this,t,i[n]()))}));if(F.isWindow(o)){var r=o.document.documentElement["client"+i],s=o.document.body;return"CSS1Compat"===o.document.compatMode&&r||s&&s["client"+i]||r}if(9===o.nodeType)return Math.max(o.documentElement["client"+i],o.body["scroll"+i],o.documentElement["scroll"+i],o.body["offset"+i],o.documentElement["offset"+i]);if(e===t){var a=F.css(o,n),l=parseFloat(a);return F.isNumeric(l)?l:a}return this.css(n,"string"==typeof e?e:e+"px")}})),e.jQuery=e.$=F,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],(function(){return F}))}(window),function(e,t){"use strict";var i;e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n=e(document);e.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=i.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+i.csrfParam()+'"]').val(i.csrfToken())},fire:function(t,i,n){var o=e.Event(i);return t.trigger(o,n),!1!==o.result},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&!1!==e.data("remote")},handleRemote:function(n){var o,r,s,a,l,c;if(i.fire(n,"ajax:before")){if(a=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,n.is("form")){o=n.data("ujs:submit-button-formmethod")||n.attr("method"),r=n.data("ujs:submit-button-formaction")||n.attr("action"),s=e(n[0]).serializeArray();var u=n.data("ujs:submit-button");u&&(s.push(u),n.data("ujs:submit-button",null)),n.data("ujs:submit-button-formmethod",null),n.data("ujs:submit-button-formaction",null)}else n.is(i.inputChangeSelector)?(o=n.data("method"),r=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(o=n.data("method")||"get",r=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):(o=n.data("method"),r=i.href(n),s=n.data("params")||null);return c={type:o||"GET",data:s,dataType:l,beforeSend:function(e,o){if(o.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),!i.fire(n,"ajax:beforeSend",[e,o]))return!1;n.trigger("ajax:send",e)},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])},crossDomain:i.isCrossDomain(r)},a&&(c.xhrFields={withCredentials:a}),r&&(c.url=r),i.ajax(c)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var i=document.createElement("a");try{return i.href=e,i.href=i.href,!((!i.protocol||":"===i.protocol)&&!i.host||t.protocol+"//"+t.host==i.protocol+"//"+i.host)}catch(e){return!0}},handleMethod:function(n){var o=i.href(n),r=n.data("method"),s=n.attr("target"),a=i.csrfToken(),l=i.csrfParam(),c=e('<form method="post" action="'+o+'"></form>'),u='<input name="_method" value="'+r+'" type="hidden" />';l===t||a===t||i.isCrossDomain(o)||(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(u).appendTo("body"),c.submit()},formElements:function(t,i){return t.is("form")?e(t[0].elements).filter(i):t.find(i)},disableFormElements:function(t){i.formElements(t,i.disableSelector).each((function(){i.disableFormElement(e(this))}))},disableFormElement:function(e){var i,n;i=e.is("button")?"html":"val",(n=e.data("disable-with"))!==t&&(e.data("ujs:enable-with",e[i]()),e[i](n)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(t){i.formElements(t,i.enableSelector).each((function(){i.enableFormElement(e(this))}))},enableFormElement:function(e){var i=e.is("button")?"html":"val";e.data("ujs:enable-with")!==t&&(e[i](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t,n=e.data("confirm"),o=!1;if(!n)return!0;if(i.fire(e,"confirm")){try{o=i.confirm(n)}catch(e){(console.error||console.log).call(console,e.stack||e)}t=i.fire(e,"confirm:complete",[o])}return o&&t},blankInputs:function(t,i,n){var o,r,s,a=e(),l=i||"input,textarea",c=t.find(l),u={};return c.each((function(){(o=e(this)).is("input[type=radio]")?(s=o.attr("name"),u[s]||(0===t.find('input[type=radio]:checked[name="'+s+'"]').length&&(r=t.find('input[type=radio][name="'+s+'"]'),a=a.add(r)),u[s]=s)):(o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):!!o.val())===n&&(a=a.add(o))})),!!a.length&&a},nonBlankInputs:function(e,t){return i.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var n=e.data("disable-with");n!==t&&(e.data("ujs:enable-with",e.html()),e.html(n)),e.bind("click.railsDisable",(function(e){return i.stopEverything(e)})),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},i.fire(n,"rails:attachBindings")&&(e.ajaxPrefilter((function(e,t,n){e.crossDomain||i.CSRFProtection(n)})),e(window).on("pageshow.rails",(function(){e(e.rails.enableSelector).each((function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableFormElement(t)})),e(e.rails.linkDisableSelector).each((function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableElement(t)}))})),n.on("ajax:complete",i.linkDisableSelector,(function(){i.enableElement(e(this))})),n.on("ajax:complete",i.buttonDisableSelector,(function(){i.enableFormElement(e(this))})),n.on("click.rails",i.linkClickSelector,(function(t){var n=e(this),o=n.data("method"),r=n.data("params"),s=t.metaKey||t.ctrlKey;if(!i.allowAction(n))return i.stopEverything(t);if(!s&&n.is(i.linkDisableSelector)&&i.disableElement(n),i.isRemote(n)){if(s&&(!o||"GET"===o)&&!r)return!0;var a=i.handleRemote(n);return!1===a?i.enableElement(n):a.fail((function(){i.enableElement(n)})),!1}return o?(i.handleMethod(n),!1):void 0})),n.on("click.rails",i.buttonClickSelector,(function(t){var n=e(this);if(!i.allowAction(n)||!i.isRemote(n))return i.stopEverything(t);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var o=i.handleRemote(n);return!1===o?i.enableFormElement(n):o.fail((function(){i.enableFormElement(n)})),!1})),n.on("change.rails",i.inputChangeSelector,(function(t){var n=e(this);return i.allowAction(n)&&i.isRemote(n)?(i.handleRemote(n),!1):i.stopEverything(t)})),n.on("submit.rails",i.formSubmitSelector,(function(n){var o,r,s=e(this),a=i.isRemote(s);if(!i.allowAction(s))return i.stopEverything(n);if(s.attr("novalidate")===t)if(s.data("ujs:formnovalidate-button")===t){if((o=i.blankInputs(s,i.requiredInputSelector,!1))&&i.fire(s,"ajax:aborted:required",[o]))return i.stopEverything(n)}else s.data("ujs:formnovalidate-button",t);if(a){if(r=i.nonBlankInputs(s,i.fileInputSelector)){setTimeout((function(){i.disableFormElements(s)}),13);var l=i.fire(s,"ajax:aborted:file",[r]);return l||setTimeout((function(){i.enableFormElements(s)}),13),l}return i.handleRemote(s),!1}setTimeout((function(){i.disableFormElements(s)}),13)})),n.on("click.rails",i.formInputClickSelector,(function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);var o=n.attr("name"),r=o?{name:o,value:n.val()}:null,s=n.closest("form");0===s.length&&(s=e("#"+n.attr("form"))),s.data("ujs:submit-button",r),s.data("ujs:formnovalidate-button",n.attr("formnovalidate")),s.data("ujs:submit-button-formaction",n.attr("formaction")),s.data("ujs:submit-button-formmethod",n.attr("formmethod"))})),n.on("ajax:send.rails",i.formSubmitSelector,(function(t){this===t.target&&i.disableFormElements(e(this))})),n.on("ajax:complete.rails",i.formSubmitSelector,(function(t){this===t.target&&i.enableFormElements(e(this))})),e((function(){i.refreshCSRFTokens()})))}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}((function(e){function t(t,n){var o,r,s,a=t.nodeName.toLowerCase();return"area"===a?(r=(o=t.parentNode).name,!(!t.href||!r||"map"!==o.nodeName.toLowerCase())&&(!!(s=e("img[usemap='#"+r+"']")[0])&&i(s))):(/^(input|select|textarea|button|object)$/.test(a)?!t.disabled:"a"===a&&t.href||n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter((function(){return"hidden"===e.css(this,"visibility")})).length}var n,o,r,s;e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),n="absolute"===i,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter((function(){var t=e(this);return(!n||"static"!==t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==i&&r.length?r:e(this[0].ownerDocument||document)},uniqueId:(n=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++n)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")}))}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(i){return!!e.data(i,t)}})):function(t,i,n){return!!e.data(t,n[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var n=e.attr(i,"tabindex"),o=isNaN(n);return(o||n>=0)&&t(i,!o)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],(function(t,i){function n(t,i,n,r){return e.each(o,(function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(i-=parseFloat(e.css(t,"margin"+this))||0)})),i}var o="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?s["inner"+i].call(this):this.each((function(){e(this).css(r,n(this,t)+"px")}))},e.fn["outer"+i]=function(t,o){return"number"!=typeof t?s["outer"+i].call(this,t):this.each((function(){e(this).css(r,n(this,t,!0,o)+"px")}))}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=(o=e.fn.removeData,function(t){return arguments.length?o.call(this,e.camelCase(t)):o.call(this)})),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:(s=e.fn.focus,function(t,i){return"number"==typeof t?this.each((function(){var n=this;setTimeout((function(){e(n).focus(),i&&i.call(n)}),t)})):s.apply(this,arguments)}),disableSelection:(r="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(r+".ui-disableSelection",(function(e){e.preventDefault()}))}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,n,o=e(this[0]);o.length&&o[0]!==document;){if(("absolute"===(i=o.css("position"))||"relative"===i||"fixed"===i)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0}}),e.ui.plugin={add:function(t,i,n){var o,r=e.ui[t].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(e,t,i,n){var o,r=e.plugins[t];if(r&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,i)}};var a=0,l=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)try{(n=e._data(o,"events"))&&n.remove&&e(o).triggerHandler("remove")}catch(e){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var o,r,s,a,l={},c=t.split(".")[0];return t=t.split(".")[1],o=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},r=e[c][t],s=e[c][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(a=new i).options=e.widget.extend({},a.options),e.each(n,(function(t,n){var o,r;e.isFunction(n)?l[t]=(o=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)},function(){var e,t=this._super,i=this._superApply;return this._super=o,this._superApply=r,e=n.apply(this,arguments),this._super=t,this._superApply=i,e}):l[t]=n})),s.prototype=e.widget.extend(a,{widgetEventPrefix:r&&a.widgetEventPrefix||t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,(function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)})),delete r._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var i,n,o=l.call(arguments,1),r=0,s=o.length;r<s;r++)for(i in o[r])n=o[r][i],o[r].hasOwnProperty(i)&&void 0!==n&&(e.isPlainObject(n)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],n):e.widget.extend({},n):t[i]=n);return t},e.widget.bridge=function(t,i){var n=i.prototype.widgetFullName||t;e.fn[t]=function(o){var r="string"==typeof o,s=l.call(arguments,1),a=this;return r?this.each((function(){var i,r=e.data(this,n);return"instance"===o?(a=r,!1):r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(i=r[o].apply(r,s))!==r&&void 0!==i?(a=i&&i.jquery?a.pushStack(i.get()):i,!1):void 0:e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")})):(s.length&&(o=e.widget.extend.apply(null,[o].concat(s))),this.each((function(){var t=e.data(this,n);t?(t.option(o||{}),t._init&&t._init()):e.data(this,n,new i(o,this))}))),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=a++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},n=t.split("."),t=n.shift(),n.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(t=n.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,(function(n,s){function a(){if(t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.delegate(u,c,a):i.bind(c,a)}))},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(e.isFunction(s)&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?!0===o||"number"==typeof o?i:o.effect||i:t;"number"==typeof(o=o||{})&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue((function(i){e(this)[t](),r&&r.call(n[0]),i()}))}}));e.widget;var c=!1;e(document).mouseup((function(){c=!1}));e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).bind("click."+this.widgetName,(function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!c){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,n=1===t.which,o=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(n&&!o&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),c=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),c=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function t(e,t,i){return[parseFloat(e[0])*(f.test(e[0])?t/100:1),parseFloat(e[1])*(f.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,r,s=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,f=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,i,n=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=n.children()[0];return e("body").append(n),t=r.offsetWidth,n.css("overflow","scroll"),t===(i=r.offsetWidth)&&(i=n[0].clientWidth),n.remove(),o=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n||o?i.width():i.outerWidth(),height:n||o?i.height():i.outerHeight()}}},e.fn.position=function(o){if(!o||!o.of)return p.apply(this,arguments);o=e.extend({},o);var f,m,g,v,b,w,y=e(o.of),_=e.position.getWithinInfo(o.within),x=e.position.getScrollInfo(_),k=(o.collision||"flip").split(" "),$={};return w=n(y),y[0].preventDefault&&(o.at="left top"),m=w.width,g=w.height,v=w.offset,b=e.extend({},v),e.each(["my","at"],(function(){var e,t,i=(o[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),
i[0]=c.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),$[this]=[e?e[0]:0,t?t[0]:0],o[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]})),1===k.length&&(k[1]=k[0]),"right"===o.at[0]?b.left+=m:"center"===o.at[0]&&(b.left+=m/2),"bottom"===o.at[1]?b.top+=g:"center"===o.at[1]&&(b.top+=g/2),f=t($.at,m,g),b.left+=f[0],b.top+=f[1],this.each((function(){var n,c,u=e(this),d=u.outerWidth(),h=u.outerHeight(),p=i(this,"marginLeft"),w=i(this,"marginTop"),C=d+p+i(this,"marginRight")+x.width,j=h+w+i(this,"marginBottom")+x.height,S=e.extend({},b),T=t($.my,u.outerWidth(),u.outerHeight());"right"===o.my[0]?S.left-=d:"center"===o.my[0]&&(S.left-=d/2),"bottom"===o.my[1]?S.top-=h:"center"===o.my[1]&&(S.top-=h/2),S.left+=T[0],S.top+=T[1],r||(S.left=l(S.left),S.top=l(S.top)),n={marginLeft:p,marginTop:w},e.each(["left","top"],(function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](S,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:h,collisionPosition:n,collisionWidth:C,collisionHeight:j,offset:[f[0]+T[0],f[1]+T[1]],my:o.my,at:o.at,within:_,elem:u})})),o.using&&(c=function(e){var t=v.left-S.left,i=t+m-d,n=v.top-S.top,r=n+g-h,l={target:{element:y,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:S.left,top:S.top,width:d,height:h},horizontal:i<0?"left":t>0?"right":"center",vertical:r<0?"top":n>0?"bottom":"middle"};m<d&&a(t+i)<m&&(l.horizontal="center"),g<h&&a(n+r)<g&&(l.vertical="middle"),s(a(t),a(i))>s(a(n),a(r))?l.important="horizontal":l.important="vertical",o.using.call(this,e,l)}),u.offset(e.extend(S,{using:c}))}))},e.ui.position={fit:{left:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,c=a+t.collisionWidth-r-o;t.collisionWidth>r?l>0&&c<=0?(i=e.left+l+t.collisionWidth-r-o,e.left+=l-i):e.left=c>0&&l<=0?o:l>c?o+r-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=s(e.left-a,e.left)},top:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,r=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,c=a+t.collisionHeight-r-o;t.collisionHeight>r?l>0&&c<=0?(i=e.top+l+t.collisionHeight-r-o,e.top+=l-i):e.top=c>0&&l<=0?o:l>c?o+r-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,o=t.within,r=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-s-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];u<0?((i=e.left+h+f+p+t.collisionWidth-s-r)<0||i<a(u))&&(e.left+=h+f+p):d>0&&((n=e.left-t.collisionPosition.marginLeft+h+f+p-l)>0||a(n)<d)&&(e.left+=h+f+p)},top:function(e,t){var i,n,o=t.within,r=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-s-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];u<0?((n=e.top+h+f+p+t.collisionHeight-s-r)<0||n<a(u))&&(e.top+=h+f+p):d>0&&((i=e.top-t.collisionPosition.marginTop+h+f+p-l)>0||a(i)<d)&&(e.top+=h+f+p)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,o,s,a=document.getElementsByTagName("body")[0],l=document.createElement("div");for(s in t=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)t.style[s]=n[s];t.appendChild(l),(i=a||document.documentElement).insertBefore(t,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",o=e(l).offset().left,r=o>10&&o<11,t.innerHTML="",i.removeChild(t)}()}();e.ui.position;e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map((function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(e){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===e(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==i._trigger("stop",t)&&i._clear()})):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),o=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options,r=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(n=(i=e(o.containment))[0])&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=o.containment:this.containment=[0,0,e(r).width()-this.helperProportions.width-this.margins.left,(e(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var o=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each((function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,o))}))},stop:function(t,i,n){var o=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,(function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,o))}))},drag:function(t,i,n){e.each(n.sortables,(function(){var o=!1,r=this;r.positionAbs=n.positionAbs,r.helperProportions=n.helperProportions,r.offset.click=n.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,e.each(n.sortables,(function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&e.contains(r.element[0],this.element[0])&&(o=!1),o}))),o?(r.isOver||(r.isOver=1,n._parent=i.helper.parent(),r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return i.helper[0]},t.target=r.currentItem[0],r._mouseCapture(t,!0),r._mouseStart(t,!0,!0),r.offset.click.top=n.offset.click.top,r.offset.click.left=n.offset.click.left,r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top,n._trigger("toSortable",t),n.dropped=r.element,e.each(n.sortables,(function(){this.refreshPositions()})),n.currentItem=n.element,r.fromOutside=n),r.currentItem&&(r._mouseDrag(t),i.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",t,r._uiHash(r)),r._mouseStop(t,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,(function(){this.refreshPositions()})))}))}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var o=e("body"),r=n.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(t,i,n){var o=n.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(t,i,n){var o=n.options;o._opacity&&e(i.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var o=n.options,r=!1,s=n.scrollParentNotHidden[0],a=n.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+s.offsetHeight-t.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:t.pageY-n.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+s.offsetWidth-t.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:t.pageX-n.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(a).scrollTop()<o.scrollSensitivity?r=e(a).scrollTop(e(a).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<o.scrollSensitivity&&(r=e(a).scrollTop(e(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(a).scrollLeft()<o.scrollSensitivity?r=e(a).scrollLeft(e(a).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<o.scrollSensitivity&&(r=e(a).scrollLeft(e(a).scrollLeft()+o.scrollSpeed)))),!1!==r&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var o=n.options;n.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each((function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})}))},drag:function(t,i,n){var o,r,s,a,l,c,u,d,h,f,p=n.options,m=p.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,b=i.offset.top,w=b+n.helperProportions.height;for(h=n.snapElements.length-1;h>=0;h--)c=(l=n.snapElements[h].left-n.margins.left)+n.snapElements[h].width,d=(u=n.snapElements[h].top-n.margins.top)+n.snapElements[h].height,v<l-m||g>c+m||w<u-m||b>d+m||!e.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==p.snapMode&&(o=Math.abs(u-w)<=m,r=Math.abs(d-b)<=m,s=Math.abs(l-v)<=m,a=Math.abs(c-g)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),f=o||r||s||a,"outer"!==p.snapMode&&(o=Math.abs(u-b)<=m,r=Math.abs(d-w)<=m,s=Math.abs(l-g)<=m,a=Math.abs(c-v)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(o||r||s||a||f)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=o||r||s||a||f)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var o,r=n.options,s=e.makeArray(e(r.stack)).sort((function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)}));s.length&&(o=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each((function(t){e(this).css("zIndex",o+t)})),this.css("zIndex",o+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(t,i,n){var o=n.options;o._zIndex&&e(i.helper).css("zIndex",o._zIndex)}});e.ui.draggable,e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,(function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")}))},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var n=null,o=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each((function(){if(e.data(this,r.widgetName+"-item")===r)return n=e(this),!1})),e.data(t.target,r.widgetName+"-item")===r&&(n=e(t.target)),!!n&&(!(this.options.handle&&!i&&(e(this.options.handle,n).find("*").addBack().each((function(){this===t.target&&(o=!0)})),!o))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,n){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-this.document.scrollTop()<s.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<s.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),t.pageX-this.document.scrollLeft()<s.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),!1!==a&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(o=(n=this.items[i]).item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(o===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===o||e.contains(this.placeholder[0],o)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],o))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,(function(){n._clear(t)}))}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each((function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))})),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each((function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")})),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=e.left,s=r+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||n+c>a&&n+c<l,h="y"===this.options.axis||t+u>r&&t+u<s,f=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?f:r<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=t&&i,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return!!n&&(this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&t||"up"===n&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){
var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){a.push(this)}var n,o,r,s,a=[],l=[],c=this._connectWith();if(c&&t)for(n=c.length-1;n>=0;n--)for(o=(r=e(c[n],this.document[0])).length-1;o>=0;o--)(s=e.data(r[o],this.widgetFullName))&&s!==this&&!s.options.disabled&&l.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,(function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0}))},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,o,r,s,a,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(n=(o=e(h[i],this.document[0])).length-1;n>=0;n--)(r=e.data(o[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(d.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(i=d.length-1;i>=0;i--)for(s=d[i][1],n=0,c=(a=d[i][0]).length;n<c;n++)(l=e(a[n])).data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var i,n,o,r;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=o.outerWidth(),n.height=o.outerHeight()),r=o.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var i,n=(t=t||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===n?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(o)):"tr"===n?t._createTrPlaceholder(t.currentItem,o):"img"===n&&o.attr("src",t.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(e,o){i&&!n.forcePlaceholderSize||(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var n=this;t.children().each((function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)}))},_contactContainers:function(t){var i,n,o,r,s,a,l,c,u,d,h=null,f=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(h&&e.contains(this.containers[i].element[0],h.element[0]))continue;h=this.containers[i],f=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(o=1e4,r=null,s=(u=h.floating||this._isFloating(this.currentItem))?"left":"top",a=u?"width":"height",d=u?"clientX":"clientY",n=this.items.length-1;n>=0;n--)e.contains(this.containers[f].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[s],c=!1,t[d]-l>this.items[n][a]/2&&(c=!0),Math.abs(t[d]-l)<o&&(o=Math.abs(t[d]-l),r=this.items[n],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[f].element,!0),this._trigger("change",t,this._uiHash()),this.containers[f]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],i=e(o.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n}},_generatePosition:function(t){var i,n,o=this.options,r=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay((function(){o===this.counter&&this.refreshPositions(!n)}))},_clear:function(e,t){function i(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}this.reverting=!1;var n,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&o.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||o.push((function(e){this._trigger("update",e,this._uiHash())})),this!==this.currentContainer&&(t||(o.push((function(e){this._trigger("remove",e,this._uiHash())})),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||o.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(o.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<o.length;n++)o[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay((function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,n,o,r,s=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,n=this.previousFilter||"",o=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),o===n?r=!0:o=n+o,i=this._filterMenuItems(o),(i=r&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(o=String.fromCharCode(t.keyCode),i=this._filterMenuItems(o)),i.length?(this.focus(t,i),this.previousFilter=o,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}s&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i=this,n=this.options.icons.submenu,o=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),o.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),i=t.parent(),o=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(o),t.attr("aria-labelledby",i.attr("id"))})),(t=o.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var t=e(this);i._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")})),t.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,o,r,s,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-i-n,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=t.outerHeight(),o<0?this.activeMenu.scrollTop(r+o):o+a>s&&this.activeMenu.scrollTop(r+o-s+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay((function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[t]()),this.focus(i,n)},nextPage:function(t){var i,n,o;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-n-o<0})),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var i,n,o;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-n+o>0})),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return n.test(e.trim(e(this).text()))}))}});e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,n,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,s="input"===o;this.isMultiLine=!!r||!s&&this.element.prop("isContentEditable"),this.valueMethod=this.element[r||s?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var r=e.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case r.UP:t=!0,this._keyEvent("previous",o);break;case r.DOWN:t=!0,this._keyEvent("next",o);break;case r.ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:i=!0,this._searchTimeout(o)}},keypress:function(n){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||n.preventDefault());if(!i){var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n)}}},input:function(e){if(n)return n=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay((function(){var t=this;this.document.one("mousedown",(function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()}))}))},menufocus:function(t,i){var n,o;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));o=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:o})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(o.value),(n=i.item.attr("aria-label")||o.value)&&e.trim(n).length&&(this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay((function(){this.previous=n,this.selectedItem=i}))),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,o){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||i||n)||(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy((function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")}),this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,(function(e,i){n._renderItemData(t,i)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,(function(e){return n.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}});e.ui.autocomplete;var u,d="ui-effects-",h=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=c(),n=i._rgba=[];return t=t.toLowerCase(),p(l,(function(e,o){var r,s=o.re.exec(t),a=s&&o.parse(s),l=o.space||"rgba";if(a)return r=i[l](a),i[u[l].cache]=r[u[l].cache],n=i._rgba=r._rgba,!1})),n.length?("0,0,0,0"===n.join()&&e.extend(n,r.transparent),i):r[t]}function o(e,t,i){return 6*(i=(i+1)%1)<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}var r,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){
return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,o){return new e.Color.fn.parse(t,i,n,o)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=c.support={},f=e("<p>")[0],p=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=f.style.backgroundColor.indexOf("rgba")>-1,p(u,(function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}})),c.fn=e.extend(c.prototype,{parse:function(o,s,a,l){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=e(o).css(s),s=t);var d=this,h=e.type(o),f=this._rgba=[];return s!==t&&(o=[o,s,a,l],h="array"),"string"===h?this.parse(n(o)||r._default):"array"===h?(p(u.rgba.props,(function(e,t){f[t.idx]=i(o[t.idx],t)})),this):"object"===h?(p(u,o instanceof c?function(e,t){o[t.cache]&&(d[t.cache]=o[t.cache].slice())}:function(t,n){var r=n.cache;p(n.props,(function(e,t){if(!d[r]&&n.to){if("alpha"===e||null==o[e])return;d[r]=n.to(d._rgba)}d[r][t.idx]=i(o[e],t,!0)})),d[r]&&e.inArray(null,d[r].slice(0,3))<0&&(d[r][3]=1,n.from&&(d._rgba=n.from(d[r])))}),this):void 0},is:function(e){var t=c(e),i=!0,n=this;return p(u,(function(e,o){var r,s=t[o.cache];return s&&(r=n[o.cache]||o.to&&o.to(n._rgba)||[],p(o.props,(function(e,t){if(null!=s[t.idx])return i=s[t.idx]===r[t.idx]}))),i})),i},_space:function(){var e=[],t=this;return p(u,(function(i,n){t[n.cache]&&e.push(i)})),e.pop()},transition:function(e,t){var n=c(e),o=n._space(),r=u[o],s=0===this.alpha()?c("transparent"):this,a=s[r.cache]||r.to(s._rgba),l=a.slice();return n=n[r.cache],p(r.props,(function(e,o){var r=o.idx,s=a[r],c=n[r],u=d[o.type]||{};null!==c&&(null===s?l[r]=c:(u.mod&&(c-s>u.mod/2?s+=u.mod:s-c>u.mod/2&&(s-=u.mod)),l[r]=i((c-s)*t+s,o)))})),this[o](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=c(t)._rgba;return c(e.map(i,(function(e,t){return(1-n)*o[t]+n*e})))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,(function(e,t){return null==e?t>2?1:0:e}));return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),(function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e}));return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,(function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,o=e[1]/255,r=e[2]/255,s=e[3],a=Math.max(n,o,r),l=Math.min(n,o,r),c=a-l,u=a+l,d=.5*u;return t=l===a?0:n===a?60*(o-r)/c+360:o===a?60*(r-n)/c+120:60*(n-o)/c+240,i=0===c?0:d<=.5?c/u:c/(2-u),[Math.round(t)%360,i,d,null==s?1:s]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],r=e[3],s=n<=.5?n*(1+i):n+i-n*i,a=2*n-s;return[Math.round(255*o(a,s,t+1/3)),Math.round(255*o(a,s,t)),Math.round(255*o(a,s,t-1/3)),r]},p(u,(function(n,o){var r=o.props,s=o.cache,l=o.to,u=o.from;c.fn[n]=function(n){if(l&&!this[s]&&(this[s]=l(this._rgba)),n===t)return this[s].slice();var o,a=e.type(n),d="array"===a||"object"===a?n:arguments,h=this[s].slice();return p(r,(function(e,t){var n=d["object"===a?e:t.idx];null==n&&(n=h[t.idx]),h[t.idx]=i(n,t)})),u?((o=c(u(h)))[s]=h,o):c(h)},p(r,(function(t,i){c.fn[t]||(c.fn[t]=function(o){var r,s=e.type(o),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),u=c[i.idx];return"undefined"===s?u:("function"===s&&(o=o.call(this,u),s=e.type(o)),null==o&&i.empty?this:("string"===s&&(r=a.exec(o))&&(o=u+parseFloat(r[2])*("+"===r[1]?1:-1)),c[i.idx]=o,this[l](c)))})}))})),c.hook=function(t){var i=t.split(" ");p(i,(function(t,i){e.cssHooks[i]={set:function(t,o){var r,s,a="";if("transparent"!==o&&("string"!==e.type(o)||(r=n(o)))){if(o=c(r||o),!h.rgba&&1!==o._rgba[3]){for(s="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&s&&s.style;)try{a=e.css(s,"backgroundColor"),s=s.parentNode}catch(e){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{t.style[i]=o}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}}))},c.hook(s),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],(function(i,n){t["border"+n+"Color"]=e})),t}},r=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(h),function(){function t(t){var i,n,o=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(n=o.length;n--;)"string"==typeof o[i=o[n]]&&(r[e.camelCase(i)]=o[i]);else for(i in o)"string"==typeof o[i]&&(r[i]=o[i]);return r}function i(t,i){var n,r,s={};for(n in i)r=i[n],t[n]!==r&&(o[n]||!e.fx.step[n]&&isNaN(parseFloat(r))||(s[n]=r));return s}var n=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(h.style(e.elem,i,e.end),e.setAttr=!0)}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(o,r,s,a){var l=e.speed(r,s,a);return this.queue((function(){var r,s=e(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map((function(){return{el:e(this),start:t(this)}})),(r=function(){e.each(n,(function(e,t){o[t]&&s[t+"Class"](o[t])}))})(),c=c.map((function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this})),s.attr("class",a),c=c.map((function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()})),e.when.apply(e,c.get()).done((function(){r(),e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))})),l.complete.call(s[0])}))}))},e.fn.extend({addClass:function(t){return function(i,n,o,r){return n?e.effects.animateClass.call(this,{add:i},n,o,r):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,o,r){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,o,r):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,o,r,s){return"boolean"==typeof n||void 0===n?o?e.effects.animateClass.call(this,n?{add:i}:{remove:i},o,r,s):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},n,o,r)}}(e.fn.toggleClass),switchClass:function(t,i,n,o,r){return e.effects.animateClass.call(this,{add:i,remove:t},n,o,r)}})}(),function(){function t(t,i,n,o){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(o=n,n=i,i={}),e.isFunction(n)&&(o=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=o||i.complete,t}function i(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||(!!e.isFunction(t)||"object"==typeof t&&!t.effect))}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(d+t[i],e[0].style[t[i]])},restore:function(e,t){var i,n;for(n=0;n<t.length;n++)null!==t[n]&&(void 0===(i=e.data(d+t[n]))&&(i=""),e.css(t[n],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(n),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],(function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")})),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,o){return o=o||{},e.each(i,(function(e,i){var r=t.cssUnit(i);r[0]>0&&(o[i]=r[0]*n+r[1])})),o}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(r)&&r.call(o[0]),e.isFunction(t)&&t()}var o=e(this),r=n.complete,a=n.mode;(o.is(":hidden")?"hide"===a:"show"===a)?(o[a](),i()):s.call(o[0],n,i)}var n=t.apply(this,arguments),o=n.mode,r=n.queue,s=e.effects.effect[n.effect];return e.fx.off||!s?o?this[o](n.duration,n.complete):this.each((function(){n.complete&&n.complete.call(this)})):!1===r?this.each(i):this.queue(r||"fx",i)},show:function(e){return function(n){if(i(n))return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(e.fn.show),hide:function(e){return function(n){if(i(n))return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(e.fn.hide),toggle:function(e){return function(n){if(i(n)||"boolean"==typeof n)return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],(function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])})),n}})}(),u={},e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,t){u[t]=function(t){return Math.pow(t,e+2)}})),e.extend(u,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(u,(function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?i(2*e)/2:1-i(-2*e+2)/2}}));e.effects,e.effects.effect.blind=function(t,i){var n,o,r,s=e(this),a=/up|down|vertical/,l=/up|left|vertical|horizontal/,c=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),d=t.direction||"up",h=a.test(d),f=h?"height":"width",p=h?"top":"left",m=l.test(d),g={},v="show"===u;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),c):e.effects.save(s,c),s.show(),o=(n=e.effects.createWrapper(s).css({overflow:"hidden"}))[f](),r=parseFloat(n.css(p))||0,g[f]=v?o:0,m||(s.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),g[p]=v?r:o+r),v&&(n.css(f,0),m||n.css(p,r+o)),n.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&s.hide(),e.effects.restore(s,c),e.effects.removeWrapper(s),i()}})},e.effects.effect.bounce=function(t,i){var n,o,r,s=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(s,t.mode||"effect"),c="hide"===l,u="show"===l,d=t.direction||"up",h=t.distance,f=t.times||5,p=2*f+(u||c?1:0),m=t.duration/p,g=t.easing,v="up"===d||"down"===d?"top":"left",b="up"===d||"left"===d,w=s.queue(),y=w.length;for((u||c)&&a.push("opacity"),e.effects.save(s,a),s.show(),e.effects.createWrapper(s),h||(h=s["top"===v?"outerHeight":"outerWidth"]()/3),u&&((r={opacity:1})[v]=0,s.css("opacity",0).css(v,b?2*-h:2*h).animate(r,m,g)),c&&(h/=Math.pow(2,f-1)),(r={})[v]=0,n=0;n<f;n++)(o={})[v]=(b?"-=":"+=")+h,s.animate(o,m,g).animate(r,m,g),h=c?2*h:h/2;c&&((o={opacity:0})[v]=(b?"-=":"+=")+h,s.animate(o,m,g)),s.queue((function(){c&&s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),i()})),y>1&&w.splice.apply(w,[1,0].concat(w.splice(y,p+1))),s.dequeue()},e.effects.effect.clip=function(t,i){var n,o,r,s=e(this),a=["position","top","bottom","left","right","height","width"],l="show"===e.effects.setMode(s,t.mode||"hide"),c="vertical"===(t.direction||"vertical"),u=c?"height":"width",d=c?"top":"left",h={};e.effects.save(s,a),s.show(),n=e.effects.createWrapper(s).css({overflow:"hidden"}),r=(o="IMG"===s[0].tagName?n:s)[u](),l&&(o.css(u,0),o.css(d,r/2)),h[u]=l?r:0,h[d]=l?0:r/2,o.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),i()}})},e.effects.effect.drop=function(t,i){var n,o=e(this),r=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(o,t.mode||"hide"),a="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",d={opacity:a?1:0};e.effects.save(o,r),o.show(),e.effects.createWrapper(o),n=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&o.css("opacity",0).css(c,"pos"===u?-n:n),d[c]=(a?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.explode=function(t,i){function n(){b.push(this),b.length===d*h&&o()}function o(){f.css({visibility:"visible"}),e(b).remove(),p||f.hide(),i()}var r,s,a,l,c,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=d,f=e(this),p="show"===e.effects.setMode(f,t.mode||"hide"),m=f.show().css("visibility","hidden").offset(),g=Math.ceil(f.outerWidth()/h),v=Math.ceil(f.outerHeight()/d),b=[];for(r=0;r<d;r++)for(l=m.top+r*v,u=r-(d-1)/2,s=0;s<h;s++)a=m.left+s*g,c=s-(h-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*g,top:-r*v}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:v,left:a+(p?c*g:0),top:l+(p?u*v:0),opacity:p?0:1}).animate({left:a+(p?0:c*g),top:l+(p?0:u*v),opacity:p?1:0},t.duration||500,t.easing,n)},e.effects.effect.fade=function(t,i){var n=e(this),o=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:o},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var n,o,r=e(this),s=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(r,t.mode||"hide"),l="show"===a,c="hide"===a,u=t.size||15,d=/([0-9]+)%/.exec(u),h=!!t.horizFirst,f=l!==h,p=f?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(r,s),r.show(),n=e.effects.createWrapper(r).css({overflow:"hidden"}),o=f?[n.width(),n.height()]:[n.height(),n.width()],d&&(u=parseInt(d[1],10)/100*o[c?0:1]),l&&n.css(h?{height:0,width:u}:{height:u,width:0}),g[p[0]]=l?o[0]:u,v[p[1]]=l?o[1]:0,n.animate(g,m,t.easing).animate(v,m,t.easing,(function(){c&&r.hide(),e.effects.restore(r,s),e.effects.removeWrapper(r),i()}))},e.effects.effect.highlight=function(t,i){var n=e(this),o=["backgroundImage","backgroundColor","opacity"],r=e.effects.setMode(n,t.mode||"show"),s={backgroundColor:n.css("backgroundColor")};"hide"===r&&(s.opacity=0),e.effects.save(n,o),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&n.hide(),e.effects.restore(n,o),i()}})},e.effects.effect.pulsate=function(t,i){var n,o=e(this),r=e.effects.setMode(o,t.mode||"show"),s="show"===r,a="hide"===r,l=s||"hide"===r,c=2*(t.times||5)+(l?1:0),u=t.duration/c,d=0,h=o.queue(),f=h.length;for(!s&&o.is(":visible")||(o.css("opacity",0).show(),d=1),n=1;n<c;n++)o.animate({opacity:d},u,t.easing),d=1-d;o.animate({opacity:d},u,t.easing),o.queue((function(){a&&o.hide(),i()})),f>1&&h.splice.apply(h,[1,0].concat(h.splice(f,c+1))),o.dequeue()},e.effects.effect.size=function(t,i){var n,o,r,s=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=e.effects.setMode(s,t.mode||"effect"),p=t.restore||"effect"!==f,m=t.scale||"both",g=t.origin||["middle","center"],v=s.css("position"),b=p?a:l,w={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&s.show(),n={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},"toggle"===t.mode&&"show"===f?(s.from=t.to||w,s.to=t.from||n):(s.from=t.from||("show"===f?w:n),s.to=t.to||("hide"===f?w:n)),r={from:{y:s.from.height/n.height,x:s.from.width/n.width},to:{y:s.to.height/n.height,x:s.to.width/n.width}},"box"!==m&&"both"!==m||(r.from.y!==r.to.y&&(b=b.concat(d),s.from=e.effects.setTransition(s,d,r.from.y,s.from),s.to=e.effects.setTransition(s,d,r.to.y,s.to)),r.from.x!==r.to.x&&(b=b.concat(h),s.from=e.effects.setTransition(s,h,r.from.x,s.from),s.to=e.effects.setTransition(s,h,r.to.x,s.to))),"content"!==m&&"both"!==m||r.from.y!==r.to.y&&(b=b.concat(u).concat(c),s.from=e.effects.setTransition(s,u,r.from.y,s.from),s.to=e.effects.setTransition(s,u,r.to.y,s.to)),e.effects.save(s,b),s.show(),e.effects.createWrapper(s),s.css("overflow","hidden").css(s.from),g&&(o=e.effects.getBaseline(g,n),s.from.top=(n.outerHeight-s.outerHeight())*o.y,s.from.left=(n.outerWidth-s.outerWidth())*o.x,s.to.top=(n.outerHeight-s.to.outerHeight)*o.y,s.to.left=(n.outerWidth-s.to.outerWidth)*o.x),s.css(s.from),"content"!==m&&"both"!==m||(d=d.concat(["marginTop","marginBottom"]).concat(u),h=h.concat(["marginLeft","marginRight"]),c=a.concat(d).concat(h),s.find("*[width]").each((function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};p&&e.effects.save(i,c),i.from={height:n.height*r.from.y,width:n.width*r.from.x,outerHeight:n.outerHeight*r.from.y,outerWidth:n.outerWidth*r.from.x},i.to={height:n.height*r.to.y,width:n.width*r.to.x,outerHeight:n.height*r.to.y,outerWidth:n.width*r.to.x},r.from.y!==r.to.y&&(i.from=e.effects.setTransition(i,d,r.from.y,i.from),i.to=e.effects.setTransition(i,d,r.to.y,i.to)),r.from.x!==r.to.x&&(i.from=e.effects.setTransition(i,h,r.from.x,i.from),i.to=e.effects.setTransition(i,h,r.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,(function(){p&&e.effects.restore(i,c)}))}))),s.animate(s.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===s.to.opacity&&s.css("opacity",s.from.opacity),"hide"===f&&s.hide(),e.effects.restore(s,b),p||("static"===v?s.css({position:"relative",top:s.to.top,left:s.to.left}):e.each(["top","left"],(function(e,t){s.css(t,(function(t,i){var n=parseInt(i,10),o=e?s.to.left:s.to.top;return"auto"===i?o+"px":n+o+"px"}))}))),e.effects.removeWrapper(s),i()}})},e.effects.effect.scale=function(t,i){var n=e(this),o=e.extend(!0,{},t),r=e.effects.setMode(n,t.mode||"effect"),s=parseInt(t.percent,10)||(0===parseInt(t.percent,10)||"hide"===r?0:100),a=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},u={y:"horizontal"!==a?s/100:1,x:"vertical"!==a?s/100:1};o.effect="size",o.queue=!1,o.complete=i,"effect"!==r&&(o.origin=l||["middle","center"],o.restore=!0),o.from=t.from||("show"===r?{height:0,width:0,outerHeight:0,outerWidth:0}:c),o.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},o.fade&&("show"===r&&(o.from.opacity=0,o.to.opacity=1),"hide"===r&&(o.from.opacity=1,o.to.opacity=0)),n.effect(o)},e.effects.effect.shake=function(t,i){var n,o=e(this),r=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(o,t.mode||"effect"),a=t.direction||"left",l=t.distance||20,c=t.times||3,u=2*c+1,d=Math.round(t.duration/u),h="up"===a||"down"===a?"top":"left",f="up"===a||"left"===a,p={},m={},g={},v=o.queue(),b=v.length;for(e.effects.save(o,r),o.show(),e.effects.createWrapper(o),p[h]=(f?"-=":"+=")+l,m[h]=(f?"+=":"-=")+2*l,g[h]=(f?"-=":"+=")+2*l,o.animate(p,d,t.easing),n=1;n<c;n++)o.animate(m,d,t.easing).animate(g,d,t.easing);o.animate(m,d,t.easing).animate(p,d/2,t.easing).queue((function(){"hide"===s&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()})),b>1&&v.splice.apply(v,[1,0].concat(v.splice(b,u+1))),o.dequeue()},e.effects.effect.slide=function(t,i){var n,o=e(this),r=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(o,t.mode||"show"),a="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d={};e.effects.save(o,r),o.show(),n=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(o).css({overflow:"hidden"}),a&&o.css(c,u?isNaN(n)?"-"+n:-n:n),d[c]=(a?u?"+=":"-=":u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.transfer=function(t,i){var n=e(this),o=e(t.to),r="fixed"===o.css("position"),s=e("body"),a=r?s.scrollTop():0,l=r?s.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},d=n.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-a,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(u,t.duration,t.easing,(function(){h.remove(),i()}))}})),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}((function(e){"use strict";var t=0;e.ajaxTransport("iframe",(function(i){var n,o,r;if(i.async)return{send:function(s,a){(n=e('<form style="display:none;"></form>')).attr("accept-charset",i.formAcceptCharset),r=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+r+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+r+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+r+"_method=PATCH",i.type="POST"),o=e('<iframe src="javascript:false;" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",(function(){var t,r=e.isArray(i.paramName)?i.paramName:[i.paramName];o.unbind("load").bind("load",(function(){var t;try{if(!(t=o.contents()).length||!t[0].firstChild)throw new Error}catch(e){t=void 0}a(200,"success",{iframe:t}),e('<iframe src="javascript:false;"></iframe>').appendTo(n),window.setTimeout((function(){n.remove()}),0)})),n.prop("target",o.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,(function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)})),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after((function(e){return t[e]})),i.paramName&&i.fileInput.each((function(t){e(this).prop("name",r[t]||i.paramName)})),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),n.submit(),t&&t.length&&i.fileInput.each((function(i,n){var o=e(t[i]);e(n).prop("name",o.prop("name")),o.replaceWith(n)}))})),n.append(o).appendTo(document.body)},abort:function(){o&&o.unbind("load").prop("src","javascript".concat(":false;")),n&&n.remove()}}})),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})})),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}((function(e,t){var i=0,n=Array.prototype.slice,o=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(e){}o(t)},e.widget=function(t,i,n){var o,r,s,a,l={},c=t.split(".")[0];t=t.split(".")[1],o=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},r=e[c][t],s=e[c][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(a=new i).options=e.widget.extend({},a.options),e.each(n,(function(t,n){var o,r;e.isFunction(n)?l[t]=(o=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)},function(){var e,t=this._super,i=this._superApply;return this._super=o,this._superApply=r,e=n.apply(this,arguments),this._super=t,this._superApply=i,e}):l[t]=n})),s.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,(function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)})),delete r._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(i){for(var o,r,s=n.call(arguments,1),a=0,l=s.length;a<l;a++)for(o in s[a])r=s[a][o],s[a].hasOwnProperty(o)&&r!==t&&(e.isPlainObject(r)?i[o]=e.isPlainObject(i[o])?e.widget.extend({},i[o],r):e.widget.extend({},r):i[o]=r);return i},e.widget.bridge=function(i,o){var r=o.prototype.widgetFullName||i;e.fn[i]=function(s){var a="string"==typeof s,l=n.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,a?this.each((function(){var n,o=e.data(this,r);return o?e.isFunction(o[s])&&"_"!==s.charAt(0)?(n=o[s].apply(o,l))!==o&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+s+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+s+"'")})):this.each((function(){var t=e.data(this,r);t?t.option(s||{})._init():e.data(this,r,new o(s,this))})),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var o,r,s,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},o=i.split("."),i=o.shift(),o.length){for(r=a[i]=e.widget.extend({},this.options[i]),s=0;s<o.length-1;s++)r[o[s]]=r[o[s]]||{},r=r[o[s]];if(i=o.pop(),n===t)return r[i]===t?null:r[i];r[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,(function(n,s){function a(){if(t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.delegate(u,c,a):i.bind(c,a)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(e.isFunction(s)&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?!0===o||"number"==typeof o?i:o.effect||i:t;"number"==typeof(o=o||{})&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue((function(i){e(this)[t](),r&&r.call(n[0]),i()}))}}))})),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}((function(e){"use strict";e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,(function(e,i){t=t.replace("{"+e+"}",i)})),t},formData:function(e){return e.serializeArray()},add:function(t,i){(i.autoUpload||!1!==i.autoUpload&&e(this).fileupload("option","autoUpload"))&&i.process().done((function(){i.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),
this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,(function(e,t){i.push({name:e,value:t})})),i):[]},_getTotal:function(t){var i=0;return e.each(t,(function(e,t){i+=t.size||1})),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(e,t){if(e.lengthComputable){var i,n=Date.now?Date.now():(new Date).getTime();if(t._time&&t.progressInterval&&n-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=n,i=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=i-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(n,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=i,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(n,i,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",(function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)})),t.xhr=function(){return n})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,n=this,o=t.files[0],r=t.multipart||!e.support.xhrFileUpload,s=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),r?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:s,value:t.blob}):e.each(t.files,(function(e,n){i.push({name:t.paramName[e]||s,value:n})}))):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),(function(e,t){i.append(t.name,t.value)}))),t.blob?(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.name)+'"',i.append(s,t.blob,o.name)):e.each(t.files,(function(e,o){(n._isInstanceOf("File",o)||n._isInstanceOf("Blob",o))&&i.append(t.paramName[e]||s,o,o.name)}))),t.data=i):(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.name)+'"',t.contentType=o.type,t.data=t.blob||o),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each((function(){for(var t=e(this),i=t.prop("name")||"files[]",o=(t.prop("files")||[1]).length;o;)n.push(i),o-=1})),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var o=e.Deferred(),r=o.promise();return i=i||this.options.context||r,!0===t?o.resolveWith(i,n):!1===t&&o.rejectWith(i,n),r.abort=o.promise,this._enhancePromise(r)},_addConvenienceMethods:function(t,i){var n=this,o=function(t){return e.Deferred().resolveWith(n,[t]).promise()};i.process=function(e,t){return(e||t)&&(i._processQueue=this._processQueue=(this._processQueue||o(this)).pipe(e,t)),this._processQueue||o(this)},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=!1!==n._trigger("submit",t,this)&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():n._getXHRPromise()},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){var n,o,r=this,s=t.files[0],a=s.size,l=t.uploadedBytes=t.uploadedBytes||0,c=t.maxChunkSize||a,u=s.slice||s.webkitSlice||s.mozSlice,d=e.Deferred(),h=d.promise();return!(!(this._isXHRUpload(t)&&u&&(l||c<a))||t.data)&&(!!i||(l>=a?(s.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",s.error])):(o=function(){var i=e.extend({},t),h=i._progress.loaded;i.blob=u.call(s,l,l+c,s.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,r._initXHRData(i),r._initProgressListener(i),n=(!1!==r._trigger("chunksend",null,i)&&e.ajax(i)||r._getXHRPromise(!1,i.context)).done((function(n,s,c){l=r._getUploadedBytes(c)||l+i.chunkSize,h+i.chunkSize-i._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=s,i.jqXHR=c,r._trigger("chunkdone",null,i),r._trigger("chunkalways",null,i),l<a?o():d.resolveWith(i.context,[n,s,c])})).fail((function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,r._trigger("chunkfail",null,i),r._trigger("chunkalways",null,i),d.rejectWith(i.context,[e,t,n])}))},this._enhancePromise(h),h.abort=function(){return n.abort()},o(),h)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,o){var r=o._progress.total,s=o._response;o._progress.loaded<r&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r,total:r}),o),s.result=o.result=t,s.textStatus=o.textStatus=i,s.jqXHR=o.jqXHR=n,this._trigger("done",null,o)},_onFail:function(e,t,i,n){var o=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),o.jqXHR=n.jqXHR=e,o.textStatus=n.textStatus=t,o.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,o,r,s,a=this,l=a._getAJAXSettings(i),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((o||!1===a._trigger("send",t,l))&&a._getXHRPromise(!1,l.context,o)||a._chunkedUpload(l)||e.ajax(l)).done((function(e,t,i){a._onDone(e,t,i,l)})).fail((function(e,t,i){a._onFail(e,t,i,l)})).always((function(e,t,i){if(a._onAlways(e,t,i,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n=a._slots.shift();n;){if("pending"===a._getDeferredState(n)){n.resolve();break}n=a._slots.shift()}0===a._active&&a._trigger("stop")}))};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(r=e.Deferred(),this._slots.push(r),s=r.pipe(c)):s=this._sequence=this._sequence.pipe(c,c),s.abort=function(){return o=[void 0,"abort","abort"],n?n.abort():(r&&r.rejectWith(l.context,o),c())},this._enhancePromise(s)):c()},_onAdd:function(t,i){var n,o,r,s,a=this,l=!0,c=e.extend({},this.options,i),u=c.limitMultiFileUploads,d=this._getParamName(c);if((c.singleFileUploads||u)&&this._isXHRUpload(c))if(!c.singleFileUploads&&u)for(r=[],n=[],s=0;s<i.files.length;s+=u)r.push(i.files.slice(s,s+u)),(o=d.slice(s,s+u)).length||(o=d),n.push(o);else n=d;else r=[i.files],n=[d];return i.originalFiles=i.files,e.each(r||i.files,(function(o,s){var c=e.extend({},i);return c.files=r?s:[s],c.paramName=n[o],a._initResponseObject(c),a._initProgressObject(c),a._addConvenienceMethods(t,c),l=a._trigger("add",t,c)})),l},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map((function(e,n){return n===t[0]?i[0]:n})),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var n=this,o=e.Deferred(),r=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,o.resolve(t._file)):t.file((function(e){e.relativePath=i,o.resolve(e)}),r):t.isDirectory?t.createReader().readEntries((function(e){n._handleFileTreeEntries(e,i+t.name+"/").done((function(e){o.resolve(e)})).fail(r)}),r):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,(function(e){return n._handleFileTreeEntry(e,i)}))).pipe((function(){return Array.prototype.concat.apply([],arguments)}))},_getDroppedFiles:function(t){var i=(t=t||{}).items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,(function(e){var t;return e.webkitGetAsEntry?((t=e.webkitGetAsEntry())&&(t._file=e.getAsFile()),t):e.getAsEntry()}))):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){var i,n,o=(t=e(t)).prop("webkitEntries")||t.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if((i=e.makeArray(t.prop("files"))).length)void 0===i[0].name&&i[0].fileName&&e.each(i,(function(e,t){t.name=t.fileName,t.size=t.fileSize}));else{if(!(n=t.prop("value")))return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe((function(){return Array.prototype.concat.apply([],arguments)})):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always((function(e){n.files=e,i.options.replaceFileInput&&i._replaceFileInput(n.fileInput),!1!==i._trigger("change",t,n)&&i._onAdd(t,n)}))},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};if(i&&i.length&&(e.each(i,(function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)})),!1===this._trigger("paste",t,n)||!1===this._onAdd(t,n)))return!1},_onDrop:function(e){var t=this,i=e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer,n={};i&&i.files&&i.files.length&&(e.preventDefault(),this._getDroppedFiles(i).always((function(i){n.files=i,!1!==t._trigger("drop",e,n)&&t._onAdd(e,n)})))},_onDragOver:function(t){var i=t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;if(i){if(!1===this._trigger("dragover",t))return!1;-1!==e.inArray("Files",i.types)&&(i.dropEffect="copy",t.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),(function(e,n){t._isRegExpOption(e,n)&&(n=t._getRegExp(n)),i[e]=n}))},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always((function(e){t.files=e,i._onAdd(null,t)})):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,o=this,r=e.Deferred(),s=r.promise();return s.abort=function(){return n=!0,i?i.abort():(r.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always((function(e){n||(t.files=e,i=o._onSend(null,t).then((function(e,t,i){r.resolve(e,t,i)}),(function(e,t,i){r.reject(e,t,i)})))})),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})})),function(e){e.fn.ajaxify=function(t){if(e(this).is("form")){var i=e(this);return i.submit((function(){var n=e.extend({type:i.attr("method")||"GET",url:i.attr("action"),data:i.serialize(),success:function(){"undefined"!=typeof console&&console.log("AJAX SUCCESS: ",arguments)},error:function(){"undefined"!=typeof console&&console.log("AJAX ERROR: ",arguments)}},t);return e.ajax(n),"function"==typeof t.start&&t.start.apply(this,arguments),!1})),i}}}(jQuery),function(e){e.fn.lightbox_me=function(t){return this.each((function(){function i(){var t=l[0].style;s.destroyOnClose?l.add(a).remove():l.add(a).hide(),s.parentLightbox&&s.parentLightbox.fadeIn(200),c.remove(),l.undelegate(s.closeSelector,"click"),e(window).unbind("reposition",o),e(window).unbind("reposition",r),e(window).unbind("scroll",r),e(window).unbind("keyup.lightbox_me"),u&&t.removeExpression("top"),s.onClose()}function n(e){(27==e.keyCode||27==e.DOM_VK_ESCAPE&&0==e.which)&&s.closeEsc&&i()}function o(){e(window).height()<e(document).height()?(a.css({height:e(document).height()+"px"}),c.css({height:e(document).height()+"px"})):(a.css({height:"100%"}),u&&(e("html,body").css("height","100%"),c.css("height","100%")))}function r(){var t=l[0].style;if(l.css({left:"50%",marginLeft:l.outerWidth()/2*-1,zIndex:s.zIndex+3}),l.height()+80>=e(window).height()&&("absolute"!=l.css("position")||u)){var i=e(document).scrollTop()+40;l.css({position:"absolute",top:i+"px",marginTop:0}),u&&t.removeExpression("top")}else if(l.height()+80<e(window).height())if(u)if(t.position="absolute",s.centered)t.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),t.marginTop=0;else{var n=s.modalCSS&&s.modalCSS.top?parseInt(s.modalCSS.top):0;t.setExpression("top","((blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+n+') + "px"')}else s.centered?l.css({position:"fixed",top:"50%",marginTop:l.outerHeight()/2*-1}):l.css({position:"fixed"}).css(s.modalCSS)}var s=e.extend({},e.fn.lightbox_me.defaults,t),a=e(),l=e(this),c=e('<iframe id="foo" style="z-index: '+(s.zIndex+1)+';border: none; margin: 0; padding: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; filter: mask();"/>'),u=e.browser&&e.browser.msie&&e.browser.version<7;if(s.showOverlay){var d=e(".js_lb_overlay:visible");a=d.length>0?e('<div class="lb_overlay_clear js_lb_overlay"/>'):e('<div class="'+s.classPrefix+'_overlay js_lb_overlay"/>')}if(u){var h=/^https/i.test(window.location.href||"")?"javascript:false":"about:blank";c.attr("src",h),e("body").append(c)}e("body").append(l.hide()).append(a),s.showOverlay&&(o(),a.css({position:"absolute",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:s.zIndex+2,display:"none"}),a.hasClass("lb_overlay_clear")||a.css(s.overlayCSS)),s.showOverlay?a.fadeIn(s.overlaySpeed,(function(){r(),l[s.appearEffect](s.lightboxSpeed,(function(){o(),r(),s.onLoad()}))})):(r(),l[s.appearEffect](s.lightboxSpeed,(function(){s.onLoad()}))),s.parentLightbox&&s.parentLightbox.fadeOut(200),e(window).resize(o).resize(r).scroll(r),e(window).bind("keyup.lightbox_me",n),s.closeClick&&a.click((function(e){i(),e.preventDefault})),l.delegate(s.closeSelector,"click",(function(e){i(),e.preventDefault()})),l.bind("close",i),l.bind("reposition",r)}))},e.fn.lightbox_me.defaults={appearEffect:"fadeIn",appearEase:"",overlaySpeed:250,lightboxSpeed:300,closeSelector:".close",closeClick:!0,closeEsc:!0,destroyOnClose:!1,showOverlay:!0,parentLightbox:!1,onLoad:function(){},onClose:function(){},classPrefix:"lb",zIndex:999,centered:!1,modalCSS:{top:"40px"},overlayCSS:{background:"black",opacity:.3}}}(jQuery),jQuery.fn.mailcheck=function(e,t){var i=["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk"];if("object"==typeof e&&void 0===t)e.domains=e.domains||i;else{var n=e;(e=t).domains=n||i}var o=Kicksend.mailcheck.suggest(encodeURI(this.val()),e.domains);o?e.suggested&&e.suggested(this,o):e.empty&&e.empty(this)};var Kicksend={mailcheck:{threshold:3,suggest:function(e,t){e=e.toLowerCase();var i=this.splitEmail(e),n=this.findClosestDomain(i.domain,t);return!!n&&{address:i.address,domain:n,full:i.address+"@"+n}},findClosestDomain:function(e,t){for(var i,n=99,o=null,r=0;r<t.length;r++){if(e===t[r])return!1;(i=this.stringDistance(e,t[r]))<n&&(n=i,o=t[r])}return n<=this.threshold&&null!==o&&o},stringDistance:function(e,t){if(null==e||0===e.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return e.length;for(var i=0,n=0,o=0,r=0,s=5;i+n<e.length&&i+o<t.length;){if(e[i+n]==t[i+o])r++;else{n=0,o=0;for(var a=0;a<s;a++){if(i+a<e.length&&e[i+a]==t[i]){n=a;break}if(i+a<t.length&&e[i]==t[i+a]){o=a;break}}}i++}return(e.length+t.length)/2-r},splitEmail:function(e){var t=e.split("@");return!(t.length<2)&&{domain:t.pop(),address:t.join("@")}}}};!function(e){function t(){var t=i(this);return isNaN(t.datetime)||e(this).text(n(t.datetime)),this}function i(t){if(!(t=e(t)).data("timeago")){t.data("timeago",{datetime:r.datetime(t)});var i=e.trim(t.text());i.length>0&&t.attr("title",i)}return t.data("timeago")}function n(e){return r.inWords(o(e))}function o(e){return(new Date).getTime()-e.getTime()}e.timeago=function(t){return t instanceof Date?n(t):n("string"==typeof t?e.timeago.parse(t):e.timeago.datetime(t))};var r=e.timeago;e.extend(e.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(t){function i(i,o){var r=e.isFunction(i)?i(o,t):i,s=n.numbers&&n.numbers[o]||o;return r.replace(/%d/i,s)}var n=this.settings.strings,o=n.prefixAgo,r=n.suffixAgo;this.settings.allowFuture&&(t<0&&(o=n.prefixFromNow,r=n.suffixFromNow),t=Math.abs(t));var s=t/1e3,a=s/60,l=a/60,c=l/24,u=c/365,d=s<45&&i(n.seconds,Math.round(s))||s<90&&i(n.minute,1)||a<45&&i(n.minutes,Math.round(a))||a<90&&i(n.hour,1)||l<24&&i(n.hours,Math.round(l))||l<48&&i(n.day,1)||c<30&&i(n.days,Math.floor(c))||c<60&&i(n.month,1)||c<365&&i(n.months,Math.floor(c/30))||u<2&&i(n.year,1)||i(n.years,Math.floor(u));return e.trim([o,d,r].join(" "))},parse:function(t){var i=e.trim(t);return i=(i=(i=(i=i.replace(/\.\d\d\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replace(/Z/," UTC")).replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(i)},datetime:function(t){var i="time"===e(t).get(0).tagName.toLowerCase()?e(t).attr("datetime"):e(t).attr("title");return r.parse(i)}}),e.fn.timeago=function(){var e=this;e.each(t);var i=r.settings;return i.refreshMillis>0&&setInterval((function(){e.each(t)}),i.refreshMillis),e},document.createElement("abbr"),document.createElement("time")}(jQuery),function(e){var t=e({});e.subscribe=function(){t.on.apply(t,arguments)},e.unsubscribe=function(){t.off.apply(t,arguments)},e.publish=function(){t.trigger.apply(t,arguments)}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}((function(e){function t(e){return o.raw?e:decodeURIComponent(e.replace(n," "))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),e=t(e);try{return o.json?JSON.parse(e):e}catch(e){}}var n=/\+/g,o=e.cookie=function(n,r,s){if(void 0!==r){if("number"==typeof(s=e.extend({},o.defaults,s)).expires){var a=s.expires,l=s.expires=new Date;l.setDate(l.getDate()+a)}return r=o.json?JSON.stringify(r):String(r),document.cookie=[o.raw?n:encodeURIComponent(n),"=",o.raw?r:encodeURIComponent(r),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var c=document.cookie.split("; "),u=n?void 0:{},d=0,h=c.length;d<h;d++){var f=c[d].split("="),p=t(f.shift()),m=f.join("=");if(n&&n===p){u=i(m);break}n||(u[p]=i(m))}return u};o.defaults={},e.removeCookie=function(t,i){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},i,{expires:-1})),!0)}})),function(e){e.xhrPool=[],e.xhrPool.abortAll=function(){e(this).each((function(e,t){t.abort()})),e.xhrPool.length=0},e.ajaxSetup({complete:function(t){var i=e.xhrPool.indexOf(t);i>-1&&e.xhrPool.splice(i,1)}})}(jQuery),jQuery.fn.shrinkUp=function(){var e=Array.prototype.slice.call(arguments),t=e[0]||{},i=t.complete;t.complete=function(){$(this).removeAttr("style").hide(),"function"==typeof i&&i.apply(this,arguments)},e[0]=t,this.each((function(){e.unshift({height:0,opacity:0}),$.fn.animate.apply($(this),e)}))},jQuery.fn.dropDown=function(){var e=Array.prototype.slice.call(arguments);this.each((function(){var t=$(this),i=t.show().height();e.unshift({height:i,opacity:1}),t.css({height:0,opacity:0}),$.fn.animate.apply(t,e)}))},jQuery.fn.absolutize=function(e){return this.each((function(){var t=jQuery(this);if("absolute"==t.css("position"))return e&&t.originalPosition?t.css(t.originalPosition):t;var i=t.offset(),n=t.position().top,o=i.left,r=t[0].clientWidth,s=t[0].clientHeight,a=parseFloat(t.css("left"));isNaN(a)&&(a=0);var l=parseFloat(t.css("top"));return isNaN(l)&&(l=0),t.originalPosition={left:o-a,top:n-l,width:t.css("width"),height:t.css("height")},t.css({position:"absolute",top:n,left:o,width:r,height:s})}))},function(e,t,i){function n(){o=t[a]((function(){r.each((function(){var t=e(this),i=t.width(),n=t.height(),o=e.data(this,c);i===o.w&&n===o.h||t.trigger(l,[o.w=i,o.h=n])})),n()}),s[u])}var o,r=e([]),s=e.resize=e.extend(e.resize,{}),a="setTimeout",l="resize",c=l+"-special-event",u="delay",d="throttleWindow";s[u]=250,s[d]=!0,e.event.special[l]={setup:function(){if(!s[d]&&this[a])return!1;var t=e(this);r=r.add(t),e.data(this,c,{w:t.width(),h:t.height()}),1===r.length&&n()},teardown:function(){if(!s[d]&&this[a])return!1;var t=e(this);r=r.not(t),t.removeData(c),r.length||clearTimeout(o)},add:function(t){function n(t,n,r){var s=e(this),a=e.data(this,c);a.w=n!==i?n:s.width(),a.h=r!==i?r:s.height(),o.apply(this,arguments)}return!(!s[d]&&this[a])&&(e.isFunction(t)?(o=t,n):(o=t.handler,void(t.handler=n)));var o}}}(jQuery,this),function(e){function t(e,t){var i=typeof e[t];return"function"===i||!("object"!=i||!e[t])||"unknown"==i}function i(e,t){return typeof e[t]!=v}function n(e,t){return!("object"!=typeof e[t]||!e[t])}function o(e){window.console&&window.console.log&&window.console.log("RangyInputs not supported in your browser. Reason: "+e)}function r(e,t,i){return t<0&&(t+=e.value.length),typeof i==v&&(i=t),i<0&&(i+=e.value.length),{start:t,end:i}}function s(e,t,i){return{start:t,end:i,length:i-t,text:e.value.slice(t,i)}}function a(){return n(document,"body")?document.body:document.getElementsByTagName("body")[0]}var l,c,u,d,h,f,p,m,g,v="undefined";e(document).ready((function(){function b(e,t){return function(){var i=this.jquery?this[0]:this,n=i.nodeName.toLowerCase();if(1==i.nodeType&&("textarea"==n||"input"==n&&"text"==i.type)){var o=[i].concat(Array.prototype.slice.call(arguments)),r=e.apply(this,o);if(!t)return r}if(t)return this}}var w=document.createElement("textarea");if(a().appendChild(w),i(w,"selectionStart")&&i(w,"selectionEnd"))l=function(e){return s(e,e.selectionStart,e.selectionEnd)},c=function(e,t,i){var n=r(e,t,i);e.selectionStart=n.start,e.selectionEnd=n.end},g=function(e,t){t?e.selectionEnd=e.selectionStart:e.selectionStart=e.selectionEnd};else{if(!(t(w,"createTextRange")&&n(document,"selection")&&t(document.selection,"createRange")))return a().removeChild(w),void o("No means of finding text input caret position");l=function(e){var t,i,n,o,r=0,a=0,l=document.selection.createRange();return l&&l.parentElement()==e&&(n=e.value.length,t=e.value.replace(/\r\n/g,"\n"),(i=e.createTextRange()).moveToBookmark(l.getBookmark()),(o=e.createTextRange()).collapse(!1),i.compareEndPoints("StartToEnd",o)>-1?r=a=n:(r=-i.moveStart("character",-n),r+=t.slice(0,r).split("\n").length-1,i.compareEndPoints("EndToEnd",o)>-1?a=n:(a=-i.moveEnd("character",-n),a+=t.slice(0,a).split("\n").length-1))),s(e,r,a)};var y=function(e,t){return t-(e.value.slice(0,t).split("\r\n").length-1)};c=function(e,t,i){var n=r(e,t,i),o=e.createTextRange(),s=y(e,n.start);o.collapse(!0),n.start==n.end?o.move("character",s):(o.moveEnd("character",y(e,n.end)),o.moveStart("character",s)),o.select()},g=function(e,t){var i=document.selection.createRange();i.collapse(t),i.select()}}a().removeChild(w),d=function(e,t,i,n){var o;t!=i&&(o=e.value,e.value=o.slice(0,t)+o.slice(i)),n&&c(e,t,t)},u=function(e){var t=l(e);d(e,t.start,t.end,!0)},m=function(e){var t,i=l(e);return i.start!=i.end&&(t=e.value,e.value=t.slice(0,i.start)+t.slice(i.end)),c(e,i.start,i.start),i.text};var _=function(e,t,i,n){var o=t+i.length;if(("collapsetoend"==(n="string"==typeof n?n.toLowerCase():"")||"select"==n)&&/[\r\n]/.test(i)){var r=i.replace(/\r\n/g,"\n").replace(/\r/g,"\n");o=t+r.length;var s=t+r.indexOf("\n");"\r\n"==e.value.slice(s,s+2)&&(o+=r.match(/\n/g).length)}switch(n){case"collapsetostart":c(e,t,t);break;case"collapsetoend":c(e,o,o);break;case"select":c(e,t,o)}};h=function(e,t,i,n){var o=e.value;e.value=o.slice(0,i)+t+o.slice(i),"boolean"==typeof n&&(n=n?"collapseToEnd":""),_(e,i,t,n)},f=function(e,t,i){var n=l(e),o=e.value;e.value=o.slice(0,n.start)+t+o.slice(n.end),_(e,n.start,t,i||"collapseToEnd")},p=function(e,t,i,n){typeof i==v&&(i=t);var o=l(e),r=e.value;e.value=r.slice(0,o.start)+t+o.text+i+r.slice(o.end);var s=o.start+t.length;_(e,s,o.text,n||"select")},e.fn.extend({getSelection:b(l,!1),setSelection:b(c,!0),collapseSelection:b(g,!0),deleteSelectedText:b(u,!0),deleteText:b(d,!0),extractSelectedText:b(m,!1),insertText:b(h,!0),replaceSelectedText:b(f,!0),surroundSelectedText:b(p,!0)})}))}(jQuery),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,(function(){"use strict";function e(e,t){var i,n=document.createElement(e||"div");for(i in t)n[i]=t[i];return n}function t(e){for(var t=1,i=arguments.length;t<i;t++)e.appendChild(arguments[t]);return e}function i(e,t,i,n){var o=["opacity",t,~~(100*e),i,n].join("-"),r=.01+i/n*100,s=Math.max(1-(1-e)/t*(100-r),e),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[o]||(h.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+s+"}"+r+"%{opacity:"+e+"}"+(r+.01)+"%{opacity:1}"+(r+t)%100+"%{opacity:"+e+"}100%{opacity:"+s+"}}",h.cssRules.length),d[o]=1),o}function n(e,t){var i,n,o=e.style;if(void 0!==o[t])return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<u.length;n++)if(void 0!==o[i=u[n]+t])return i}function o(e,t){for(var i in t)e.style[n(e,i)||i]=t[i];return e}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)void 0===e[n]&&(e[n]=i[n])}return e}function s(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function a(e){if(void 0===this)return new a(e);this.opts=r(e||{},a.defaults,f)}function l(){function i(t,i){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}h.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(e,n){function r(){return o(i("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function s(e,s,a){t(d,t(o(r(),{rotation:360/n.lines*e+"deg",left:~~s}),t(o(i("roundrect",{arcsize:n.corners}),{width:l,height:n.width,left:n.radius,top:-n.width>>1,filter:a}),i("fill",{color:n.color,opacity:n.opacity}),i("stroke",{opacity:0}))))}var a,l=n.length+n.width,c=2*l,u=2*-(n.width+n.length)+"px",d=o(r(),{position:"absolute",top:u,left:u});if(n.shadow)for(a=1;a<=n.lines;a++)s(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=n.lines;a++)s(a);return t(e,d)},a.prototype.opacity=function(e,t,i,n){var o=e.firstChild;n=n.shadow&&n.lines||0,o&&t+n<o.childNodes.length&&(o=(o=(o=o.childNodes[t+n])&&o.firstChild)&&o.firstChild)&&(o.opacity=i)}}var c,u=["webkit","Moz","ms","O"],d={},h=function(){var i=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};a.defaults={},r(a.prototype,{spin:function(t){this.stop();var i,n,r=this,a=r.opts,l=r.el=o(e(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),u=a.radius+a.length+a.width;if(t&&(t.insertBefore(l,t.firstChild||null),n=s(t),i=s(l),o(l,{left:("auto"==a.left?n.x-i.x+(t.offsetWidth>>1):parseInt(a.left,10)+u)+"px",top:("auto"==a.top?n.y-i.y+(t.offsetHeight>>1):parseInt(a.top,10)+u)+"px"})),l.setAttribute("role","progressbar"),r.lines(l,r.opts),!c){var d,h=0,f=(a.lines-1)*(1-a.direction)/2,p=a.fps,m=p/a.speed,g=(1-a.opacity)/(m*a.trail/100),v=m/a.lines;!function e(){h++;for(var t=0;t<a.lines;t++)d=Math.max(1-(h+(a.lines-t)*v)%m*g,a.opacity),r.opacity(l,t*a.direction+f,d,a);r.timeout=r.el&&setTimeout(e,~~(1e3/p))}()}return r},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(n,r){function s(t,i){return o(e(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*l+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var a,l=0,u=(r.lines-1)*(1-r.direction)/2;l<r.lines;l++)a=o(e(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:c&&i(r.opacity,r.trail,u+l*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&t(a,o(s("#000","0 0 4px #000"),{top:"2px"})),t(n,t(a,s(r.color,"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(e,t,i){t<e.childNodes.length&&(e.childNodes[t].style.opacity=i)}});var p=o(e("group"),{behavior:"url(#default#VML)"});return!n(p,"transform")&&p.adj?l():c=n(p,"animation"),a})),function(e){
if("object"==typeof exports)e(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],e);else{if(!window.Spinner)throw new Error("Spin.js not present");e(window.jQuery,window.Spinner)}}((function(e,t){e.fn.spin=function(i,n){return this.each((function(){var o=e(this),r=o.data();r.spinner&&(r.spinner.stop(),delete r.spinner),!1!==i&&(i=e.extend({color:n||o.css("color")},e.fn.spin.presets[i]||i),r.spinner=new t(i).spin(this))}))},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}})),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var i=e.scrollTo=function(t,i,n){e(window).scrollTo(t,i,n)};i.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},i.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map((function(){var t=this;if(!(!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])))return t;var i=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==i.compatMode?i.body:i.documentElement}))},e.fn.scrollTo=function(n,o,r){return"object"==typeof o&&(r=o,o=0),"function"==typeof r&&(r={onAfter:r}),"max"==n&&(n=9e9),r=e.extend({},i.defaults,r),o=o||r.duration,r.queue=r.queue&&r.axis.length>1,r.queue&&(o/=2),r.offset=t(r.offset),r.over=t(r.over),this._scrollable().each((function(){function s(e){c.animate(d,o,r.easing,e&&function(){e.call(this,n,r)})}if(null!=n){var a,l=this,c=e(l),u=n,d={},h=c.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}if(!(u=e(u,this)).length)return;case"object":(u.is||u.style)&&(a=(u=e(u)).offset())}e.each(r.axis.split(""),(function(e,t){var n="x"==t?"Left":"Top",o=n.toLowerCase(),f="scroll"+n,p=l[f],m=i.max(l,t);if(a)d[f]=a[o]+(h?0:p-c.offset()[o]),r.margin&&(d[f]-=parseInt(u.css("margin"+n))||0,d[f]-=parseInt(u.css("border"+n+"Width"))||0),d[f]+=r.offset[o]||0,r.over[o]&&(d[f]+=u["x"==t?"width":"height"]()*r.over[o]);else{var g=u[o];d[f]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}r.limit&&/^\d+$/.test(d[f])&&(d[f]=d[f]<=0?0:Math.min(d[f],m)),!e&&r.queue&&(p!=d[f]&&s(r.onAfterFirst),delete d[f])})),s(r.onAfter)}})).end()},i.max=function(t,i){var n="x"==i?"Width":"Height",o="scroll"+n;if(!e(t).is("html,body"))return t[o]-e(t)[n.toLowerCase()]();var r="client"+n,s=t.ownerDocument.documentElement,a=t.ownerDocument.body;return Math.max(s[o],a[o])-Math.min(s[r],a[r])}}(jQuery),function(e){"use strict";"object"==typeof exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}((function(e){"use strict";var t={},i=0;e.fn.once=function(n,o){"string"!=typeof n&&(n in t||(t[n]=++i),o||(o=n),n="jquery-once-"+t[n]);var r=n+"-processed",s=this.not("."+r).addClass(r);return e.isFunction(o)?s.each(o):s},e.fn.removeOnce=function(t,i){var n=t+"-processed",o=this.filter("."+n).removeClass(n);return e.isFunction(i)?o.each(i):o}})),function(){var e,t,i=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1},n=[].slice;e=this,t=function(e,t){var o,r,s,a,l,c,u,d,h,f,p,m,g,v,b,w;return o=e(t),d=i.call(t,"ontouchstart")>=0,a={horizontal:{},vertical:{}},l=1,u={},c="waypoints-context-id",p="resize.waypoints",m="scroll.waypoints",g=1,v="waypoints-waypoint-ids",b="waypoint",w="waypoints",r=function(){function i(i){var n=this;this.$element=i,this.element=i[0],this.didResize=!1,this.didScroll=!1,this.id="context"+l++,this.oldScroll={x:i.scrollLeft(),y:i.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[c]=this.id,u[this.id]=this,i.bind(m,(function(){var i;if(!n.didScroll&&!d)return n.didScroll=!0,i=function(){return n.doScroll(),n.didScroll=!1},t.setTimeout(i,e[w].settings.scrollThrottle)})),i.bind(p,(function(){var i;if(!n.didResize)return n.didResize=!0,i=function(){return e[w]("refresh"),n.didResize=!1},t.setTimeout(i,e[w].settings.resizeThrottle)}))}return i.prototype.doScroll=function(){var t,i=this;return t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!d||t.vertical.oldScroll&&t.vertical.newScroll||e[w]("refresh"),e.each(t,(function(t,n){var o,r,s;return s=[],r=n.newScroll>n.oldScroll,o=r?n.forward:n.backward,e.each(i.waypoints[t],(function(e,t){var i,o;return n.oldScroll<(i=t.offset)&&i<=n.newScroll||n.newScroll<(o=t.offset)&&o<=n.oldScroll?s.push(t):void 0})),s.sort((function(e,t){return e.offset-t.offset})),r||s.reverse(),e.each(s,(function(e,t){if(t.options.continuous||e===s.length-1)return t.trigger([o])}))})),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},i.prototype.refresh=function(){var t,i,n,o=this;return n=e.isWindow(this.element),i=this.$element.offset(),this.doScroll(),t={horizontal:{contextOffset:n?0:i.left,contextScroll:n?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:n?0:i.top,contextScroll:n?0:this.oldScroll.y,contextDimension:n?e[w]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},e.each(t,(function(t,i){return e.each(o.waypoints[t],(function(t,n){var o,r,s,a,l;if(o=n.options.offset,s=n.offset,r=e.isWindow(n.element)?0:n.$element.offset()[i.offsetProp],e.isFunction(o)?o=o.apply(n.element):"string"==typeof o&&(o=parseFloat(o),n.options.offset.indexOf("%")>-1&&(o=Math.ceil(i.contextDimension*o/100))),n.offset=r-i.contextOffset+i.contextScroll-o,(!n.options.onlyOnScroll||null==s)&&n.enabled)return null!==s&&s<(a=i.oldScroll)&&a<=n.offset?n.trigger([i.backward]):null!==s&&s>(l=i.oldScroll)&&l>=n.offset||null===s&&i.oldScroll>=n.offset?n.trigger([i.forward]):void 0}))}))},i.prototype.checkEmpty=function(){if(e.isEmptyObject(this.waypoints.horizontal)&&e.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([p,m].join(" ")),delete u[this.id]},i}(),s=function(){function t(t,i,n){var o,r;"bottom-in-view"===(n=e.extend({},e.fn[b].defaults,n)).offset&&(n.offset=function(){var t;return t=e[w]("viewportHeight"),e.isWindow(i.element)||(t=i.$element.height()),t-e(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=n.horizontal?"horizontal":"vertical",this.callback=n.handler,this.context=i,this.enabled=n.enabled,this.id="waypoints"+g++,this.offset=null,this.options=n,i.waypoints[this.axis][this.id]=this,a[this.axis][this.id]=this,(o=null!=(r=this.element[v])?r:[]).push(this.id),this.element[v]=o}return t.prototype.trigger=function(e){if(this.enabled)return null!=this.callback&&this.callback.apply(this.element,e),this.options.triggerOnce?this.destroy():void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},t.prototype.destroy=function(){return delete a[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},t.getWaypointsByElement=function(t){var i,n;return(n=t[v])?(i=e.extend({},a.horizontal,a.vertical),e.map(n,(function(e){return i[e]}))):[]},t}(),f={init:function(t,i){return null==i&&(i={}),null==i.handler&&(i.handler=t),this.each((function(){var t,n,o,a;return t=e(this),o=null!=(a=i.context)?a:e.fn[b].defaults.context,e.isWindow(o)||(o=t.closest(o)),o=e(o),(n=u[o[0][c]])||(n=new r(o)),new s(t,n,i)})),e[w]("refresh"),this},disable:function(){return f._invoke.call(this,"disable")},enable:function(){return f._invoke.call(this,"enable")},destroy:function(){return f._invoke.call(this,"destroy")},prev:function(e,t){return f._traverse.call(this,e,t,(function(e,t,i){if(t>0)return e.push(i[t-1])}))},next:function(e,t){return f._traverse.call(this,e,t,(function(e,t,i){if(t<i.length-1)return e.push(i[t+1])}))},_traverse:function(i,n,o){var r,s;return null==i&&(i="vertical"),null==n&&(n=t),s=h.aggregate(n),r=[],this.each((function(){var t;return t=e.inArray(this,s[i]),o(r,t,s[i])})),this.pushStack(r)},_invoke:function(t){return this.each((function(){var i;return i=s.getWaypointsByElement(this),e.each(i,(function(e,i){return i[t](),!0}))})),this}},e.fn[b]=function(){var t,i;return i=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],f[i]?f[i].apply(this,t):e.isFunction(i)?f.init.apply(this,arguments):e.isPlainObject(i)?f.init.apply(this,[null,i]):i?e.error("The "+i+" method does not exist in jQuery Waypoints."):e.error("jQuery Waypoints needs a callback function or handler option.")},e.fn[b].defaults={context:t,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},h={refresh:function(){return e.each(u,(function(e,t){return t.refresh()}))},viewportHeight:function(){var e;return null!=(e=t.innerHeight)?e:o.height()},aggregate:function(t){var i,n,o;return i=a,t&&(i=null!=(o=u[e(t)[0][c]])?o.waypoints:void 0),i?(n={horizontal:[],vertical:[]},e.each(n,(function(t,o){return e.each(i[t],(function(e,t){return o.push(t)})),o.sort((function(e,t){return e.offset-t.offset})),n[t]=e.map(o,(function(e){return e.element})),n[t]=e.unique(n[t])})),n):[]},above:function(e){return null==e&&(e=t),h._filter(e,"vertical",(function(e,t){return t.offset<=e.oldScroll.y}))},below:function(e){return null==e&&(e=t),h._filter(e,"vertical",(function(e,t){return t.offset>e.oldScroll.y}))},left:function(e){return null==e&&(e=t),h._filter(e,"horizontal",(function(e,t){return t.offset<=e.oldScroll.x}))},right:function(e){return null==e&&(e=t),h._filter(e,"horizontal",(function(e,t){return t.offset>e.oldScroll.x}))},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(e,t){return f[e]=t},_invoke:function(t){var i;return i=e.extend({},a.vertical,a.horizontal),e.each(i,(function(e,i){return i[t](),!0}))},_filter:function(t,i,n){var o,r;return(o=u[e(t)[0][c]])?(r=[],e.each(o.waypoints[i],(function(e,t){if(n(o,t))return r.push(t)})),r.sort((function(e,t){return e.offset-t.offset})),e.map(r,(function(e){return e.element}))):[]}},e[w]=function(){var e,t;return t=arguments[0],e=2<=arguments.length?n.call(arguments,1):[],h[t]?h[t].apply(null,e):h.aggregate.call(null,t)},e[w].settings={resizeThrottle:100,scrollThrottle:30},o.load((function(){return e[w]("refresh")}))},"function"==typeof define&&define.amd?define("waypoints",["jquery"],(function(i){return t(i,e)})):t(e.jQuery,e)}.call(this),function(e){"use strict";function t(e){return(e||"").toLowerCase()}var i="2.1.5";e.fn.cycle=function(i){var n;return 0!==this.length||e.isReady?this.each((function(){var n,o,r,s,a=e(this),l=e.fn.cycle.log;if(!a.data("cycle.opts")){for(var c in(!1===a.data("cycle-log")||i&&!1===i.log||o&&!1===o.log)&&(l=e.noop),l("--c2 init--"),n=a.data())n.hasOwnProperty(c)&&/^cycle[A-Z]+/.test(c)&&(s=n[c],l((r=c.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t))+":",s,"("+typeof s+")"),n[r]=s);(o=e.extend({},e.fn.cycle.defaults,n,i||{})).timeoutId=0,o.paused=o.paused||!1,o.container=a,o._maxZ=o.maxZ,o.API=e.extend({_container:a},e.fn.cycle.API),o.API.log=l,o.API.trigger=function(e,t){return o.container.trigger(e,t),o.API},a.data("cycle.opts",o),a.data("cycle.API",o.API),o.API.trigger("cycle-bootstrap",[o,o.API]),o.API.addInitialSlides(),o.API.preInitSlideshow(),o.slides.length&&o.API.initSlideshow()}})):(n={s:this.selector,c:this.context},e.fn.cycle.log("requeuing slideshow (dom not ready)"),e((function(){e(n.s,n.c).cycle(i)})),this)},e.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var t=this.opts(),i=t.slides;t.slideCount=0,t.slides=e(),i=i.jquery?i:t.container.find(i),t.random&&i.sort((function(){return Math.random()-.5})),t.API.add(i)},preInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-pre-initialize",[t]);var i=e.fn.cycle.transitions[t.fx];i&&e.isFunction(i.preInit)&&i.preInit(t),t._preInitialized=!0},postInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-post-initialize",[t]);var i=e.fn.cycle.transitions[t.fx];i&&e.isFunction(i.postInit)&&i.postInit(t)},initSlideshow:function(){var t,i=this.opts(),n=i.container;i.API.calcFirstSlide(),"static"==i.container.css("position")&&i.container.css("position","relative"),e(i.slides[i.currSlide]).css({opacity:1,display:"block",visibility:"visible"}),i.API.stackSlides(i.slides[i.currSlide],i.slides[i.nextSlide],!i.reverse),i.pauseOnHover&&(!0!==i.pauseOnHover&&(n=e(i.pauseOnHover)),n.hover((function(){i.API.pause(!0)}),(function(){i.API.resume(!0)}))),i.timeout&&(t=i.API.getSlideOpts(i.currSlide),i.API.queueTransition(t,t.timeout+i.delay)),i._initialized=!0,i.API.updateView(!0),i.API.trigger("cycle-initialized",[i]),i.API.postInitSlideshow()},pause:function(t){var i=this.opts(),n=i.API.getSlideOpts(),o=i.hoverPaused||i.paused;t?i.hoverPaused=!0:i.paused=!0,o||(i.container.addClass("cycle-paused"),i.API.trigger("cycle-paused",[i]).log("cycle-paused"),n.timeout&&(clearTimeout(i.timeoutId),i.timeoutId=0,i._remainingTimeout-=e.now()-i._lastQueue,(i._remainingTimeout<0||isNaN(i._remainingTimeout))&&(i._remainingTimeout=void 0)))},resume:function(e){var t=this.opts(),i=!t.hoverPaused&&!t.paused;e?t.hoverPaused=!1:t.paused=!1,i||(t.container.removeClass("cycle-paused"),0===t.slides.filter(":animated").length&&t.API.queueTransition(t.API.getSlideOpts(),t._remainingTimeout),t.API.trigger("cycle-resumed",[t,t._remainingTimeout]).log("cycle-resumed"))},add:function(t,i){var n,o=this.opts(),r=o.slideCount;"string"==e.type(t)&&(t=e.trim(t)),e(t).each((function(){var t,n=e(this);i?o.container.prepend(n):o.container.append(n),o.slideCount++,t=o.API.buildSlideOpts(n),o.slides=i?e(n).add(o.slides):o.slides.add(n),o.API.initSlide(t,n,--o._maxZ),n.data("cycle.opts",t),o.API.trigger("cycle-slide-added",[o,t,n])})),o.API.updateView(!0),o._preInitialized&&2>r&&o.slideCount>=1&&(o._initialized?o.timeout&&(n=o.slides.length,o.nextSlide=o.reverse?n-1:1,o.timeoutId||o.API.queueTransition(o)):o.API.initSlideshow())},calcFirstSlide:function(){var e,t=this.opts();((e=parseInt(t.startingSlide||0,10))>=t.slides.length||0>e)&&(e=0),t.currSlide=e,t.reverse?(t.nextSlide=e-1,t.nextSlide<0&&(t.nextSlide=t.slides.length-1)):(t.nextSlide=e+1,t.nextSlide==t.slides.length&&(t.nextSlide=0))},calcNextSlide:function(){var e,t=this.opts();t.reverse?(e=t.nextSlide-1<0,t.nextSlide=e?t.slideCount-1:t.nextSlide-1,t.currSlide=e?0:t.nextSlide+1):(e=t.nextSlide+1==t.slides.length,t.nextSlide=e?0:t.nextSlide+1,t.currSlide=e?t.slides.length-1:t.nextSlide-1)},calcTx:function(t,i){var n,o=t;return o._tempFx?n=e.fn.cycle.transitions[o._tempFx]:i&&o.manualFx&&(n=e.fn.cycle.transitions[o.manualFx]),n||(n=e.fn.cycle.transitions[o.fx]),o._tempFx=null,this.opts()._tempFx=null,n||(n=e.fn.cycle.transitions.fade,o.API.log('Transition "'+o.fx+'" not found.  Using fade.')),n},prepareTx:function(e,t){var i,n,o,r,s,a=this.opts();return a.slideCount<2?void(a.timeoutId=0):(!e||a.busy&&!a.manualTrump||(a.API.stopTransition(),a.busy=!1,clearTimeout(a.timeoutId),a.timeoutId=0),void(a.busy||(0!==a.timeoutId||e)&&(n=a.slides[a.currSlide],o=a.slides[a.nextSlide],r=a.API.getSlideOpts(a.nextSlide),s=a.API.calcTx(r,e),a._tx=s,e&&void 0!==r.manualSpeed&&(r.speed=r.manualSpeed),a.nextSlide!=a.currSlide&&(e||!a.paused&&!a.hoverPaused&&a.timeout)?(a.API.trigger("cycle-before",[r,n,o,t]),s.before&&s.before(r,n,o,t),i=function(){a.busy=!1,a.container.data("cycle.opts")&&(s.after&&s.after(r,n,o,t),a.API.trigger("cycle-after",[r,n,o,t]),a.API.queueTransition(r),a.API.updateView(!0))},a.busy=!0,s.transition?s.transition(r,n,o,t,i):a.API.doTransition(r,n,o,t,i),a.API.calcNextSlide(),a.API.updateView()):a.API.queueTransition(r))))},doTransition:function(t,i,n,o,r){var s=t,a=e(i),l=e(n),c=function(){l.animate(s.animIn||{opacity:1},s.speed,s.easeIn||s.easing,r)};l.css(s.cssBefore||{}),a.animate(s.animOut||{},s.speed,s.easeOut||s.easing,(function(){a.css(s.cssAfter||{}),s.sync||c()})),s.sync&&c()},queueTransition:function(t,i){var n=this.opts(),o=void 0!==i?i:t.timeout;return 0===n.nextSlide&&0==--n.loop?(n.API.log("terminating; loop=0"),n.timeout=0,o?setTimeout((function(){n.API.trigger("cycle-finished",[n])}),o):n.API.trigger("cycle-finished",[n]),void(n.nextSlide=n.currSlide)):void 0!==n.continueAuto&&(!1===n.continueAuto||e.isFunction(n.continueAuto)&&!1===n.continueAuto())?(n.API.log("terminating automatic transitions"),n.timeout=0,void(n.timeoutId&&clearTimeout(n.timeoutId))):void(o&&(n._lastQueue=e.now(),void 0===i&&(n._remainingTimeout=t.timeout),n.paused||n.hoverPaused||(n.timeoutId=setTimeout((function(){n.API.prepareTx(!1,!n.reverse)}),o))))},stopTransition:function(){var e=this.opts();e.slides.filter(":animated").length&&(e.slides.stop(!1,!0),e.API.trigger("cycle-transition-stopped",[e])),e._tx&&e._tx.stopTransition&&e._tx.stopTransition(e)},advanceSlide:function(e){var t=this.opts();return clearTimeout(t.timeoutId),t.timeoutId=0,t.nextSlide=t.currSlide+e,t.nextSlide<0?t.nextSlide=t.slides.length-1:t.nextSlide>=t.slides.length&&(t.nextSlide=0),t.API.prepareTx(!0,e>=0),!1},buildSlideOpts:function(i){var n,o,r=this.opts(),s=i.data()||{};for(var a in s)s.hasOwnProperty(a)&&/^cycle[A-Z]+/.test(a)&&(n=s[a],o=a.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),r.API.log("["+(r.slideCount-1)+"]",o+":",n,"("+typeof n+")"),s[o]=n);(s=e.extend({},e.fn.cycle.defaults,r,s)).slideNum=r.slideCount;try{delete s.API,delete s.slideCount,delete s.currSlide,delete s.nextSlide,delete s.slides}catch(e){}return s},getSlideOpts:function(t){var i=this.opts();void 0===t&&(t=i.currSlide);var n=i.slides[t],o=e(n).data("cycle.opts");return e.extend({},i,o)},initSlide:function(t,i,n){var o=this.opts();i.css(t.slideCss||{}),n>0&&i.css("zIndex",n),isNaN(t.speed)&&(t.speed=e.fx.speeds[t.speed]||e.fx.speeds._default),t.sync||(t.speed=t.speed/2),i.addClass(o.slideClass)},updateView:function(e,t){var i=this.opts();if(i._initialized){var n=i.API.getSlideOpts(),o=i.slides[i.currSlide];!e&&!0!==t&&(i.API.trigger("cycle-update-view-before",[i,n,o]),i.updateView<0)||(i.slideActiveClass&&i.slides.removeClass(i.slideActiveClass).eq(i.currSlide).addClass(i.slideActiveClass),e&&i.hideNonActive&&i.slides.filter(":not(."+i.slideActiveClass+")").css("visibility","hidden"),0===i.updateView&&setTimeout((function(){i.API.trigger("cycle-update-view",[i,n,o,e])}),n.speed/(i.sync?2:1)),0!==i.updateView&&i.API.trigger("cycle-update-view",[i,n,o,e]),e&&i.API.trigger("cycle-update-view-after",[i,n,o]))}},getComponent:function(t){var i=this.opts(),n=i[t];return"string"==typeof n?/^\s*[\>|\+|~]/.test(n)?i.container.find(n):e(n):n.jquery?n:e(n)},stackSlides:function(t,i,n){var o=this.opts();t||(t=o.slides[o.currSlide],i=o.slides[o.nextSlide],n=!o.reverse),e(t).css("zIndex",o.maxZ);var r,s=o.maxZ-2,a=o.slideCount;if(n){for(r=o.currSlide+1;a>r;r++)e(o.slides[r]).css("zIndex",s--);for(r=0;r<o.currSlide;r++)e(o.slides[r]).css("zIndex",s--)}else{for(r=o.currSlide-1;r>=0;r--)e(o.slides[r]).css("zIndex",s--);for(r=a-1;r>o.currSlide;r--)e(o.slides[r]).css("zIndex",s--)}e(i).css("zIndex",o.maxZ-1)},getSlideIndex:function(e){return this.opts().slides.index(e)}},e.fn.cycle.log=function(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))},e.fn.cycle.version=function(){return"Cycle2: "+i},e.fn.cycle.transitions={custom:{},none:{before:function(e,t,i,n){e.API.stackSlides(i,t,n),e.cssBefore={opacity:1,visibility:"visible",display:"block"}}},fade:{before:function(t,i,n,o){var r=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(i,n,o),t.cssBefore=e.extend(r,{opacity:0,visibility:"visible",display:"block"}),t.animIn={opacity:1},t.animOut={opacity:0}}},fadeout:{before:function(t,i,n,o){var r=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(i,n,o),t.cssBefore=e.extend(r,{opacity:1,visibility:"visible",display:"block"}),t.animOut={opacity:0}}},scrollHorz:{before:function(e,t,i,n){e.API.stackSlides(t,i,n);var o=e.container.css("overflow","hidden").width();e.cssBefore={left:n?o:-o,top:0,opacity:1,visibility:"visible",display:"block"},e.cssAfter={zIndex:e._maxZ-2,left:0},e.animIn={left:0},e.animOut={left:n?-o:o}}}},e.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},e(document).ready((function(){e(e.fn.cycle.defaults.autoSelector).cycle()}))}(jQuery),function(e){"use strict";function t(t,n){var o,r,s,a=n.autoHeight;if("container"==a)r=e(n.slides[n.currSlide]).outerHeight(),n.container.height(r);else if(n._autoHeightRatio)n.container.height(n.container.width()/n._autoHeightRatio);else if("calc"===a||"number"==e.type(a)&&a>=0){if((s="calc"===a?i(t,n):a>=n.slides.length?0:a)==n._sentinelIndex)return;n._sentinelIndex=s,n._sentinel&&n._sentinel.remove(),(o=e(n.slides[s].cloneNode(!0))).removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),o.css({position:"static",visibility:"hidden",display:"block"}).prependTo(n.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),o.find("*").css("visibility","hidden"),n._sentinel=o}}function i(t,i){var n=0,o=-1;return i.slides.each((function(t){var i=e(this).height();i>o&&(o=i,n=t)})),n}function n(t,i,n,o){var r=e(o).outerHeight();i.container.animate({height:r},i.autoHeightSpeed,i.autoHeightEasing)}function o(i,r){r._autoHeightOnResize&&(e(window).off("resize orientationchange",r._autoHeightOnResize),r._autoHeightOnResize=null),r.container.off("cycle-slide-added cycle-slide-removed",t),r.container.off("cycle-destroyed",o),r.container.off("cycle-before",n),r._sentinel&&(r._sentinel.remove(),r._sentinel=null)}e.extend(e.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null}),e(document).on("cycle-initialized",(function(i,r){function s(){t(i,r)}var a,l=r.autoHeight,c=e.type(l),u=null;("string"===c||"number"===c)&&(r.container.on("cycle-slide-added cycle-slide-removed",t),r.container.on("cycle-destroyed",o),"container"==l?r.container.on("cycle-before",n):"string"===c&&/\d+\:\d+/.test(l)&&(a=(a=l.match(/(\d+)\:(\d+)/))[1]/a[2],r._autoHeightRatio=a),"number"!==c&&(r._autoHeightOnResize=function(){clearTimeout(u),u=setTimeout(s,50)},e(window).on("resize orientationchange",r._autoHeightOnResize)),setTimeout(s,30))}))}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"}),e(document).on("cycle-update-view",(function(t,i,n,o){"caption"===i.captionModule&&e.each(["caption","overlay"],(function(){var e=this,t=n[e+"Template"],r=i.API.getComponent(e);r.length&&t?(r.html(i.API.tmpl(t,n,i,o)),r.show()):r.hide()}))})),e(document).on("cycle-destroyed",(function(t,i){e.each(["caption","overlay"],(function(){var e=this,t=i[e+"Template"];i[e]&&t&&i.API.getComponent("caption").empty()}))}))}(jQuery),function(e){"use strict";var t=e.fn.cycle;e.fn.cycle=function(i){var n,o,r,s=e.makeArray(arguments);return"number"==e.type(i)?this.cycle("goto",i):"string"==e.type(i)?this.each((function(){var a;return n=i,void 0===(r=e(this).data("cycle.opts"))?void t.log('slideshow must be initialized before sending commands; "'+n+'" ignored'):(n="goto"==n?"jump":n,o=r.API[n],e.isFunction(o)?((a=e.makeArray(s)).shift(),o.apply(r.API,a)):void t.log("unknown command: ",n))})):t.apply(this,arguments)},e.extend(e.fn.cycle,t),e.extend(t.API,{next:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?-1:1;!1===e.allowWrap&&e.currSlide+t>=e.slideCount||(e.API.advanceSlide(t),e.API.trigger("cycle-next",[e]).log("cycle-next"))}},prev:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?1:-1;!1===e.allowWrap&&e.currSlide+t<0||(e.API.advanceSlide(t),e.API.trigger("cycle-prev",[e]).log("cycle-prev"))}},destroy:function(){this.stop();var t=this.opts(),i=e.isFunction(e._data)?e._data:e.noop;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stop(),t.API.trigger("cycle-destroyed",[t]).log("cycle-destroyed"),t.container.removeData(),i(t.container[0],"parsedAttrs",!1),t.retainStylesOnDestroy||(t.container.removeAttr("style"),t.slides.removeAttr("style"),t.slides.removeClass(t.slideActiveClass)),t.slides.each((function(){e(this).removeData(),i(this,"parsedAttrs",!1)}))},jump:function(e,t){var i,n=this.opts();if(!n.busy||n.manualTrump){var o=parseInt(e,10);if(isNaN(o)||0>o||o>=n.slides.length)return void n.API.log("goto: invalid slide index: "+o);if(o==n.currSlide)return void n.API.log("goto: skipping, already on slide",o);n.nextSlide=o,clearTimeout(n.timeoutId),n.timeoutId=0,n.API.log("goto: ",o," (zero-index)"),i=n.currSlide<n.nextSlide,n._tempFx=t,n.API.prepareTx(!0,i)}},stop:function(){var t=this.opts(),i=t.container;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stopTransition(),t.pauseOnHover&&(!0!==t.pauseOnHover&&(i=e(t.pauseOnHover)),i.off("mouseenter mouseleave")),t.API.trigger("cycle-stopped",[t]).log("cycle-stopped")},reinit:function(){var e=this.opts();e.API.destroy(),e.container.cycle()},remove:function(t){for(var i,n,o=this.opts(),r=[],s=1,a=0;a<o.slides.length;a++)i=o.slides[a],a==t?n=i:(r.push(i),e(i).data("cycle.opts").slideNum=s,s++);n&&(o.slides=e(r),o.slideCount--,e(n).remove(),t==o.currSlide?o.API.advanceSlide(1):t<o.currSlide?o.currSlide--:o.currSlide++,o.API.trigger("cycle-slide-removed",[o,t,n]).log("cycle-slide-removed"),o.API.updateView())}}),e(document).on("click.cycle","[data-cycle-cmd]",(function(t){t.preventDefault();var i=e(this),n=i.data("cycle-cmd"),o=i.data("cycle-context")||".cycle-slideshow";e(o).cycle(n,i.data("cycle-arg"))}))}(jQuery),function(e){"use strict";function t(t,i){var n;return t._hashFence?void(t._hashFence=!1):(n=window.location.hash.substring(1),void t.slides.each((function(o){if(e(this).data("cycle-hash")==n){if(!0===i)t.startingSlide=o;else{var r=t.currSlide<o;t.nextSlide=o,t.API.prepareTx(!0,r)}return!1}})))}e(document).on("cycle-pre-initialize",(function(i,n){t(n,!0),n._onHashChange=function(){t(n,!1)},e(window).on("hashchange",n._onHashChange)})),e(document).on("cycle-update-view",(function(e,t,i){i.hash&&"#"+i.hash!=window.location.hash&&(t._hashFence=!0,window.location.hash=i.hash)})),e(document).on("cycle-destroyed",(function(t,i){i._onHashChange&&e(window).off("hashchange",i._onHashChange)}))}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{loader:!1}),e(document).on("cycle-bootstrap",(function(t,i){function n(t,n){function r(t){var r;"wait"==i.loader?(a.push(t),0===c&&(a.sort(s),o.apply(i.API,[a,n]),i.container.removeClass("cycle-loading"))):(r=e(i.slides[i.currSlide]),o.apply(i.API,[t,n]),r.show(),i.container.removeClass("cycle-loading"))}function s(e,t){return e.data("index")-t.data("index")}var a=[];if("string"==e.type(t))t=e.trim(t);else if("array"===e.type(t))for(var l=0;l<t.length;l++)t[l]=e(t[l])[0];var c=(t=e(t)).length;c&&(t.css("visibility","hidden").appendTo("body").each((function(t){function s(){0==--l&&(--c,r(u))}var l=0,u=e(this),d=u.is("img")?u:u.find("img");return u.data("index",t),(d=d.filter(":not(.cycle-loader-ignore)").filter(':not([src=""])')).length?(l=d.length,void d.each((function(){this.complete?s():e(this).load((function(){s()})).on("error",(function(){0==--l&&(i.API.log("slide skipped; img not loaded:",this.src),0==--c&&"wait"==i.loader&&o.apply(i.API,[a,n]))}))}))):(--c,void a.push(u))})),c&&i.container.addClass("cycle-loading"))}var o;i.loader&&(o=i.API.add,i.API.add=n)}))}(jQuery),function(e){"use strict";function t(t,i,n){var o;t.API.getComponent("pager").each((function(){var r=e(this);if(i.pagerTemplate){var s=t.API.tmpl(i.pagerTemplate,i,t,n[0]);o=e(s).appendTo(r)}else o=r.children().eq(t.slideCount-1);o.on(t.pagerEvent,(function(e){t.pagerEventBubble||e.preventDefault(),t.API.page(r,e.currentTarget)}))}))}function i(e,t){var i=this.opts();if(!i.busy||i.manualTrump){var n=e.children().index(t),o=i.currSlide<n;i.currSlide!=n&&(i.nextSlide=n,i._tempFx=i.pagerFx,i.API.prepareTx(!0,o),i.API.trigger("cycle-pager-activated",[i,e,t]))}}e.extend(e.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerEventBubble:void 0,pagerTemplate:"<span>&bull;</span>"}),e(document).on("cycle-bootstrap",(function(e,i,n){n.buildPagerLink=t})),e(document).on("cycle-slide-added",(function(e,t,n,o){t.pager&&(t.API.buildPagerLink(t,n,o),t.API.page=i)})),e(document).on("cycle-slide-removed",(function(t,i,n){i.pager&&i.API.getComponent("pager").each((function(){var t=e(this);e(t.children()[n]).remove()}))})),e(document).on("cycle-update-view",(function(t,i){i.pager&&i.API.getComponent("pager").each((function(){e(this).children().removeClass(i.pagerActiveClass).eq(i.currSlide).addClass(i.pagerActiveClass)}))})),e(document).on("cycle-destroyed",(function(e,t){var i=t.API.getComponent("pager");i&&(i.children().off(t.pagerEvent),t.pagerTemplate&&i.empty())}))}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),e(document).on("cycle-initialized",(function(e,t){if(t.API.getComponent("next").on(t.nextEvent,(function(e){e.preventDefault(),t.API.next()})),t.API.getComponent("prev").on(t.prevEvent,(function(e){e.preventDefault(),t.API.prev()})),t.swipe){var i=t.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",n=t.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";t.container.on(i,(function(){t._tempFx=t.swipeFx,t.API.next()})),t.container.on(n,(function(){t._tempFx=t.swipeFx,t.API.prev()}))}})),e(document).on("cycle-update-view",(function(e,t){if(!t.allowWrap){var i=t.disabledClass,n=t.API.getComponent("next"),o=t.API.getComponent("prev"),r=t._prevBoundry||0,s=void 0!==t._nextBoundry?t._nextBoundry:t.slideCount-1;t.currSlide==s?n.addClass(i).prop("disabled",!0):n.removeClass(i).prop("disabled",!1),t.currSlide===r?o.addClass(i).prop("disabled",!0):o.removeClass(i).prop("disabled",!1)}})),e(document).on("cycle-destroyed",(function(e,t){t.API.getComponent("prev").off(t.nextEvent),t.API.getComponent("next").off(t.prevEvent),t.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")}))}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{progressive:!1}),e(document).on("cycle-pre-initialize",(function(t,i){if(i.progressive){var n,o,r=i.API,s=r.next,a=r.prev,l=r.prepareTx,c=e.type(i.progressive);if("array"==c)n=i.progressive;else if(e.isFunction(i.progressive))n=i.progressive(i);else if("string"==c){if(o=e(i.progressive),!(n=e.trim(o.html())))return;if(/^(\[)/.test(n))try{n=e.parseJSON(n)}catch(e){return void r.log("error parsing progressive slides",e)}else(n=n.split(new RegExp(o.data("cycle-split")||"\n")))[n.length-1]||n.pop()}l&&(r.prepareTx=function(e,t){var o,r;return e||0===n.length?void l.apply(i.API,[e,t]):void(t&&i.currSlide==i.slideCount-1?(r=n[0],n=n.slice(1),i.container.one("cycle-slide-added",(function(e,t){setTimeout((function(){t.API.advanceSlide(1)}),50)})),i.API.add(r)):t||0!==i.currSlide?l.apply(i.API,[e,t]):(o=n.length-1,r=n[o],n=n.slice(0,o),i.container.one("cycle-slide-added",(function(e,t){setTimeout((function(){t.currSlide=1,t.API.advanceSlide(-1)}),50)})),i.API.add(r,!0)))}),s&&(r.next=function(){var e=this.opts();if(n.length&&e.currSlide==e.slideCount-1){var t=n[0];n=n.slice(1),e.container.one("cycle-slide-added",(function(e,t){s.apply(t.API),t.container.removeClass("cycle-loading")})),e.container.addClass("cycle-loading"),e.API.add(t)}else s.apply(e.API)}),a&&(r.prev=function(){var e=this.opts();if(n.length&&0===e.currSlide){var t=n.length-1,i=n[t];n=n.slice(0,t),e.container.one("cycle-slide-added",(function(e,t){t.currSlide=1,t.API.advanceSlide(-1),t.container.removeClass("cycle-loading")})),e.container.addClass("cycle-loading"),e.API.add(i,!0)}else a.apply(e.API)})}}))}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),e.extend(e.fn.cycle.API,{tmpl:function(t,i){var n=new RegExp(i.tmplRegex||e.fn.cycle.defaults.tmplRegex,"g"),o=e.makeArray(arguments);return o.shift(),t.replace(n,(function(t,i){var n,r,s,a,l=i.split(".");for(n=0;n<o.length;n++)if(s=o[n]){
if(l.length>1)for(a=s,r=0;r<l.length;r++)s=a,a=a[l[r]]||i;else a=s[i];if(e.isFunction(a))return a.apply(s,o);if(null!=a&&a!=i)return a}return i}))}})}(jQuery),$.ajaxSetup({beforeSend:function(e,t){var i=t.url.indexOf("://")<0;if(!i){var n=window.location.href.match(/http(s?):\/\/([^/]+)/i)[2];n&&t.url.match(new RegExp("^http(s?)://"+n,"i"))&&(i=!0)}if(i){var o=$('meta[name="csrf-token"]').attr("content");o&&o.length>0&&(t.headers||(t.headers={}),t.headers["X-CSRF-Token"]=o)}}}),function(window,undefined){function _jq(e){if(!e||!e.call)return!1;_jq.ready?_jq.instance&&e.call(_jq.instance,_jq.instance):_jq.queue.push(e)}function _collect_attribs(e,t,i){for(var n=e.attributes,o=n&&n.length,r={};o--;)if(!t||n[o].name===t||t&&t.test&&t.test(n[o].name)){if(i)return!0;r[n[o].name]=n[o].value}return!i&&r}function _merge(e,t,i){var n;for(n in t)_has.call(t,n)&&t[n]!==undefined&&(e[n]=i?t[n]:e[n]||t[n]);return e}function _collect_context(node,data,jQuery){do{_merge(data,_collect_attribs(node,_dataattrib),!1)}while((node=node.parentNode)&&1===node.nodeType);var i,result={};for(i in data)result[i.substr(5)]=_jsonstruct.test(data[i])?jQuery.parseJSON(data[i]):_evalstruct.test(data[i])?eval(data[i]):data[i];return result}function _getEventOrigin(e,t){var i,n=t;do{if(i=t.getAttribute("id")||t.getAttribute("name"))return i}while((n=n.parentNode)&&1===n.nodeType);return null}function _submit(e,t){t&&t.push&&t.push(e)}function debounce(e,t){var i;return function(){var n=arguments,o=this;i&&clearTimeout(i),i=setTimeout((function(){e.apply(o,n),i=null}),t||500)}}_jq.queue=[];var i=setInterval((function(){var e=window.jQuery;if(e)for(clearInterval(i),_jq.instance=e,_jq.ready=!0;i=_jq.queue.pop();)i.call(e,e)}),50),_has=Object.prototype.hasOwnProperty,_dataattrib=/^data-/,_jsonstruct=/^\{(.*)\}$/,_evalstruct=/^(null|undefined|[0-9]+(\.[0-9]+)?|true|false)$/,_known_datalayers=["dataLayer"];_jq((function(e){function t(t){var i=t.target,n=t.type,o=_getEventOrigin(t,t.target);if(t.target===t.currentTarget){var r=_collect_context(i,{},e);"event"in r||(r.event=n),"origin"in r||(r.origin=o);for(var s=_known_datalayers.length;s--;)_submit(r,window[_known_datalayers[s]])}}function i(t,i){var o=e(window).scrollTop(),r=o+e(window).height(),s=e(t).offset().top,a=s+e(t).height(),l=s>=o&&a<=r&&s<r&&a>o,c=a-s,u=c-n(s-o,0)+n(r-a,0),d=u/c;switch(i){case 1:return u;case 2:return d;case 3:return c-u;default:return l}}e.expr[":"].hasdata=function(e){return _collect_attribs(e,_dataattrib,!0)},e(document).ready((function(){var i=e("body");i.on("click","*",t),i.on("submit","form",t),i.on("blur focus change","input, select, textarea",t),i.on("visible","*",t)}));var n=Math.min;Math.max;e(window).scroll(debounce((function(){e(".track-visible").each((function(){i(this,2)>0&&e(this).trigger("visible")})),e(".track-mostly-visible").each((function(){i(this,2)>.5&&e(this).trigger("visible")})),e(".track-completely-visible").each((function(){i(this,0)&&e(this).trigger("visible")}))})))}))}(window),function(){if(!this.require){var e={},t={},i=function(r,s){var a,l,c=n(s,r),u=n(c,"./index");if(a=t[c]||t[u])return a;if(l=e[c]||e[c=u])return a={id:c,exports:{}},t[c]=a.exports,l(a.exports,(function(e){return i(e,o(c))}),a),t[c]=a.exports;throw"module "+r+" not found"},n=function(e,t){for(var i,n,o=[],r=0,s=(i=/^\.\.?(\/|$)/.test(t)?[e,t].join("/").split("/"):t.split("/")).length;r<s;r++)".."==(n=i[r])?o.pop():"."!=n&&""!=n&&o.push(n);return o.join("/")},o=function(e){return e.split("/").slice(0,-1).join("/")};this.require=function(e){return i(e,"")},this.require.define=function(t){for(var i in t)e[i]=t[i]},this.require.modules=e,this.require.cache=t}return this.require}.call(this),this.require.define({"modules/lib/article":function(e,t,i){var n=function(e,t,i){for(var n={entries:[],collections:[],users:[]},g=(e=o(e)).split(/\n\s*\n+/g),v=0;v<g.length;v++){var b=g[v]||"";b=r(b),b=s(b),b=a(b),b=l(b),b=c(b),b=h(b);var w=/(^|\s)https?:\/\/weheartit\.com\/((entry|articles)\/([0-9]+)\S*|[\w_]+\/collections\/([0-9]+)\S*|([\w_]+)\/?(\s|$))/gim,y="";if(y=(b=f(b,n)).match(w)){for(var _=y.length>1?"thumb":"large",x=0;x<y.length;x++){var k=y[x],$='<a href="javascript:void(0)"><img src="https://weheartit.com/assets/whi-light/articles/loading.png"></a>',C="";if(C=k.replace(w,"$4")){var j=parseInt(C);if(n.entries.push(j),t&&t.entries)(T=t.entries[j])&&($=T[_]);y[x]=$}else if(C=k.replace(w,"$5")){var S=parseInt(C);if(n.collections.push(S),t&&t.collections)(T=t.collections[S])&&($=T[_]);y[x]=$}else if(C=k.replace(w,"$6")){var T,A=C.toLowerCase();if(n.users.push(A),t&&t.users)(T=t.users[A])&&($=T);y[x]=$}}var I=b.replace(w,"").trim();I=I.length>0?"<figcaption>"+I+"</figcaption>":"",b='<figure class="'+(y.length>1?"embed-grid":"embed-large")+'">'+y.join("")+I+"</figure>"}b=u(b),b=d(b,i),b=m(b),b=p(b),g[v]=b}return{body:g.join("\n"),references:n}},o=function(e){return e&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;")),e},r=function(e){return e&&e.match(/^#\s/gm)&&(e="<h2>"+e.replace(/^#\s/gm,"")+"</h2>"),e},s=function(e){return e&&e.match(/^---$/gm)&&(e="<hr>"),e},a=function(e){var t="";if(t=e.match(/^(\*|\.)\s.*/gm)){e="<ul>";for(var i=0;i<t.length;i++)item=t[i].replace(/^(\*|\.)\s/,""),e+="<li>"+item+"</li>";e+="</ul>"}return e},l=function(e){var t="";if(t=e.match(/^\&gt\;.*/gm)){e="<blockquote>";for(var i=0;i<t.length;i++)line=t[i].replace(/^\&gt\;/gm,""),i>0&&(e+="<br>"),e+=line;e+="</blockquote>"}return e},c=function(e){return e&&(e=(e=(e=(e=e.replace(/(^|[\s('"])\`(\S[^\`]*\S)\`($|[\s):.,\u2026;!?'"<])/gm,"$1<code>$2</code>$3")).replace(/(^|[\s('"])\*(\S[^\*]*\S)\*($|[\s):.,\u2026;!?'"<])/gm,"$1<strong>$2</strong>$3")).replace(/(^|[\s('"])\_(\S[^\_]*\S)\_($|[\s):.,\u2026;!?'"<])/gm,"$1<em>$2</em>$3")).replace(/(^|[\s('"])\~(\S[^\~]*\S)\~($|[\s):.,\u2026;!?'"<])/gm,"$1<strike>$2</strike>$3")),e},u=function(e){var t=/^(?:https?:\/\/)?(?:www\.)?youtu\.?be(?:\.com)?\/?[^\s]*(?:watch|embed)?(?:[^\s]*v=|v\/|\/)([\w-_]+)\s*$/gi;if(e&&e.match(t)){var i=e.replace(t,"https://www.youtube.com/embed/$1");e='<figure class="widescreen-container">'+('<iframe type="text/html" src="'+i+'" frameborder="0"></iframe>')+"</figure>"}return e},d=function(e,t){if(e){var i='rel="nofollow"';t&&t.indexOf("link")>=0&&(i="",e=e.replace(/(^|[\s(])\[([^|\]]+)\|((https?):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])\]/gi,'$1<a href="$3" '+i+">$2</a>")),e=e.replace(/(^|[\s(])((https?):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,'$1<a href="$2" '+i+">$2</a>")}return e},h=function(e){return e&&(e=e.replace(/(^|[\s(])(\#([\_\w]+))/gm,'$1<a href="https://weheartit.com/search/entries?query=$3">$2</a>')),e},f=function(e,t){if(e){var i=/(^|[\s(])(\@([\_\w]+))/gm,n=e.match(i);if(n){for(var o=0;o<n.length;o++){var r=n[o].replace(/\s*\@/,"").toLowerCase();t.users.push(r)}e=e.replace(i,'$1<a href="https://weheartit.com/user/$3">$2</a>')}}return e},p=function(e){return e&&!e.match(/^<(?!a|strong|em|strike|code)/i)&&(e="<p>"+(e=e.replace(/\n/g,"<br>"))+"</p>"),e},m=function(e){if(e){var t=e.match(/^!ad:([a-z0-9_-]+)\{([a-z0-9 :="'_-]+)\}$/i);t&&(e='<div class="js-doubleclick-ad article-inline-ad" id="'+t[1]+'" '+t[2]+"></div>")}return e};if(void 0!==i)i.exports={parseArticle:n}}}),this.require.define({"modules/lib/config":function(e,t,i){function n(e){if(!e)return e;if([Number,String,Boolean].forEach((function(i){e instanceof i&&(t=i(e))})),void 0===t)if("[object Array]"===Object.prototype.toString.call(e))t=[],e.forEach((function(e,i){t[i]=n(e)}));else if("object"==typeof e)if(e.nodeType&&"function"==typeof e.cloneNode)var t=e.cloneNode(!0);else if(e.prototype)t=e;else if(e instanceof Date)t=new Date(e);else for(var i in t={},e)t[i]=n(e[i]);else t=e;return t}var o,r,s=function(){if(!window.whiConfig&&!r)throw new Error("whiConfig is not set. App will probably not work.");if(!r){for(var e in r=!0,window.whiConfig)window.whiConfig.hasOwnProperty(e)&&a.set(e,n(window.whiConfig[e]));return this}},a=i.exports={updateCache:s,get:function(e){return o||s(),o[e]},set:function(e,t){if("function"==typeof this[e]&&!o[e])throw new Error("Tried to set non-settable config property "+e);(o=o||{})[e]=t,this[e]||l(this,e,{get:this.get.bind(this,e),set:this.set.bind(this,e)})}},l=function(e,t,i){if("function"==typeof Object.defineProperty)Object.defineProperty(e,t,i);else{if("function"!=typeof e.__defineGetter__)throw new Error("Error: defineProperty is not supported in this environment.");e.__defineGetter__(t,i.get),e.__defineSetter__(t,i.set)}}}}),this.require.define({"modules/lib/crop":function(e,t,i){"use strict";var n,o,r,s,a,l,c,u=!1,d=0,h=0,f=0,p=null,m=null,g=240,v=200,b=g/v,w=30,y=null,_=null,x=i.exports=function(){return this.init.apply(this,arguments)};x.prototype.init=function(e,t,i){return this.canvas=e,e.removeClass("vertical horizontal"),e.css("background-position",""),c=$('<div class="loading">loading</div>'),e.append(c),t.get(0).complete?k(e,t,i):("data"!==t.attr("src").substr(0,4)&&t.attr("src",t.attr("src")+"?"+(new Date).getTime()),t.on("load",(function(){k(e,t,i)}))),this};var k=function(e,t,i){var u=t.width()/t.height();u!==b?(y=u<b?g:v/t.height()*t.width(),_=u>b?v:g/t.width()*t.height(),u<b?(n="clientY",p=function(e){return"0 "+e+"px"},m=function(e){return{leftOffset:0,topOffset:e}},o=v-Math.floor(_),h=-(_/2-v/2),e.addClass("vertical")):u>b&&(n="clientX",p=function(e){return e+"px 0"},m=function(e){return{leftOffset:e,topOffset:0}},o=g-Math.floor(y),h=-(y/2-g/2),e.addClass("horizontal")),C(e),r=$("<input type=hidden name=crop[top]>"),s=$("<input type=hidden name=crop[left]>"),a=$("<input type=hidden name=crop[width]>"),l=$("<input type=hidden name=crop[height]>"),i.append(r,s,a,l),c.fadeOut(),e.hasClass("rotated")||e.find(".thumb-crop-helper").fadeIn()):c.fadeOut()};x.prototype.teardown=function(){this.canvas.off("mouseover",j),this.canvas.off("mousedown",S),this.canvas.off("mouseup",T),this.canvas.off("mousemove",I),this.canvas.off("mouseout",A)};var C=function(e){e.on("mouseover",j),e.on("mousedown",S),e.on("mouseup",T),e.on("mousemove",I),e.on("mouseout",A)},j=function(){$(this).find(".thumb-crop-helper").fadeOut()},S=function(e){!0!==u&&(d=e[n]-h,u=!0)},T=function(){u=!1},A=function(){u=!1},I=function(e){if(u){$.publish("whi:crop:dragging"),(h=e[n]-d)>f&&(h=f),h<o&&(h=o),$(this).css("background-position",p(h+w));var t=E(m(-h));P(t)}},E=function(e){return{left:e.leftOffset/y,top:e.topOffset/_,width:g/y,height:v/_}},P=function(e){var t=4;r.val(D(e.top,t)),s.val(D(e.left,t)),a.val(D(e.width,t)),l.val(D(e.height,t))},D=function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}}}),this.require.define({"modules/lib/deep_link":function(e,t,i){"use strict";var n=i.exports={},o="whi://trigger_event/";n.triggerEvent=function(e,t,i){var n=Object.keys(t).map((function(e){return e+"="+encodeURIComponent(t[e])})).join("&"),r=o+e+"?"+n,s=document.createElement("iframe");s.style.border="none",s.style.width="1px",s.style.height="1px",s.src=r,document.documentElement.appendChild(s),setTimeout((function(){s.parentNode.removeChild(s),i&&i()}),1e3)}}}),this.require.define({"modules/lib/entry_frame_buster":function(e,t,i){i.exports={init:function(){}}}}),this.require.define({"modules/lib/facebook":function(e,t,i){var n=t("./config");(i.exports={}).load=function(e){window.FB?e():jQuery.ajax({url:"https://connect.facebook.net/en_US/sdk.js#xfbml=1",dataType:"script",cache:!0,success:function(){FB.init({appId:n.facebook.appId,version:n.facebook.api_version,frictionlessRequests:!0,status:!0,cookie:!0,xfbml:!0}),$.publish("whi:fb_init"),e()}})}}}),this.require.define({"modules/lib/facebook_api":function(e,t,i){var n=t("./config"),o="https://graph.facebook.com/v2.2/",r=i.exports={};r.authenticated=function(){return!(!n.facebook||!n.facebook.user_token)},r.api=function(e,t,i){var s=(e=/\/\/graph\.facebook/.test(e)?e:o+e.replace(/^\//,""))+(/\?/.test(e)?"&":"?")+"access_token="+n.facebook.user_token+"&callback=?",a=i||[];$.ajax({url:s,dataType:"jsonp",success:function(e){e.paging&&e.paging.next?(a=a.concat(e.data),r.api(e.paging.next,t,a)):(i&&(e.data=a),t(e))}})},r.inviteDialog=function(){FB.ui({method:"send",link:"http://www.weheartit.com"})},r.requestDialog=function(){FB.ui({method:"apprequests",message:"Join WeHeartIt"},(function(){}))}}}),this.require.define({"modules/lib/global_events":function(e,t,i){var n=t("./tracking"),o=t("./config");i.exports.init=function(){var e=$("body");if(e.attr("data-signing_up")){var t=e.attr("data-registration_source"),i=e.attr("data-registration_additional");n.trackGAEvent("RegistrationComplete",t,i,o.user_id)}}}}),this.require.define({"modules/lib/heart_button_thumb":function(e,t,i){var n=t("./routes"),o=t("../utils/utils"),r=t("../lib/tracking"),s=[],a=i.exports={};a.reset=function(){$(window).off("click",".js-heart-button",h),$.unsubscribe("whi:heart_entry",d),s=[],c()},a.heartButtons=function(){return $(".js-heart-button")},a.heartedEntries=function(){return s};var l=a.addHearts=function(e){(e?e.find(".js-heart-button.js-hearted"):$(".js-heart-button.js-hearted")).each((function(){var e=$(this).data("entry-id").toString();-1===$.inArray(e,s)&&s.push(e)}))},c=a.init=function(){return u(),l(),this},u=function(){$(window).on("click",".js-heart-button",h),$.subscribe("whi:heart_entry",d)},d=function(e,t){if(t||(t=e),!t.entryId)return console.error("triggered heart, but no entry was passed.");var i={referrer:document.referrer,heart_page:document.URL};t.hearterUsername&&(i.hearter_username=t.hearterUsername),$.ajax({url:n.heart_path(t.entryId),type:"post",dataType:"html",data:i,success:function(){p(null,t.entryId)},error:o.showAjaxErrorModalCallback})},h=function(e){e.preventDefault();var t=$(this),i=t.data("entry-id").toString();-1===$.inArray(i,s)?f(t,i):m(t,i)},f=function(e,t){e.addClass("ajax"),e.parent().find(".js-heart-count").hide(),$.ajax({url:n.heart_path(t),type:"post",dataType:"html",data:{referrer:document.referrer,heart_page:document.URL,hearter_username:e.data("hearter-username")},success:function(){p(e,t)},error:o.showAjaxErrorModalCallback,complete:function(){e.removeClass("ajax")}})},p=function(e,t){s.push(t),e&&e.trigger("heart",[t]),r.trackGAEvent("Heart","Hearted",t.toString());var i=e.closest(".entry").data("trackingUrl"),n=e.closest(".entry").data("adsNativeSid");v(e),$.publish("whi:hearted",{entry:t,adsNativeTrackingUrl:i,adsNativeSID:n})},m=function(e,t){e.addClass("ajax"),e.parent().find(".js-heart-count").hide(),e.find(".icon").removeClass("icon-hearted"),$.ajax({type:"post",dataType:"html",url:n.unheart_path(t),data:{_method:"delete"},success:function(){g(e,t)},error:o.showAjaxErrorModalCallback,complete:function(){e.removeClass("ajax")}})},g=function(e,t){e.find(".icon"),s.splice($.inArray(t,s),1),r.trackGAEvent("Heart","Unhearted",t.toString()),e.trigger("unheart",[t]),b(e),$.publish("whi:unhearted",{entry:t})},v=function(e){var t=e.parent().find(".js-heart-count"),i=parseInt($.trim(t.html()));t.html(i+1).show()},b=function(e){var t=e.parent().find(".js-heart-count"),i=parseInt($.trim(t.html()));t.html(i-1).show()}}}),this.require.define({"modules/lib/heart_button_thumb_anonymous":function(e,t,i){t("../utils/utils").positionFloatingWindow;var n=t("./routes"),o=(t("./tracking"),i.exports={});o.init=function(e){return e=e||{},this.disableRegistrationRequest=e.disable_anonymous_registration,r(),this};var r=o.bindCallbacks=function(){$(window).on("click",".js-heart-button",(function(e){e.preventDefault();var t=$(this),i=t.data("entry-id"),o=t.attr("data-username");$.publish("whi:anonymous_heart",{done:n.getUrl(n.entry_path(i)),action:{type:"heart",entryId:i,hearterUserame:o}}),s(i)}))},s=o.onUnauthorizedHeartClick=function(e){$("#first-heart-window").find("a").each((function(){var t=$(this).attr("href");$(this).attr("href",t.replace(/heart=[0-9]+/,"heart="+e))}))}}}),this.require.define({"modules/lib/hover_flicker_fix":function(e,t,i){(i.exports={}).init=function(){$("body:not(.mobile-web)").on("mouseenter",".grid-thumb .entry",(function(){var e=$(this),t=e.find(".heart-button").hasClass("hearted"),i=e.find(".call-to-action").length>0;e.addClass("hover"),t&&e.addClass("hover show-sets"),i&&e.addClass("has-cta"),e.find(".heart").stop(!0,!0).fadeIn().css("display","block")})).on("mouseleave",".grid-thumb .entry",(function(){var e=$(this);e.removeClass("hover show-sets"),e.hasClass("show-sets")||e.hasClass("show-feedback")?setTimeout((function(){e.hasClass("hover")||e.hasClass("show-sets")||(e.addClass("entry"),e.find(".heart").stop(!0,!0).fadeOut())}),3e3):e.find(".heart").stop(!0,!0).fadeOut()}))}}}),this.require.define({"modules/lib/infinite_scroll":function(e,t,i){function n(e){for(var t=e.offsetTop,i=e.offsetLeft,n=e.offsetWidth,o=e.offsetHeight;e.offsetParent;)t+=(e=e.offsetParent).offsetTop,i+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&t+o>window.pageYOffset&&i+n>window.pageXOffset}function o(e){var t=[];return e.each((function(e,i){if($(i).hasClass("ad"))if(removeAdSlots&&removeAdSlots(i),b.log("DFP: removed ad slot "+$(i).attr("id")),0==i.offsetHeight)i=null;else{var n=$(document.createElement("div"));n.addClass("grid-item"),$(i).hasClass("right")&&n.addClass("right"),n.attr("style",$(i).attr("style"));var o=$(document.createElement("div"));o.addClass("thumb-height"),o.appendTo(n),i=n[0]}i&&t.push(i)})),t}var r,s,a,l,c,u,d,h,f,p,m,g,v,b=t("../utils/logger"),w=t("./routes"),y=t("./whi_history"),_=t("./tracking"),x=t("./lightbox"),k=[],C=[],j=0,S=i.exports={},T=function(){return!1};S.init=function(){if(0!=$("[data-infinite-scroll-url]").length){$(".page-footer").hide();var e=$("[data-infinite-scroll-url]").data("infinite-scroll-url")||"/recent",t=window.location.search.replace(/\+/g,"%20");l=w.mergeQueryParams(e,t).replace(/#.+/,""),c=$("[data-scroll-id]").data("scroll-id")||"entry-id",s=parseInt($("[data-infinite-scroll-page]").data("infinite-scroll-page"))||1,a=$("[data-infinite-scroll-count]").data("infinite-scroll-count"),m=$("[data-thumb-selector]").data("thumb-selector")||".grid-thumb",g=$("[data-element-selector]").data("element-selector")||".entry",u=!1,d=$(window),h=$(m),f=$(".js-pagination-counter-current"),r=s==a,v=$("#scroll-placeholder");var i=1==s?window.location.href:w.next_page(l,s,P(),D()),n={number:s,url:i,viewed:!0,position:0,index:k.length};k.push(n),U(n),a&&$(".js-pagination-counter-total").html("of "+a),d.on("scroll",I),setTimeout(I,1e3),Q()||$(window).on("click",".js-pagination-scroll-top",X),$(".js-pagination-counter").removeClass("hidden"),$(".js-pagination-counter-form").on("submit",E),$(".js-pagination-counter-form").on("click",T)}};i.exports.teardown=function(){d.off("scroll",I),clearTimeout(I,1e3),Q()||$(window).off("click",".js-pagination-scroll-top",X),$(".js-pagination-counter").addClass("hidden"),$(".js-pagination-counter-form").off("submit",E),$(".js-pagination-counter-form").off("click",T)};var A=!1,I=function(){x.isOpen()||A||(A=!0,requestAnimationFrame(F))},E=function(){var e=this.elements[0].value;return window.location=w.next_page(l,e),!1},P=function(e){return(e=e||$(m).find(g)).not(".js-promoted").last().attr("data-"+c)},D=function(e){return(e=e||$(m).find(g)).not(".js-promoted").last().attr("data-offset")},N=function(e){Q()&&(n(v[0])?v.height(0):null!=e&&v.height(e))},O=function(){if(Q()){var e=$(window).height();e<2e3&&(e=2e3);var t=-v[0].getBoundingClientRect().bottom,i=$(".grid-thumb")[0].getBoundingClientRect().bottom-e,n=3*e;t>=n?q():i>=n&&H()}},F=function(){var e=d.scrollTop();if(e>1200?$(".js-pagination-scroll-top").fadeIn():$(".js-pagination-scroll-top").fadeOut(),N(null),Math.abs(e-j)>100){var t=B(e);t&&t.index!=p.index&&U(t)}if(A=!1,!u){if(Q()){var i=$(window).height();-v[0].getBoundingClientRect().bottom<=2*i&&L()}r||$("#lightbox,#loader,.floating-window").get().some((function(e){return $(e).is(":visible")}))||$("body")[0].scrollHeight-e<=d.outerHeight()+1600&&R(s+1)}},R=function(e){var t=w.next_page(l,e,P(),D()),i=w.next_infinite_scroll_page(l,e,P(),D());M(i),k.push({number:e,url:t,viewed:!1,position:h.height(),index:k.length});var n=new Date,o=$.ajax({url:i});o.done((function(e){var t=new Date;G(e,n,t,i),O()})),o.fail((function(){r=!0,setTimeout((function(){$("#connection-error").show().attr("aria-hidden","false")}),5e3)})),o.always(W)},q=function(){var e=$(document).height(),t=v.height(),i=24,n=$(".grid-item, .tt-wrapper.inread").slice(0,i),r=o(n);b.log("Scroll: remove "+n.length+" from top of list"),n.remove();var s=e-$(document).height();N(t+s),C.push({entries:r,offset:t})},L=function(){if(0!==C.length){b.log("Scroll: restore page to top of list");var e=C.pop();N(e.offset),v.after(e.entries),O()}},H=function(){var e=k.pop();b.log("Scroll: remove pages after "+e.number+" from bottom of list"),$("div[data-page-number="+e.number+"]").first().nextAll().remove(),s--,r=s==a||!P()},M=function(){u=!0,$("#page-spinner").find("a").hide(),$("#page-spinner").spin({lines:10,length:6,width:4,radius:8,speed:1.1})},W=function(){u=!1,$("#page-spinner").spin(!1)},U=function(e){p=e,f.val(e.number),y&&e&&e.url&&y.replaceState({link:e.url}),e.viewed||(e.viewed=!0,_.trackPageView())},B=function(e){if(a&&k[a-1]&&V())return k[a-1];var t=null;return k.forEach((function(i,n){if(!t){var o=k[n+1];i.position<e&&(!o||o.position>e)&&(t=i)}})),t},z=function(e){var t=$(e),i=t.attr("id");if(i&&$("#"+i).length>0)return!0;var n=t.attr("data-"+c);return $(g+"[data-"+c+'="'+n+'"]').length>0},G=function(e,t,i,n){var o=$(e.trim()),l=P(o.filter(g));if(s++,r=s==a||!l,l){var c=[],u=0;o.each((function(){("#text"!=this.nodeName||null!=this.textContent&&""!=this.textContent.trim())&&(z(this)?(b.log("Scroll:  element already in DOM"),b.log(this)):(u+=1,c.push(this)))})),o=$(c),h.append(o),b.log("Scroll: added "+u+" elements to DOM"),$.publish("whi:content_updated",{url:n,name:"infinite_scroll"})}},X=function(){$("body,html").animate({scrollTop:0},200,(function(){U(k[0])})),event.preventDefault()},V=function(){return $(window).scrollTop()>$(document).height()-$(window).height()-10},Q=function(){return v.length&&void 0===window.ontouchmove}}}),this.require.define({"modules/lib/inject_script":function(e,t,i){i.exports=function(e,t){var i=document.createElement("script");if(i.type="text/javascript",i.src=e,t)t.appendChild(i);else{var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n)}return i}}}),this.require.define({"modules/lib/lightbox":function(e,t,i){function n(e){e.activator=document.activeElement,r(document).forEach((function(t){e.contains(t)||(t.dataset.saveTabIndex=t.getAttribute("tabindex"),t.setAttribute("tabindex",-1))})),modalFocusables=null}function o(e){r(document).forEach((function(e){var t=e.dataset.saveTabIndex;delete e.dataset.saveTabIndex,t&&e.setAttribute("tabindex",t)})),e.activator&&(e.activator.focus(),delete e.activator)}function r(e){return e.querySelectorAll("a[href], area[href], button, input:not([type=hidden]), select, textarea, iframe, [tabindex], [contentEditable=true]")}t("./routes"),t("../lib/tracking");var s,a=!1,l=!1,c=i.exports={close:function(){return f(),this},open:function(e){return p(e),this},isClosed:function(){return $("#lightbox").is(":hidden")},isOpen:function(){return $("#lightbox").is(":visible")},showLoader:function(){var e=$("#loader");e.length||(e=$("body").append('<div id="loader">').find("#loader").hide()),e.html('<div class="spinner"></div>'),m(e),e.fadeIn(400)},hideLoader:function(){return $("#loader").remove(),this},loadContent:function(e,t,i,n){return a||d(),g(),h($(e),t,i,n),this},confirm:function(e,t,i,n,o){var r=$("<button>",{class:"btn bg-white text-primary push-around"});r.text(i),r.click((function(){try{o()}finally{f()}}));var s=$("<button>",{class:"btn bg-white text-gray push-around"});s.text(n),s.click((function(){f()}));var a=$("<div>",{class:"push-around-1em text-center"});a.append(r).append(s);var l=$("<div>",{class:"modal-heavy text-left"});l.append($("<p>").text(e)),t&&l.append($("<p>").text(t)),l.append(a),this.loadContent(l)}},u=function(e){var t=$("#lightbox");if(!$(e.target).is(":input")&&!t.is(":hidden"))switch(e.keyCode){case 27:f();break;case 38:t.animate({scrollTop:"-=100"},200);break;case 40:t.animate({scrollTop:"+=100"},200);break;default:return!0}},d=c.init=function(){$(window).on("keydown",u),$("#lightbox").length||$("body").append('<div id="lightbox">'),$(window).on("click","#lightbox, .entry-content, .entry-content .grid-responsive, .lightbox-entry-closex",(function(e){return $(e.target).is("#lightbox, .entry-content, .entry-content .grid-responsive, .lightbox-entry-closex")&&(f(),e.preventDefault()),!0})),$.subscribe("whi:lightbox:close",f),a=!0},h=function(e){var t={},i=function(){},o=!1;Array.prototype.slice.call(arguments).slice(1).forEach((function(e){"function"==typeof e&&(i=e),"object"==typeof e&&(t=e),!0===e&&(o=e)})),$("#lightbox").html(e),l=!0,o?$("#lightbox").show().attr("aria-hidden","false"):$("#lightbox").fadeIn(400).attr("aria-hidden","false"),i(t),n($("#lightbox")[0]),$.publish("whi:content_updated",{url:location.href,name:"lightbox"}),$.publish("lightbox:loaded")},f=function(){l&&(l=!1,$("html").css("overflow","scroll"),$("#lightbox").fadeOut(400,(function(){$(this).attr("aria-hidden","true"),removeAdSlots&&removeAdSlots($(this).find(".ad")),$(this).html('<div class="spinner"></div>').scrollTop(0),o($("#lightbox")[0]),$.publish("lightbox:closed")})),$(".js-pagination-counter").fadeIn(400))},p=function(e){e=e||function(){};var t=function(){e();$.cookie("__whsp")};m(),$("html").css("overflow","hidden"),$("#lightbox").fadeIn(400,t),$(".js-pagination-counter").fadeOut(400),$.publish("lightbox:opened")},m=c.showLoading=function(e){$(e||"#lightbox").find(".spinner").spin({lines:"11",length:"2",width:"8",radius:"30",corners:"1.0",rotate:"0",trail:"42",speed:"1.1",direction:"1",hwaccel:"on"});e||(s=e)},g=c.hideLoading=function(e){var t=s;e&&(t=$(e).find(".spinner")),t&&t.stop()},v=function(e){e&&e.preventDefault();var t=$(e.target),i=t.attr("href")||t.data("url");$.get(i,(function(e){c.loadContent(e).open()}))};$((function(){$(".js-load-lightbox").click(v)}))}}),this.require.define({"modules/lib/link_social_network":function(e,t,i){var n=i.exports,o={},r={},s=(n.openPopup=function(e,t){var i=600,n=400,a=screen.width/2-i/2,l=200,c=document.createElement("a"),u=(new Date).getTime();c.href=e,c.search=c.search+"&popup_id="+u;var d=window.open(c.href,"title","width="+i+",height="+n+",scrollbars=yes,status=1,left="+a+",top="+l);return o[u]=s(u,t),r[u]=d,window.addEventListener("message",o[u],!1),u},n.closePopup=function(e){r[e].postMessage(JSON.stringify({popupId:e,data:"close"}),document.location.origin),window.removeEventListener("message",s[e]),delete o[e],delete r[e]},function(e,t){return function(i){if(document.location.origin===i.origin){var n=JSON.parse(i.data);n.popupId==e&&t(n.data)}}})}}),this.require.define({"modules/lib/notifications":function(e,t,i){var n,o,r,s=t("./config"),a=t("../utils/logger"),l=t("./routes"),c=t("./tracking"),u=t("./popup_message"),d=((i.exports={}).init=function(){n=!1,window.location.pathname==l.notifications_path()&&(o=m(),g()),d($(".content .js-notifications-list")),(r=$(".js-navbar .js-notifications-list")).on("mouseenter",h),$(".js-notification-opt-out").click(f)},function(e){var t=e.find(".js-notification-action");t.on("ajax:before",(function(){$(this).addClass("btn-is-loading")})),t.on("ajax:complete",(function(){var e=$(this);"follow"!==e.attr("data-action")&&"request_to_follow"!==e.attr("data-action")||c.trackGAEvent("Follow","Follow","Notification"),$(this).removeClass("btn-is-loading")})),o=m()}),h=function(){c.trackGAEvent("Notifications","NotificationsRollover","UserID",s.user_id),recentNotifications=$(".js-notifications-container"),recentNotifications.data("requested")?p():(recentNotifications.data("requested",!0),$.get(l.recent_notifications_path(),(function(e){recentNotifications.removeClass("panel-is-loading"),recentNotifications.html(e),$.publish("whi:content_updated",{name:"notifications"}),d(recentNotifications),p(),$(".js-notifications-container .js-notification-opt-out").click(f)})))},f=function(e){var t=$(this),i=t.data("dismissTitle"),n=t.data("dismissMessage"),o=t.closest(".js-notification").data("notificationId");e.preventDefault(),e.stopPropagation(),u.confirm(i,n,(function(e){e&&v(o)}))},p=function(){if(o&&o.length&&r&&!n){var e=!1;r.one("mouseleave",(function(){e=!0,n&&$(".js-notification").removeClass("notification-is-unread")})),setTimeout((function(){e||g(!0)}),1e3)}},m=function(){return $("body").find(".js-notification.notification-is-unread").map((function(){return $(this).data("notification-id")})).get()},g=function(e){if(!n&&o){n=!0;var t=parseInt($(".js-notifications-count").text());$.ajax({url:l.read_notifications_path(o),type:"PUT"}).done((function(){$(".js-navbar .js-notifications-list").data("unread-ids",""),$(".js-notifications-count").addClass("notifications-count-zero"),e&&$(".js-notifications-count").text(Math.max(0,t-o.length))})).fail((function(){void 0!==a&&a.log("error marking notifications read!",o)}))}},v=function(e){var t=l.dismiss_notification_path(e);$.ajax({url:t,dataType:"json",type:"delete",success:function(){$(".js_notification_"+e).remove();var t=o.indexOf(e);-1!=t&&o.splice(t)},error:function(){void 0!==a&&a.log("error dismissing notification!",e)}})}}}),this.require.define({"modules/lib/paginator":function(e,t,i){var n=i.exports=function(e,t,i){function o(){return Math.ceil(d.length/i)}function r(){h>1&&(h-=1),l(),a()}function s(){h<o()&&(h+=1),l(),a()}function a(){m.val(h),h===o()?p.addClass("gray"):p.removeClass("gray"),1===h?f.addClass("gray"):f.removeClass("gray")}function l(){d.each((function(e,t){h===parseInt(e/i)+1?$(t).show():$(t).hide()}))}function c(){d=$(e+" > *")}function u(e){(e=parseInt(e))<=o()&&e>=1&&(h=e,l(),a())}if(!(this instanceof n))return new n(e,t,i);void 0===i&&(i=10),this.pagesTotal=o,this.previous=r,this.next=s,this.updateItems=c,this.setCurrentPage=u;var d,h=1,f=$(t+" .newer a"),p=$(t+" .older a"),m=$(t+" input");c(),o()>1&&(l(),$(t+" .total_pages").text(o()),f.click((function(e){r(),e.preventDefault()})),p.click((function(e){s(),e.preventDefault()})),m.keypress((function(e){13===e.which&&u(m.val())})),$(t).show())}}}),this.require.define({"modules/lib/popup_message":function(e,t,i){var n=t("../utils/logger"),o=["alert","confirm"],r=!1,s=null,a=null,l=null,c=function(){s=$(".js-popup"),a=$(".js-popup .js-popup-title"),l=$(".js-popup .js-popup-message"),$(".js-popup-confirm").click(u),$(".js-popup-cancel").click(d)},u=function(){s.removeClass(o.join(" ")),popupCallback&&popupCallback(!0),f()},d=function(){s.removeClass(o.join(" ")),popupCallback&&popupCallback(!1),f()},h=function(e,t){e&&t?(a.text(e),l.text(t),s.show().attr("aria-hidden","false"),r=!0):n.log("popupMessage: Title or Message not provided ("+e+", "+t+") ")},f=function(){popupCallback=null,r=!1,s.hide().attr("aria-hidden","true")},p=function(e,t,i){r||(h(e,t),popupCallback=i)},m=function(e,t,i){r||(h(e,t),popupCallback=i)};i.exports={init:c,alert:p,confirm:m}}}),this.require.define({"modules/lib/prevent_double_submission":function(e,t,i){var n=function(){if(this.beenSubmitted)return!1;this.beenSubmitted=!0};i.exports={init:function(){$(".js-prevent-double-submission").on("submit",n)}}}}),this.require.define({"modules/lib/registration_intercept":function(e,t,i){var n=t("./view"),o=t("./lightbox"),r=t("../utils/utils"),s=t("../utils/anonymous_session")(),a=t("./routes"),l=t("./config"),c=t("./signup_buttons"),u=t("./tracking"),d=t("../views/modal"),h=i.exports={};h.init=function(){g()};var f=function(){var e=$(".js-registration-wall").length>0;if(l.user_authenticated||e)return!1;if($(".js-hide-intercept").length>0)return!1;if([/registration/,/join/,/login/,/forgot_password/,/onboarding/,/postcard/,/(contact|about)/,/auth(\/.*)?/,/^\/$/,/heart-it/,/podcasts/].some((function(e){return e.test(window.location.pathname)})))return!1;if(window.location.search.indexOf("noprompt")>=0)return!1;if(s.current_pageviews()>2){if(l.mobile_site)return!1;"true"==$.cookie("hide_intercept")||r.prompt_helper.is_any_prompt_showed()||$.publish("whi:show_intercept")}},p=function(){h.show(null,{done:a.currentPageWithParams({source:"registration_intercept"})})},m=function(){$.publish("whi:show_signup")},g=function(){$("body").on("click","#registration_intercept .js-button-signup",_),$("body").on("click","#registration_intercept .back-arrow",y),$.subscribe("whi:floating_window_closed",v),$.subscribe("whi:signup_updated",w),$.subscribe("whi:close_intercept",v.bind(null,5)),$.subscribe("whi:anonymous_heart",m),$.subscribe("whi:anonymous_follow",m),$.subscribe("whi:anonymous_upload",m),$.subscribe("whi:anonymous_set",m),$.subscribe("whi:add_favorite_tag",m),
$.subscribe("whi:reg_wall_join",m),$.subscribe("whi:show_intercept",p),$(document).ready(f)},v=(h.show=function(e,t,i){if(i&&(i.done||i.action)&&$.cookie("whi:registration_complete_data",JSON.stringify(i),{path:"/",expires:30}),l.mobile_site)return window.location=a.join_url();var n={};e&&(n.type=e),$.ajax({url:a.getUrl("/registration/intercept"),data:n,success:function(e){try{$("#registration_intercept").remove(),d.load(e),r.prompt_helper.track_prompt_show(),u.trackGAEvent("Registration","JoinPageViewed","New",null,!0),$.publish("whi:content_updated",{url:"/registration/intercept",name:"intercept"})}catch(e){console.error(e)}},complete:function(){o.hideLoading()}})},function(e){"number"!=typeof e&&(e=1),$.cookie("hide_intercept",!0,{expires:e,path:"/"}),b()}),b=function(){$("#registration_intercept .intercept_container").removeAttr("style").find(".intercept_signup_form").remove()},w=function(){var e=$("#registration_intercept .intercept_signup_form").removeAttr("style").outerHeight();$(".registration_intercept").animate({height:e},200)},y=function(){n.unloadView("registration/email_signup");var e=$("#registration_intercept .intercept_container");if(0!=parseInt(e.css("left"))){var t=e.find(".intercept_content").outerHeight();$("#registration_intercept .back-arrow").removeClass("showing"),e.animate({left:0},200,(function(){b()})),$(".registration_intercept").animate({height:t})}},_=new c({serviceClicked:function(){v(5)},emailStart:function(){},emailComplete:function(){},emailForm:function(e){var t=$('<div class="intercept_signup_form">').append(e),i=$("#registration_intercept .intercept_container"),o=$(".registration_intercept").width();$("#registration_intercept .back-arrow").addClass("showing"),i.append(t);var r=i.find(".intercept_signup_form").outerHeight();i.animate({left:"-="+o},200),$(".registration_intercept").animate({height:r},200),n.loadView("registration/email_signup")}}).click}}),this.require.define({"modules/lib/routes":function(e,t,i){var n=i.exports={join_url:function(){return"/join"},admin_host_entries_number:function(){return"/admin/blocked_resources/host_entries_number"},user_entry_set_path:function(e){return"/"+e+"/entry-sets"},follows_path:function(){return"/follows"},entry_path:function(e){return"/entry/"+e},dashboard_path:function(e){return"/dashboard?new_entry_id="+e},heart_path:function(e){return"/entry/"+e+"/heart"},unheart_path:function(e){return"/entry/"+e+"/heart"},set_path:function(e){return"/entry/"+e+"/set"},remove_from_set:function(e){return"/setteds/"+e},similar_entries_path:function(e){return"/entry/"+e+"/similar"},create_entry_set_path:function(){return"/current_user/sets"},create_entry_set_with_entry_path:function(e){return"/"+e+"/sets"},tag_remove_path:function(e,t){return"entry/"+e+"/tag/"+t},follow_path:function(e){return"/user/"+e+"/follow"},unfollow_path:function(e){return"/user/"+e+"/follow"},heartButtonWidgetPath:function(e,t,i){return"/heart-it?button_type="+e+"&media="+t+"&via="+i},facebook_invite_forms_path:function(){return"/join/invitation-forms"},notifications_path:function(){return"/notifications"},read_notifications_path:function(e){return"/notifications?ids="+e},recent_notifications_path:function(){return"/recent_notifications"},dismiss_notification_path:function(e){return"/notifications/"+e+".js"},date_selection_path:function(){return"/popular_images/date_selection"},next_page:function(e,t,i,n){return c(e,t,i,n)},next_infinite_scroll_page:function(e,t,i,n){var o=e.split("?");e=o[0];var r=o[1]?o[1]:"";return r.match(/(\A|&)scrolling=true/)||(r.length>0&&(r+="&"),r+="scrolling=true"),"/"==e&&(e="/recent"),c(e+"?"+r,t,i,n)},registration_prompt_path:"/prompts/registration",start_hearting_prompt_path:"/prompts/start_hearting",update_dashboard:function(){return"/settings/dashboard"},app_download_email:function(){return"/app_download_email"},add_tracked_keyword_path:function(){return"/settings/tracked_keywords"},remove_tracked_keyword_path:function(){return"/settings/tracked_keywords"},promoted_entry_path:function(e){return/promoted_entries/+e},user_collections:function(e){return"/"+e+"/collections"},inspirations:function(){return"/inspirations"},follow_inspiration:function(){return"/follows"},add_to_collections:function(e){return"/add_to_collections/"+e},create_new_collection:function(e){return"/create_new_collection/"+e},link_facebook:function(){return"/settings/link-facebook"},link_twitter:function(){return"/settings/link-twitter"},link_account:function(){return"/settings/link-account"},share_modal:function(){return"/share_modal"},share_modal_basic:function(){return"/share_modal_basic"},share:function(){return"/share"},postcard_modal:function(e){return"/postcards/"+e},recipients_modal:function(){return"/postcards/recipients"},recipients_scroll:function(){return"/postcards/recipients/scroll"},create_postcard:function(){return"/postcards/"},postcards_share_modal:function(){return"/postcards/share"},postcards_share_link:function(){return"/postcards/share_link"},download_restrictions:function(e){return"/entry/download/restrictions/"+e},premium_account:function(){return"/accounts/premium"},download_denied:function(){return"/entry/download/denied"},download_watermarked:function(){return"/entry/download/watermarked"},download_image_url:function(e,t){var i=t.split("/")[1];return"jpeg"==i&&(i="jpg"),"/entry/download/images/"+e+"/original."+i}},o=n.currentPageWithParams=function(e){var t="";return"string"==typeof e?t=e:e&&"object"==typeof e&&(t=Object.keys(e).reduce((function(t,i){return t+i+"="+encodeURIComponent(e[i])+"&"}),"?")),r(window.location.pathname+window.location.search,t)},r=(n.currentUrl=o.bind(null,null),n.mergeQueryParams=function(e,t){var i=e.split("?"),n=t.split("?"),o=i.length>1?i.slice(1).join("?"):"",r=n.length>1?n.slice(1).join("?"):n[0],l="?"+a(s((o?o+"&":"")+r));return(i.length>1?i[0]:e)+l+(window.location.hash||"")});n.getUrl=function(e){return e};var s=function(e){for(var t=e.split("&"),i=0,n=t.length,o={};i<n;i++){var r=t[i].split("=");r[0].length&&(o[r[0]]=decodeURIComponent(r[1]||""),"query"==r[0]&&l(r[1]))}return o},a=function(e){var t="";for(var i in e)i.length&&(t+=i+"="+encodeURIComponent(e[i])+"&");return t.slice(0,-1)},l=function(e){var t=$.cookie("weheartit_searches"),i=[];return t&&(i=t.toString().split(","),-1!=$.inArray(e,i)&&i.splice($.inArray(e,i),1)),i.push(e),$.cookie("weheartit_searches",i,{path:"/",expires:1}),!0},c=function(e,t,i,n){var o=[];return t&&o.push("page="+t),i&&o.push("before="+i),n&&o.push("offsets="+n),r(e,o.join("&"))},u=i.exports.LOCATION={other:0,entry_details:1,dashboard:2,search_people:3,followers_list:4,following_list:5,regflow:6,collection_details:7,search_collection:8,user_collections:9,user_canvas:10,discover:11,inspiration:12};i.exports.where=function(){return"/"===location.pathname?u.discover:location.pathname.match(/^\/inspirations\/.+/)?u.inspiration:$(".js-entry-container").length?u.entry_details:location.pathname.match(/^\/dashboard/)?u.dashboard:location.pathname.match(/^\/search\/users/)?u.search_people:location.pathname.match(/^\/search\/collections/)?u.search_collections:location.pathname.match(/.+\/fans$/)?u.followers_list:location.pathname.match(/.+\/contacts$/)?u.following_list:$(".registration_container .user_list_container").length?u.regflow:$(".set-header").length?u.collection_details:location.pathname.match(/.+\/collections$/)?u.user_collections:$(".user-profile").length?u.user_canvas:u.other}}}),this.require.define({"modules/lib/search":function(e,t,i){function n(e){var t=$(document.createElement("div")),i=$(document.createElement("a")).attr("href",e.click_url).attr("target","_blank");if(i.addClass("autocomplete-ad-link"),e.image_url){var n=$(document.createElement("div")).attr("style","background-image:url("+e.image_url+")").addClass("autocomplete-ad-image");i.append(n)}return i.append($(document.createElement("div")).text(e.title).addClass("autocomplete-ad-title")),i.append($(document.createElement("div")).text(e.description).addClass("autocomplete-ad-description")),i.append($(document.createElement("div")).text(e.display_url).addClass("autocomplete-ad-url")),i.append($(document.createElement("img")).attr("src",e.impression_url).attr("width","1").attr("height","1").addClass("tracking-pixel")),t.append($(document.createElement("div")).addClass("autocomplete-ad-sponsored").text("adMarketplace")),t.append(i),t}(i.exports={}).init=function(){$(".js-autocomplete-field").autocomplete({minLength:1,source:function(e,t){var i=e.term.trim().toLowerCase();i.length>0&&$.ajax({url:"/search/autosuggest",dataType:"json",data:{query:i},success:function(e){var i=e.suggestions;if(e.ad){var o=n(e.ad);i.push(o)}t(i)}})},select:function(e,t){var i=$(this),n=i.closest("form");i.val(t.item.value),n.find(".autocomplete-clicked").val("1"),n.submit()},open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}});var e=$.ui.autocomplete.prototype._renderMenu;$.ui.autocomplete.prototype._renderMenu=function(t,i){var n=null;(i.length>0&&i[i.length-1].length&&(n=i.pop()),e.apply(this,[t,i]),n)&&$(document.createElement("li")).html(n).data("ui-autocomplete-item","").addClass("autocomplete-ad").prependTo(t)},$(".search-form,#entries-search-form,#image-search-form").submit((function(){var e=$(this).find(".searchfield").val().trim()||$(this).find('[name="query"]').val().trim();if(!e)return!1;$.publish("whi:searched",{term:e})})),$(".searchfield input[name=query]").bind("focus blur",(function(){$(this).parent().toggleClass("focus")})),$("#image-search-form, #entries-search-form").submit((function(){var e=$(this).find("#text");if(""==e.val())return e.focus(),!1}))}}}),this.require.define({"modules/lib/signup_buttons":function(e,t,i){var n=t("./routes"),o=t("./tracking");i.exports=function(e){var t={twitter:function(){return o.trackGAEvent("Registration","Started","Twitter"),!0},facebook:function(){return o.trackGAEvent("Registration","Started","Facebook"),!0},google:function(){return o.trackGAEvent("Registration","Started","Google"),!0},apple:function(){return o.trackGAEvent("Registration","Started","Apple"),!0},email:function(){e.emailStart&&e.emailStart(),o.trackGAEvent("Registration","Started","Email");var t=0;if(document.URL.match(/force_captcha=1/))t=1;return $.ajax({url:n.getUrl("/registration/sign_up_form"),data:{popup:e.emailPopup,force_captcha:t},success:function(){var t=Array.prototype.slice.call(arguments);e.emailForm.apply(this,t)},complete:e.emailComplete||function(){}}),!1}};this.click=function(i){var n=$(i.target),o=n.is(".js-twitter-signup")?"twitter":n.is(".js-facebook-signup")?"facebook":n.is(".js-email-signup")?"email":n.is(".js-google-signup")?"google":!!n.is(".js-apple-signup")&&"apple";if(o)return $.publish("whi:initiate_signup"),"email"!=o&&"google"!=o&&e.serviceClicked&&e.serviceClicked(),t[o](i)}}}}),this.require.define({"modules/lib/signup_prompt":function(e,t,i){var n=t("./routes"),o=t("../utils/storage"),r=i.exports={min_entries:6};r.display=function(){if(this.eligible()){var e=o.get("seen_entries").reverse();$.get(n.registration_prompt_path,{entry_ids:e},(function(e){$("#lightbox").html(e),$.cookie("showed_prompt",!0,{expires:30})}))}},r.eligible=function(){try{return"yes"!=$.cookie("auth")&&!$.cookie("showed_prompt")&&o.get("seen_entries").length>=this.min_entries}catch(e){return!1}}}}),this.require.define({"modules/lib/start_hearting_prompt":function(e,t,i){var n=t("../utils/logger"),o=(t("./config"),t("./routes")),r=t("../utils/utils"),s=t("./tracking"),a=(t("../utils/anonymous_session")(),i.exports={min_page_views:4,displayFromOptimizely:function(){return window.optimizely=window.optimizely||[],window.optimizely.push(["activate",208006851]),$("#optimizely_prompt").length>0},displayPrompt:function(){this.eligible()&&(this.displayFromOptimizely()||this.display("background"))},closePrompt:function(){$(".start_hearting_popup").off("click",".closex,#close",a.closePrompt),$(this).parent().remove(),s.trackGAEvent("Registration Overlay pinkheart","dismissed","yes",0,!0)},display:function(e){r.prompt_helper.track_prompt_show(),$.get(o.start_hearting_prompt_path,{variation:e},(function(e){$("body").append(e),$.cookie("showed_start_hearting",!0,{expires:30,path:"/"}),$(".start_hearting_popup").on("click",".closex, #close",a.closePrompt)}))},eligible:function(){return n.warn("start hearting prompt disabled."),!1}})}}),this.require.define({"modules/lib/tracking":function(e,t,i){function n(){$(".entry-article, .article-preview").waypoint({handler:function(){f(this)},triggerOnce:!0,offset:"bottom-in-view"});var e=$("article.article")[0];e&&f(e)}var o=t("../utils/logger"),r=t("../utils/utils"),s=t("./config"),a=(t("./inject_script"),t("./routes")),l=!1,c={c1:"2",c2:"30386324"},u=[whiConfig.pagePath];window.ga=window.ga||function(){o.log("GA not initialized")},window._comscore=window._comscore||[];var d=i.exports={},h=function(){var e,t;s.mobile_app||s.dev_mode||(_comscore.push(c),e=document.createElement("script"),t=document.getElementsByTagName("script")[0],e.async=!0,e.src=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",t.parentNode.insertBefore(e,t))},f=function(e){var t=$(e).closest("[data-entry-id]").data("entryId");t&&whiConfig.uid?($.post("/articles/"+t+"/on_screen?uid="+escape(whiConfig.uid)),o.log("Article on screen "+t)):o.warn("Could not track article id: "+t+", uid: "+whiConfig.uid)},p=function(){window.COMSCORE&&COMSCORE.beacon&&COMSCORE.beacon(c)};d.init=function(){l||(h(),d.trackPageView(),n())};d.popPagePath=function(){u.pop()},d.trackPageView=function(e){var t=window.location.pathname+window.location.search;t=t.replace(/([?&])(before|after)(_id)?=[^&]*/g,"\x01"),ga("set","page",t),!e&&u.length>0&&(e=u[u.length-1]),e&&ga("set","title",e),ga("send","pageview"),p(),o.log("Tracking page view: "+e)},d.trackTiming=function(){},d.trackSocial=function(e,t,i){ga("send","social",e,t,i),o.log("tracking social: ",e,t,i)},d.trackEvent=function(e,t,i,n){var s=null;n&&(s=parseInt(n,10),isNaN(s)&&(s=0,o.error("Invalid value "+n+" passed to trackGAEvent."))),"uniqueAnalyticsLabel"===(i=i&&i.toString()||i)&&(i=r.uniqueAnalyticsLabel()),ga("send","event",e,t,i,s),o.log("tracking event: category: "+e+", action: "+t+", label: "+i+", value: "+s)},d.trackGAEvent=function(){},d.promotedEntryAction=function(e,t){$.ajax({type:"get",url:"/promoted_entry_action/"+t+"/"+e})},d.trackGridAction=function(e,t){var i=[];i.push("User: "+t.data("uploader-username")),i.push("Entry: "+t.data("entry-id")),!0===t.data("actionable")&&i.push("actionable"),!0===t.data("promoted")&&i.push(t.closest(".promoted-wrapper").length?"promoted":"organic"),d.trackGAEvent("Heart Actions",e,i.join(" "),1)},d.where=function(){var e=null,t=a.where();return t===a.LOCATION.entry_details&&(e="Entry Details"),t===a.LOCATION.dashboard&&(e="Dashboard"),t===a.LOCATION.search_people&&(e="Search People"),t===a.LOCATION.followers_list&&(e="Followers List"),t===a.LOCATION.following_list&&(e="Following List"),t===a.LOCATION.regflow&&(e="Regflow"),t===a.LOCATION.collection_details&&(e="Collection Details"),t===a.LOCATION.search_collection&&(e="Search Collection"),t===a.LOCATION.user_collections&&(e="User Collections"),t===a.LOCATION.user_canvas&&(e="User Canvas"),t===a.LOCATION.discover&&(e="Discover"),t===a.LOCATION.other&&(e="Other"),e},$((function(){$("[data-click-event-category]").click((function(e){var t=e.currentTarget.dataset;d.trackEvent(t.clickEventCategory,t.clickEventAction||"Click",t.clickEventLabel,t.clickEventValue)})),$("[data-view-event-category]").each((function(){var e=this.dataset;d.trackEvent(e.viewEventCategory,e.viewEventAction||"View",e.viewEventLabel,e.viewEventValue)}))}))}}),this.require.define({"modules/lib/ujs_cors":function(e,t,i){i.exports=function(e){return this.action=e.attr("action"),this.method=e.attr("method"),this.form=e,e.on("submit",n.bind(this)),e};var n=function(){var e=this.form;$.ajax({url:this.action,data:e.serialize(),cache:!1,processData:!1,type:this.method,headers:{"X-Requested-With":"XMLHttpRequest"},success:function(t,i,n){e.trigger("ajax:success",[t,i,n])},error:function(t,i,n){e.trigger("ajax:error",[t,i,n])},complete:function(t,i){e.trigger("ajax:complete",[t,i])},beforeSend:function(t,i){e.trigger("ajax:complete",[t,i])}});return e.trigger("ajax:before"),!1}}}),this.require.define({"modules/lib/verifier":function(e,t,i){i.exports=function(e,t,i,n,o,r){function s(){if(n.empty()||n.equals(c))return n.empty()&&(d.addClass("js-empty").removeClass("valid").removeClass("invalid"),h.hide(),p.hide()),void(null!=n.complete&&n.complete());d.removeClass("js-empty"),c=n.data(),u.abort(),h.removeClass("error"),h.removeClass("success"),h.addClass("ajax"),h.show(),f.show(),f.text(I18n.t("js.verifier.validating")),u=$.getJSON(o,n.data()).success((function(e){if(e.errors&&e.errors.username){if(d.removeClass("valid").addClass("invalid"),h.addClass("error"),p.show(),p.html(e.errors&&e.errors.username.join("; ")),e.suggested_username){var t=$('<a href="#">'+e.suggested_username+"</a></div>");m.html(I18n.t("js.verifier.suggested_username")+": ").append(t).show(),t.click((function(t){t.preventDefault(),d.val(e.suggested_username).trigger("change"),h.hide(),m.hide()}))}}else p.hide(),h.addClass("success"),d.removeClass("invalid").addClass("valid"),f.text(I18n.t("js.verifier.valid"))})).complete((function(){f.hide(),h.removeClass("ajax"),null!=n.complete&&n.complete()}))}function a(){clearTimeout(l),l=setTimeout(s,r)}var l;void 0===o&&(o="/users/validate"),void 0===r&&(r=1e3),this.verify=s;var c,u={abort:function(){}},d=$(e),h=$(t),f=h.find(".js-username-spinner"),p=$(".js-username-error"),m=$(i);d.on("keyup blur change input",a)}}}),this.require.define({"modules/lib/view":function(e,t,i){var n=i.exports=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this};n.prototype.matchRoute=function(){return!1},n.prototype.rebindEvents=function(){this.events&&this.events.length&&(o(this.events,"off"),o(this.events,"on"))},n.prototype._init=function(){this.events&&this.events.length&&o(this.events,"on"),"function"==typeof this.init&&this.init.apply(this,arguments)},n.prototype._teardown=function(){this.events&&this.events.length&&o(this.events,"off"),"function"==typeof this.teardown&&this.teardown.apply(this,arguments)},n.loadView=function(e){$.publish("whi:load_view",Array.prototype.slice.call(arguments))},n.unloadView=function(e){$.publish("whi:unload_view",e)};var o=function(e,t){(e||[]).forEach((function(e){var i=e.slice(1),n=e[0];"subscribe"==n?"on"==t?$.subscribe.apply($,i):$.unsubscribe.apply($,i):$.fn[t].apply($(n),i)}))}}}),this.require.define({"modules/lib/whi_history":function(e,t,i){var n=i.exports={},o=n.enabled=window.history&&window.history.pushState,r=!1,s=!("state"in window.history),a=window.location.href.replace(/#.+/,""),l=window.location.href.replace(/#.+/,""),c=0,u=!1;n.init=function(){if(!r){r=!0,s&&this.replaceState({link:a});var e=window.onpopstate;window.onpopstate=function(){h.apply(this,arguments),"function"==typeof e&&e.apply(this,arguments)}}},n.pushState=function(e){if(!o)return window.location=e.link;window.history.pushState(e,e.link,e.link),d(e),c++,$.publish("whiHistory:push",e)},n.replaceState=function(e){if(!o)return!1;d(e),$.publish("whiHistory:replace",e)},n.returnToTop=function(){c>0&&window.history.go(-c),u=!0;var e="object"==typeof l?l:{link:l};n.replaceState(e),c=0},n.cancelPop=function(){if(!o)return!1;var e=n.previousState;window.history.replaceState(e,e.link,e.link),d(e)},n.setTop=function(){l=n.currentState?n.currentState:{link:window.location.href},c=0};var d=function(e){if(!o)return!1;n.previousState=n.currentState,n.currentState=e,window.history.replaceState(e,e.link,e.link)},h=function(e){var t=e.state;t&&(s&&0==c||(d(t),c--,t.cancellable=!u,u=!1,$.publish("whiHistory:pop",t)))};n.init()}}),this.require.define({"modules/utils/anonymous_session":function(e,t,i){var n,o=function(){return{cookie_name:"_weheartit_anonymous_session",maximum_searches_tracked:10,maximum_chars_per_search:50,new_session_data:function(){return{page_views:0,search_count:0,last_searches:[],last_page_view_at:null}},current_pageviews:function(){return this.get_anonymous_session_data().page_views},get_anonymous_session_data:function(){var e=$.cookie(this.cookie_name);return e&&"null"!==e?JSON.parse(e):this.new_session_data()},set_anonymous_session_data:function(e){$.cookie(this.cookie_name,JSON.stringify(e),{path:"/"})},track_anonymous_session:function(){var e=this;setTimeout((function(){var t=e.get_anonymous_session_data();t.page_views+=1,t.last_page_view_at=(new Date).getTime(),e.set_anonymous_session_data(t);var i=e;$(document).ready((function(){i.track_image_searches()}))}),1e3)},track_image_searches:function(){var e=$("#image-search-form");if(e.length){var t=this;e.submit((function(){var e=t.get_anonymous_session_data();return e.last_searches.unshift($("#text").val().substr(0,t.maximum_chars_per_search)),e.last_searches=e.last_searches.slice(0,t.maximum_searches_tracked),e.search_count+=1,t.set_anonymous_session_data(e),!0}))}}}};i.exports=function(){return n||(n=o())}}}),this.require.define({"modules/utils/logger":function(e,t,i){var n=!!t("../lib/config").updateCache().dev_mode,o=[],r=window.logger=i.exports={printStack:function(){var e;for(this.verbose=!0;e=o.shift();)e.length&&s.apply(null,e);this.verbose=n},verbose:n},s=function(e,t){r.verbose?console[e].apply(console,t):o.push([e,t])};for(var a in console)r[a]=function(){s(this.type,arguments)}.bind({type:a})}}),this.require.define({"modules/utils/slug":function(e,t,i){i.exports=function(e){e=e.replace(/^\s+|\s+$/g,"");for(var t="\xe0\xe1\xe4\xe2\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf2\xf3\xf6\xf4\xf9\xfa\xfc\xfb\xf1\xe7\xfd\xff\xb7/-,:;",i="aaaaeeeeiiiioooouuuuncyy______",n=0,o=t.length;n<o;n++)e=e.replace(new RegExp(t.charAt(n),"g"),i.charAt(n));return e=e.replace(/[^A-Za-z0-9 _]/g,"").replace(/\s+/g,"_").replace(/_+/g,"_")}}}),this.require.define({"modules/utils/storage":function(e,t,i){i.exports={enabled:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},store:function(e,t){return!!this.enabled()&&(localStorage[e]=JSON.stringify(t),t)},get:function(e){if(this.enabled())try{return JSON.parse(localStorage[e])}catch(e){return}},add:function(e,t){var i=this.get(e)||[];return-1==$.inArray(t,i)&&(i.push(t),this.store(e,i)),i},shift:function(e){var t=this.get(e)||[];return t.shift(),this.store(e,t),t},delete:function(e){this.enabled()&&localStorage.removeItem(e)}}}}),this.require.define({"modules/utils/ua-parser":function(e,t,i){!function(t,n){"use strict";var o="",r="?",s="function",a="undefined",l="object",c="major",u="model",d="name",h="type",f="vendor",p="version",m="console",g="mobile",v="tablet",b={has:function(e,t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())}},w={rgx:function(){for(var e,t,i,o,r,c,u,d=0,h=arguments;d<h.length;d+=2){var f=h[d],p=h[d+1];if(typeof e===a)for(o in e={},p)typeof(r=p[o])===l?e[r[0]]=n:e[r]=n;for(t=i=0;t<f.length;t++)if(c=f[t].exec(this.getUA())){for(o in p)u=c[++i],typeof(r=p[o])===l&&r.length>0?2==r.length?e[r[0]]=r[1]:3==r.length&&(typeof r[1]!==s||r[1].exec&&r[1].test?e[r[0]]=u?u.replace(r[1],r[2]):n:e[r[0]]=u?r[1].call(this,u,r[2]):n):e[r]=u||n;break}if(c)break}return e},str:function(e,t){for(var i in t)if(typeof t[i]===l&&t[i].length>0){for(var o in t[i])if(b.has(t[i][o],e))return i===r?n:i}else if(b.has(t[i],e))return i===r?n:i;return e}},y={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",RT:"ARM"}}}},_={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[d,p,c],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[d,"Opera"],p,c],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt)\/((\d+)?[\w\.-]+)/i],[d,p,c],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[d,"Yandex"],p,c],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[d,/_/g," "],p,c],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[d,p,c],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[d,"Dolphin"],p,c],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[d,"Chrome"],p,c],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[p,c,[d,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[p,c,d],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[d,[c,w.str,y.browser.oldsafari.major],[p,w.str,y.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[d,p,c],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[d,"Netscape"],p,c],[/(swiftfox)/i,/(iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[d,p,c]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[u,f,[h,v]],[/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[f,u,[h,v]],[/\((ip[honed]+);.+(apple)/i],[u,f,[h,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[f,u,[h,g]],[/\((bb10);\s(\w+)/i],[[f,"BlackBerry"],u,[h,g]],[/android.+((transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+))/i],[[f,"Asus"],u,[h,v]],[/(sony)\s(tablet\s[ps])/i],[f,u,[h,v]],[/(nintendo)\s([wids3u]+)/i],[f,u,[h,m]],[/((playstation)\s[3portablevi]+)/i],[[f,"Sony"],u,[h,m]],[/(sprint\s(\w+))/i],[[f,w.str,y.device.sprint.vendor],[u,w.str,y.device.sprint.model],[h,g]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[f,[u,/_/g," "],[h,g]],[/\s((milestone|droid[2x]?))[globa\s]*\sbuild\//i,/(mot)[\s-]?(\w+)*/i],[[f,"Motorola"],u,[h,g]],[/android.+\s((mz60\d|xoom[\s2]{0,2}))\sbuild\//i],[[f,"Motorola"],u,[h,v]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9))/i],[[f,"Samsung"],u,[h,v]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[f,"Samsung"],u,[h,g]],[/(sie)-(\w+)*/i],[[f,"Siemens"],u,[h,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[f,"Nokia"],u,[h,g]],[/android\s3\.[\s\w-;]{10}((a\d{3}))/i],[[f,"Acer"],u,[h,v]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[[f,"LG"],u,[h,v]],[/((nexus\s4))/i,/(lg)[e;\s-\/]+(\w+)*/i],[[f,"LG"],u,[h,g]],[/(mobile|tablet);.+rv\:.+gecko\//i],[h,f,u]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]+).*(gecko)/i],[p,d]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[d,[p,w.str,y.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[d,"Windows"],[p,w.str,y.os.windows.version]],[/\((bb)(10);/i],[[d,"BlackBerry"],p],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[d,p],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[d,"Symbian"],p],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[d,"Firefox OS"],p],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[d,p],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(sunos)\s?([\w\.]+\d)*/i],[[d,"Solaris"],p],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[d,p],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[d,"iOS"],[p,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[d,[p,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[d,p]]},x=function(e){var i=e||(t&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:o);if(!(this instanceof x))return new x(e).getResult();this.getBrowser=function(){return w.rgx.apply(this,_.browser)},this.getDevice=function(){return w.rgx.apply(this,_.device)},this.getEngine=function(){return w.rgx.apply(this,_.engine)},this.getOS=function(){return w.rgx.apply(this,_.os)},this.getResult=function(){return{browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this.setUA(i)};if(typeof e!==a)typeof i!==a&&i.exports&&(e=i.exports=x),e.UAParser=x;else if(t.UAParser=x,typeof define===s&&define.amd&&define((function(){return x})),typeof t.jQuery!==a){var k=t.jQuery,$=new x;k.ua=$.getResult(),k.ua.get=function(){return $.getUA()},k.ua.set=function(e){$.setUA(e);var t=$.getResult();for(var i in t)k.ua[i]=t[i]}}}(this)}}),this.require.define({"modules/utils/utils":function(e,t,i){var n=t("../lib/config"),o=t("../views/modal"),r=i.exports={};r.prompt_helper={prompt_showed:!1,is_any_prompt_showed:function(){return this.prompt_showed},track_prompt_show:function(){this.prompt_showed=!0}},r.uniqueUserId=function(){var e=(/__utma=[0-9]+\.([0-9]+)/g.exec(document.cookie)||[])[1],t=(/__whsp=([\w]+)/g.exec(document.cookie)||[])[1];return n.user_id||t||e},r.forEachSeries=r.eachSeries=function(e,t,i){if(i=i||function(){},!e.length)return i();var n=0,o=function(){t(e[n],n,(function(){if(++n<e.length)return o();i()}))};o()},r.isTouch=function(){return"ontouchstart"in window||"onmsgesturechange"in window},r.canvasSupported=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},r.render404AjaxErrorBox=function(){return'<div style="padding: 8px 16px;"><h3>'+I18n.t("js.errors.not_found")+"</h3></div>"},r.render5xxAjaxErrorBox=function(){return'<div style="padding: 8px 16px;"><h3>'+I18n.t("js.errors.server_error")+"</h3></div>"},r.uniqueAnalyticsLabel=function(){return(new Date).getTime()+"-"+Math.round(1e9*Math.random())},r.ajaxErrorBox=function(e){return e.status>=500?r.render5xxAjaxErrorBox():404==e.status?r.render404AjaxErrorBox():e.responseJSON?e.responseJSON.error?'<div style="padding: 8px 16px;">'+e.responseJSON.error+"</div>":r.render5xxAjaxErrorBox():e.responseText},r.defaultAjaxErrorCallback=function(e){$("#notice").find("p").html(r.ajaxErrorBox(e)),$("#notice").show()},r.showAjaxErrorModalCallback=function(e){var t=r.ajaxErrorBox(e);t.includes("modal-element")||(errorMessage=t,t='<div class="modal-element"><div class="panel text-center" style="margin-top:-10px; margin-right:-8px;">',t+='<a href="#" class="btn btn-link position-top-right text-big text-gray js-modal-close">&times;</a>',t+='<div class="text-danger-dark push-around-1em">'+errorMessage+"</div>",t+="</div></div>"),o.load(t)},r.titleCase=function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()},r.positionFloatingWindow=function(e){if($(window).height()<e.height()+140){var t=window.innerHeight/2-e.clientHeight/2;e.css("top",(t>0?t:30)+$(window).scrollTop()+"px"),e.css("position","absolute")}else e.css("top","100px"),e.css("position","fixed")},r.parseQueryParams=function(e){var t=document.createElement("a");return t.href=e,t.search.replace("?","").split(/&/).reduce((function(e,t){return e[t.split("=")[0]]=t.split("=")[1],e}),{})}}}),this.require.define({"modules/views/actions/add_image":function(e,t,i){function n(e){e.activator=document.activeElement,r(document).forEach((function(t){e.contains(t)||(t.dataset.saveTabIndex=t.getAttribute("tabindex"),t.setAttribute("tabindex",-1))})),modalFocusables=null}function o(e){r(document).forEach((function(e){var t=e.dataset.saveTabIndex;delete e.dataset.saveTabIndex,t&&e.setAttribute("tabindex",t)})),e.activator&&(e.activator.focus(),
delete e.activator)}function r(e){return e.querySelectorAll("a[href], area[href], button, input:not([type=hidden]), select, textarea, iframe, [tabindex], [contentEditable=true]")}var s=t("../../lib/config"),a=t("../../lib/routes"),l=t("../../lib/view"),c=t("../../lib/tracking"),u=t("../../lib/lightbox"),d=t("../../views/recaptcha"),h=t("../../views/modal"),f=i.exports=new l,p=f.reset=function(){$(".error").removeClass("showing").hide(),k=null,C=[],m=null,g=null};f.matchRoute=function(){return!0};var m,g,v=240,b=200,w=380,y=/^(?:image\/(?:x-)?(?:gif|p?jp(?:e|g|eg)|png|tiff))$/i,_=1e7,x={lines:"11",length:"2",width:"8",radius:"30",corners:"1.0",rotate:"0",trail:"42",speed:"1.1",direction:"1",hwaccel:"on"},k=!1,C=[],j=!1;f.teardown=function(){this.reset()},f.init=function(){if(!j){j=!0,$("<img/>")[0].src=s.pink_snake_loader_path;var e=/add_([^=]+)=?([^&]+)?/,t=(window.location.search||"").match(e);if(t||(t=(window.location.hash||"").match(e)),t)if("image"!=t[1])F(t[1]);else{var i={},n=decodeURIComponent(t[2]);try{n=(i=JSON.parse(n)).url}catch(e){i.url=n}i.url?I(i):F("upload")}}};var S=function(e){13==e.keyCode&&$(".upload-url-button").trigger("click")},T=function(e){e&&e.preventDefault(),window.location.hash="",$.publish("whi:lightbox:close")},A=function(){if(f.reset(),!$(".upload-info").is(":hidden")){var e={duration:w,queue:!1,complete:function(){$(this).removeAttr("style")}};$(".url-images,.url-box,.upload-box").show().each((function(){var t=$(this).height();$(this).css({height:0,opacity:0}).animate({height:t,opacity:1},e)})),$(".upload-info").animate({opacity:0,height:0},e),l.unloadView("actions/new_entry_form"),$(".back-arrow").hide()}},I=function(e){F("image",(function(){var t="upload"==e.via;if(t)return F("upload");B(e.url,e.title||"",t,(function(){for(var t in e)e.hasOwnProperty(t)&&"url"!=t&&$('[name="'+t+'"]').val(e[t])}))}))},E=function(e){c.trackGAEvent("AddImage","Error: "+e),$(".upload-info .error").addClass("showing").slideDown().find(".error_message").html(e)},P=function(){O(),c.trackGAEvent("AddImage","ClickedUpload"),F("upload")},D=function(){O(),c.trackGAEvent("AddImage","ClickedAddByUrl"),F("url")},N=function(e){e&&e.preventDefault(),$("#addimages").show().attr("aria-hidden","false"),n($("#addimages")[0])},O=function(e){e&&e.preventDefault(),$("#addimages").hide().attr("aria-hidden","true"),o($("#addimages")[0])},F=function(e,t){if(!k){k=!0,u.showLoader();var i=$.ajax({url:"/upload/add/"+("image"==e?"upload":e)});i.done((function(i){u.loadContent(i),0===$("#lightbox").find(".js-entry-container").length&&(window.location.hash="#add_"+e),t&&t()})),i.fail((function(){if($("#lightbox").hide(),403==i.status&&!/add_/.test(window.location.hash))return $.publish("whi:anonymous_upload",{done:a.currentUrl()+"#add_"+e})})),i.always((function(){k=!1,u.hideLoader()}))}},R=function(e){e&&e.preventDefault();var t=$(".upload-url-field").val();/\w+(\.\w+)+\/?/.test(t)&&($(".url-images").append('<div id="image-loader">'),$(".icon-globe").css({"background-image":'url("/assets/pink_snake_loader.gif")',"background-position":"6px 3px"}),$.ajax({url:"/upload/images?url="+encodeURIComponent(t)}).done((function(e){$(".upload-none-found").hide();var t=$(".url-images").html(e).css("height",0),i=t.find("img"),n=i.length,o=!1,r=function(e){(--n>=0||e)&&!o&&($(".url-images").removeAttr("style").hide().slideDown(w),o=!0,""!==$(".upload-info").find(".error").text()&&setTimeout((function(){$(".upload-info").show(),$(".upload-info").find(".error").show()}),w+100)),(n<=0&&0==$(".upload-image-container .upload-image").length||e)&&$(".upload-none-found").fadeIn(200),(n<=0||e)&&$(".icon-globe").removeAttr("style")};if(t.find("li").hide(),!i.length)return r(!0);$(".upload-info").find(".error").text(""),i.load((function(){var e=$(this),i=e.closest("li").show(),n=[e.width(),e.height()];n[0]<v||n[1]<b?($(".upload-info").find(".error").text(I18n.t("js.new_entry.images_too_small",{min_width:v,min_height:b})),i.remove()):t.append(i.hide().fadeIn(200)),r()})).error((function(){$(this).closest("li").remove(),r()}))})))},q=function(){var e=$(this).find(".upload-image > img");$(".upload-info").hide(),$(".upload-info").find(".error").hide(),B(e.attr("src"),e.attr("data-title"),!1)};addUploadFile=function(){var e,t=this.files[0];if(t.name.length<1)return!1;if(!y.test(t.type))return $(".upload-error.type").slideDown(),!1;if(t.size>_)return $(".upload-error.size").slideDown(),!1;try{var i=new FileReader;i.onload=(e=t,function(t){var i=new FormData(document.getElementById("upload_file"));B(t.target.result,e.name,i)}),i.readAsDataURL(t)}catch(e){$(".upload-error.support").slideDown(),$("#fileupload").prop("disabled",!0)}};var L=function(e){if(!m)return C.push(e||function(){});e&&e(),C.forEach((function(e){e()})),C=[]},H=function(e,t){return this.calledFrom&&"showUploadResult"==this.calledFrom?("string"!=typeof e&&(t=e,e="url"),!t||!t.error&&t.entry_id?(c.trackGAEvent("AddImage","upload"==e?"CompletedAddImageUpload":"CompletedAddImageUrl"),$('.share-toggle-container [type="checkbox"]').each((function(){var e=$(this);if(e.is(":checked")){var t=e.is('[name="share_facebook"]')?"facebook":e.is('[name="share_twitter"]')?"twitter":e.is('[name="share_tumblr"]')?"tumblr":null;c.trackSocial(t,"shareEntry")}})),void setTimeout((function(){window.location=a.entry_path(t.entry_id)+window.location.search}),150)):E(t.error||"No Entry ID returned.")):L(H.bind({calledFrom:"showUploadResult"},e,t))},M=function(e){h.load(e);var t=h.container().find(".js-captcha-form");t.find("name=[ajax_upload]").val(""),t.submit((function(e){e.preventDefault(),t.find("button[type=submit]").attr("disabled","disabled"),$.ajax({url:t[0].action,data:t.serialize(),success:function(){window.location.href="/current_user"},error:function(e){e.responseText.indexOf("js-captcha-form")>0?M(e.responseText):alert('<div class="modal-element"><div class="text-center panel">'+I18n.t("js.errors.server_error")+"</div></div>")}})}))},W=function(e,t){if(g="failed",!this.calledFrom||"showUploadResult"!=this.calledFrom)return L(W.bind({calledFrom:"showUploadResult"},e,t));e.responseText.indexOf("js-captcha-form")>0?(T(),M(e.responseText)):E(I18n.t("js.add_image.unknown_error"))},U=function(){if("success"!=g&&(g="failed"),!this.calledFrom||"showUploadResult"!=this.calledFrom)return L(U.bind({calledFrom:"showUploadResult"}));$('.upload-form [type="submit"]').removeClass("disabled").removeAttr("disabled"),$("#upload-entry-loading").remove(),$(".upload-progress-spinner").spin(!1),$(".upload-current .status, .upload-progress").hide()},B=function(e,t,i,n){$(".back-arrow").show(),$(".url-images,.url-box,.upload-box").animate({height:0,opacity:0},w,(function(){$(this).removeAttr("style").hide()})),$(".upload-info").slideDown(w);var o="/upload/form?original-title="+t+"&encoding=UTF-8";via=$(".upload-images").attr("data-url"),via&&(o+="&via="+encodeURIComponent(via)+"&hearting_method=url"),i||(o+="&media="+encodeURIComponent(e)),$.ajax({url:o}).done((function(t){$img=$(".thumb-tmp");var o=$(".upload-form").html(t).attr("data-username");$(".thumb-tmp").attr("src",e),$(".thumb-tmp").on("load",(function(){EXIF.fixOrientation(this,{element:$(".thumb-mask"),callback:function(t){if(t.hasClass("rotated")){var i=(t[0].width-t[0].height)/2+"px";t.css("margin-top",i),t.children().hide()}else t.css("margin-top","");$(".thumb-mask").css("background-image","url('"+e+"')"),l.loadView("actions/new_entry_form",o,$(".upload-form"),!0),n&&n()}})})),i&&z(i)}))},z=function(e){g="uploading";var t=$("#create-entry-form"),i=t.data("meat-url");$.ajax({url:i,data:e,xhr:function(){return myXhr=$.ajaxSettings.xhr(),myXhr.upload&&myXhr.upload.addEventListener("progress",G,!1),myXhr},cache:!1,contentType:!1,processData:!1,type:"POST",success:function(e){g="success",t.find('[name="media"]').remove(),Object.keys(e).forEach((function(i){var n=e[i];t.append('<input type="hidden" name="media['+i+']" value="'+n+'"/>')}));t.find('[name="via"]').val("upload");m&&V(H)},error:W,complete:U})},G=function(e,t){if(m){var i=parseInt(t.loaded/t.total*100,10);$(".upload-progress").show().css({width:i+"%"}),i<100?($(".uploading-message").show(),$(".processing-message").hide()):($(".uploading-message").hide(),$(".processing-message").show())}},X=function(e,t){g&&g.length&&($(".upload-progress-spinner").spin($.extend($.extend({},x),{color:"#fff",radius:11,width:5,length:5,shadow:!0})),e=e.bind(null,"upload"));var i=$("#create-entry-form"),n=$.ajax({url:i.attr("action"),type:i.attr("method"),data:i.serializeArray().concat([{name:"ajax_upload",value:"true"},{name:"g-recaptcha-response-data",value:t}])});n.done(e),n.fail(W),n.always(U)},V=function(e){d.execute("upload",(function(t){X(e,t)}))},Q=function(){if(m)return!1;m=!0,$(".error").removeClass("showing").slideUp();var e=$(this);return $(this).after('<div id="upload-entry-loading">'),e.addClass("disabled").attr("disabled","disabled"),"failed"==g?L():("uploading"==g||V(H),!1)},Y=function(e,t){var i=$(".js-selected-collections");i.empty(),t.selectedIds.each((function(e,t){i.append('<input type="hidden" name="set[]" value="'+t+'">')}))};f.events=[["#addimages","click",".js-add-from-url",D],["#addimages","click",".js-upload-image",P],["subscribe","whi:collections_selected",Y],["#lightbox","change","#fileupload",addUploadFile],["#lightbox","click",".upload-url-button",R],["#lightbox","keyup",".upload-url-field",S],["#lightbox","click",".upload-image-container",q],["#lightbox","click",".close-button",T],["#lightbox","click",".back-arrow",A],["#lightbox","click",'.upload-form [type="submit"]',Q],["subscribe","lightbox:closed",p],[".js-add-images","click",N]]}}),this.require.define({"modules/views/actions/heart_success":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/tracking"),r=i.exports=new n;r.matchRoute=function(){return $("#heart-success-view").length},r.init=function(){var e=$("#heart-success-view");["facebook","twitter","tumblr"].forEach((function(t){"true"==e.attr("data-"+t+"-shared")&&o.trackSocial(t,"shareEntry")})),setTimeout((function(){window.close()}),3e3)}}}),this.require.define({"modules/views/actions/new_entry_form":function(e,t,i){var n,o,r,s,a,l=t("../../lib/routes"),c=t("../../lib/tracking"),u=t("../../lib/crop"),d=t("../../lib/view"),h=i.exports=new d,f=!1;h.init=function(e,t,i){t=this.container=t||$("body");C(),e,i&&$("[data-referurl]").each((function(){$(this).attr("data-referurl",window.location.href.replace(/#.+/,""))})),n=t.find("select[name=set]"),o=t.find("input[name=new_set]"),r=t.find("#create_new_set"),s=t.find("input[name=title]"),r.click(m),o.keydown(g),o.blur(b),k.call($('[name="share_tumblr"]'),!0),"false"==$("#create-entry-form").attr("data-persisted")&&(a=new u($(".thumb-mask"),$(".thumb-tmp"),$("form.stacked-form")))},h.teardown=function(){r.off("click",m),o.off("keydown",g),o.off("blur",b),a&&(a.teardown(),a=null)},h.matchRoute=function(){return $("#create-entry-form").length};var p=function(){return s.val().match(/^\s*$/)?(s.val(""),s.attr("placeholder",I18n.t("js.new_entry.add_title")),!1):(f&&c.trackGAEvent("Post Image","CropAdjusted"),c.trackGAEvent("Post Image","Posted"),!0)},m=function(e){e.preventDefault(),_()},g=function(e){if(13===e.keyCode)return o.attr("disabled","disabled"),w(),!1;27===e.keyCode&&_()},v=function(e){var t;[].forEach.call(n[0].options,(function(i){t=i.textContent===e.name&&i.value})),e.id&&y(e),n.val(e.id||t),_()},b=function(){""!==o.val()?(o.attr("disabled","disabled"),w()):_()},w=function(){$.ajax({type:"post",url:l.create_entry_set_path(),data:{entry_set:o.val()},success:function(e){v(e)},error:function(){_()}})},y=function(e){document.createElement("option");n.append($("<option>",{value:e.id}).text(e.name)),n.val(e.id)},_=function(){n.is(":visible")?(n.hide(),o.removeAttr("disabled","false"),o.show().focus()):(n.show(),o.hide(),o.val(""),s.focus())},x="_weheartit_default_shares",k=function(e){var t,i=$(this);i.is('[name="share_tumblr"]')?(setTimeout((function(){$.fn[i.is(":checked")?"slideDown":!0===e?"slideUp":"hide"].call($(".tumblr_blog_container"),200,"swing")}),90),t="tumblr"):i.is('[name="share_facebook"]')?t="facebook":i.is('[name="share_twitter"]')&&(t="twitter");var n={twitter:$('[name="share_twitter"]').is(":checked"),facebook:$('[name="share_facebook"]').is(":checked"),tumblr:$('[name="share_tumblr"]').is(":checked"),tumblr_blog:$("select.tumblr_blog").val()};if($.cookie(x,JSON.stringify(n)),!0!==e&&i.is(".unlinked")&&i.attr("data-linkurl")){var o={url:$('[name="media"]').val(),via:$('[name="via"]').val(),title:$('[name="title"]').val(),set:$('[name="set"]').val(),tags:$('[name="tags"]').val()},r=l.mergeQueryParams(i.attr("data-referurl")||window.location.href.replace(/#.+/,""),"add_image="+encodeURIComponent(JSON.stringify(o))),s=l.mergeQueryParams(i.attr("data-linkurl"),"referer="+encodeURIComponent(r));c.trackSocial(t,"link"),window.location=s}},C=function(){var e=$.cookie(x);if(e){var t={};try{t=JSON.parse(e)}catch(e){}for(var i in t)if(t.hasOwnProperty(i)){if(!0===t[i]){var n=$('[name="share_'+i+'"]');n.is(".unlinked")||n.prop("checked",!0)}"tumblr_blog"==i&&$("select.tumblr_blog").val(t[i])}}},j=function(){$.unsubscribe("whi:crop:dragging",j),f=!0};h.events=[["form","change",'.share-toggles [type="checkbox"], select.tumblr_blog',k],["form","submit",p],["subscribe","whi:crop:dragging",j]]}}),this.require.define({"modules/views/actions/new_entry_form_sign_in":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#login-form,#sign-in").length},o.init=function(){};o.events=[]}}),this.require.define({"modules/views/actions/too_many_tags":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#too_many_tags").length};var r=function(){return s($(this).parent("li")),!1},s=function(e){var t=$("#tags_form ul.tag-list");e.remove();var i=t.children("li").size();$("#tag_count").html(String(i)),i<=8&&($("#resubmit_entry")[0].disabled=!1)},a=function(){$("#reenter_tags").hide(),$("#tags_form ul.tag-list").hide(),$("#tags_form").prepend('<p><textarea name="tags" rows="4" cols="60"></textarea></p>');var e=$("#tags_form textarea")[0],t="";$("#tags_form li input[type=hidden]").each((function(){t+=$(this).val()+", "})),$("#tags_form ul.tag-list").remove(),e.value=t.substring(0,t.length-2),$("#resubmit_entry")[0].disabled=!1};o.events=[[".remove-excess-tag","click",r],["#reenter_tags","click",a]]}}),this.require.define({"modules/views/activation":function(e,t,i){"use strict";var n=t("../lib/view"),o=t("../utils/utils"),r=t("../lib/tracking"),s=i.exports=new n;s.matchRoute=function(){return $(".js-activation").length},s.init=function(){r.trackGAEvent("Activation","LoadedActivation")};var a=function(e){e.preventDefault(),$(".js-activation").hide(),$(".full-spinner").spin(p),$.get($(this).prop("href")).done((function(e){$(".js-activation").html($(".js-activation","<div>"+e+"</div>").html()),$(".entry-thumbnail").first().on("load",(function(){var e=$(this).height();$(".entry-thumbnail").each((function(){$(this).css("height",e)}))})),$.publish("whi:content_updated"),r.trackGAEvent("Activations","LoadCollection")})).fail(o.defaultAjaxErrorCallback).always((function(){$(".js-activation").fadeIn(100),$(".full-spinner").spin(!1)}))},l=function(e){e.preventDefault();var t=$(this).closest("form");$(".js-modal-container").length?($(".js-modal-container").show().attr("aria-hidden","false"),$.subscribe("whi:modal:close",d.bind(null,t))):f(t)},c=function(){var e=$(".js-entries .js-selectable.is-selected").length<3;$(".js-collection-submit").toggleClass("btn-is-disabled",e),$(".js-collection-submit").prop("disabled",e);var t=$(".js-collection-submit"),i=e?t.attr("data-disabled-message"):t.attr("data-ready-message");t.val(i)},u=function(){$(this).select(),r.trackGAEvent("Activations","SelectedLink")},d=function(e){var t=e.attr("data-prompt-value"),i=e.find("input[name=collection_name]");i.val(i.val().replace(/%{.+?}/,t)),0===$(".modal-element").length&&f(e)},h=function(){var e=$(this),t=e.val().trim();e.closest(".modal-element").find(".js-modal-close").toggleClass("btn-is-disabled",!t),$("form").attr("data-prompt-value",t)},f=function(e){$(".js-activation").hide(),$(".full-spinner").spin(p);var t={entry_ids:e.find("input[type=checkbox]").toArray().filter((function(e){return $(e).prop("checked")})).map((function(e){return $(e).val()})),collection_name:e.find("input[name=collection_name]").val(),activation_collection_id:e.find("input[name=activation_collection_id]").val()};$.post(e.prop("action"),t).done((function(e){$(".js-activation").html($(".js-activation","<div>"+e+"</div>").html()),$.publish("whi:content_updated"),r.trackGAEvent("Activations","LoadedDone")})).fail(o.defaultAjaxErrorCallback).always((function(){$(".js-activation").fadeIn(100),$(".full-spinner").spin(!1)}))},p={lines:"11",length:"2",width:"8",radius:"30",corners:"1.0",rotate:"0",trail:"42",speed:"1.1",direction:"1",hwaccel:"on"};s.events=[[".js-activation","click",".js-collection-link",a],[".js-activation","click",".js-collection-submit",l],[".js-activation","changed",".js-selectable",c],[".js-activation","click",".js-link",u],[".js-activation","keyup",".js-prompt-value",h]]}}),this.require.define({"modules/views/admin_tools":function(e,t,i){function n(e){e.preventDefault(),$(".admin-tools").each((function(){var e=$(this),t=e.data("url");e.data("url",null),e.toggle(),t&&$.ajax({url:t,success:function(t){e.html(t),e[0].scrollIntoView&&e[0].scrollIntoView()}})}))}var o=t("../lib/view"),r=i.exports=new o;r.matchRoute=function(){return $(".admin-tools-btn").length>0},r.events=[[".admin-tools-btn","click",n]]}}),this.require.define({"modules/views/article_draft":function(e,t,i){"use strict";function n(){if(c){c=!1;var e={article:{title:s.val(),body:a.val()}},t=a.closest("form").data("articleId");t&&(e.id=t),$.post("/articles/save_draft",e,(function(){console.log("article draft saved")}))}}var o=t("../lib/view"),r=5e3,s=$(".js-article-input-title"),a=$(".js-article-input-body"),l=i.exports=new o;l.matchRoute=function(){return a.length>0};var c=!1,u=function(){c||(c=!0,setTimeout(n,r))};l.events=[[".js-article-input-title","keyup",u],[".js-article-input-body","keyup",u]]}}),this.require.define({"modules/views/article_preview":function(e,t,i){"use strict";var n=t("../lib/view"),o=t("../lib/article"),r=i.exports=new n,s=$(".js-article-input-body"),a=$(".js-article-preview-body");r.matchRoute=function(){return $(".js-article-input-body").length&&$(".js-article-preview-body").length},r.init=function(){p()};var l=function(e){var t=o.parseArticle(s.val(),e,whiConfig.article_features),i=t.body;return a.html(i),t},c=null,u=function(){c&&clearTimeout(c),c=setTimeout(p,800)},d="/",h={},f=function(e){var t=[],i=[],n=[],o=e.references;o&&o.entries&&(t=o.entries.sort()),o&&o.collections&&(i=o.collections.sort()),o&&o.users&&(n=o.users.sort());var r=t.join(",")+"/"+i.join(",")+"/"+n.join(",");return r!=d&&(d=r,!0)},p=function(){var e=l(h);f(e)&&$.ajax({url:"/articles/refs",dataType:"json",data:{references:e.references},success:function(e){h=e,l(e)}})};r.events=[[".js-article-input-body","keyup",u]]}}),this.require.define({"modules/views/banner_join":function(e,t,i){var n=t("../lib/view"),o=t("../utils/utils"),r=t("../lib/routes"),s=i.exports=new n;s.matchRoute=function(){return $(".about-page .banner-join").length},s.init=function(){};var a=function(){$.publish("trackGAEvent",["JumboPromo","iOSClick",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"JumboPromo",action:"iOSClick"}])},l=function(){$.publish("trackGAEvent",["JumboPromo","AndroidClick",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"JumboPromo",action:"AndroidClick"}])},c=function(e){e.preventDefault();var t=$("#email").val().trim();$(".loading").show(),$.ajax({url:r.app_download_email(),dataType:"json",type:"post",data:{email:t},success:u,error:d}),$.publish("trackGAEvent",["JumboPromo","EmailClick",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"JumboPromo",action:"EmailClick"}])},u=function(){$(".loading").hide(),$(".form").hide(),$("#email_success").fadeIn(),setTimeout((function(){$("#email_success").hide(),$(".form").fadeIn("slow")}),5e3)},d=function(){$(".loading").hide(),$(".form").hide(),$("#email_error").fadeIn("fast"),setTimeout((function(){$("#email_error").hide(),$(".form").fadeIn("slow")}),3e3)},h=function(){$.publish("trackGAEvent",["JumboPromo","JoinClick",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"JumboPromo",action:"JoinClick"}])};s.events=[[".banner-join .itunes-link","click",a],[".banner-join .play-link","click",l],[".banner-join","click","#email_send",c],[".banner-join-1 .button","click",h]]}}),this.require.define({"modules/views/block_warning":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#blockwarning").length};var r=function(){$.cookie("__hide_block_warning","1",{expires:365}),$("#blockwarning").slideUp()},s=function(){"1"!==$.cookie("__hide_block_warning")&&$("#blockwarning").slideDown()};o.init=function(){s()},o.events=[[window,"click",".js-close-warning",r]]}}),this.require.define({"modules/views/branchio":function(e,t,i){"use strict";t("../utils/logger");var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return!window.whi_hide_branch&&(window.whiConfig.mobile_site&&!window.whiConfig.user_authenticated)},o.init=function(){}}}),this.require.define({"modules/views/catalog/catalog":function(e,t,i){var n,o=t("../../lib/routes"),r=t("../../lib/view"),s=t("../../lib/whi_history"),a=t("../../lib/tracking"),l=t("../../lib/lightbox"),c=t("../../lib/start_hearting_prompt"),u=t("../../lib/config"),d=(t("../navbar/navbar"),t("../modals/collections_modal")),h=i.exports=new r;h.init=function(){n=$("#main-container").data("title"),c.displayPrompt(),"#facebook-timeline"==window.location.hash&&$("#timeline-enabled-message").slideDown();var e=!!$("body").attr("data-signing_up");u.mobile_site&&e&&a.trackGAEvent("SignUp","SignUp","SignUp"),navigator.userAgent.match(/SAMSUNG|SGH-[I|N|T]|GT-[I|P|N]|SM-[N|P|T|Z]|SHV-E|SCH-[I|J|R|S]|SPH-L/i)&&$(".entry-thumbnail").addClass("samsung_browser")},h.matchRoute=function(){return $(".grid-thumb,.entry-similar,.js-entry-panel,.article-header").length};var f=function(){var e=$(this),t=e.closest("li").attr("class").replace("view-",""),i=e.closest(".entry");return i.hasClass("show-"+t)?i.removeClass("show-"+t):i.addClass("entry show-"+t+" hover"),!1},p=function(){var e=$(this),t=e.closest(".entry"),i=e.data("username");return E(t,"You're now following "+i+"!"),!1},m=function(){var e=$(this).closest(".entry");return e.addClass("entry show-sets hover"),e.find(".call-to-action").length>0&&e.addClass("has-cta"),E(e,I18n.t("js.catalog.image_hearted")),!1},g=function(){var e=$(this).closest(".entry");return e.addClass("entry hover"),E(e,I18n.t("js.catalog.image_unhearted")),!1},v=function(e,t){var i=$(".entry[data-entry-id='"+t.entry+"']");return E(i,t.$message&&t.$message.text()||""),!1},b=function(){var e=$(this).closest(".entry"),t=e.find(".sets-window"),i=e.find(".call-to-action");return t.length>0?(t.fadeIn(300),a.trackGAEvent("Set","OpenCollectionSelector","EntryCatalog"),i.length&&i.addClass("hide")):(e.addClass("entry show-sets hover"),i.removeClass("hide")),!1},w=function(){$(this);var e=$(this).parent(),t=$(".call-to-action");return e.fadeOut(300),$(".entry-hover-heart").fadeIn(300),t.removeClass("hide"),!1},y=function(){var e=$(this),t=e.find(".entry-hover.sets-window"),i=$(".call-to-action");return e.addClass("entry"),e.find(".heart").stop(!0,!0).fadeOut(),t.fadeOut(300),$(".entry-hover-heart").fadeIn(300),i.removeClass("hide"),!1},_=function(e,t,i){var n=i.data("trackingUrl"),o=i.data("adsNativeSid");$.publish("whi:setted",{id:e,collection:t,adsNativeTrackingUrl:n,adsNativeSID:o})},x=function(){var e=$(this),t=e.closest(".entry"),i=t.data("entry-id"),n=e.val();e.is(":checked")?""!==n&&($.ajax({type:"post",url:o.set_path(i),data:{entry_set_id:+n},success:function(o){_(i,n,t),k(t,e,o),a.trackGAEvent("Set","Setted",i)},error:function(){E(t,I18n.t("js.catalog.error_try_again"))}}),a.trackGAEvent("Set","Setted")):$.ajax({type:"delete",url:o.remove_from_set(n),data:{entry_id:+i}}).success((function(){$.publish("whi:unsetted",{id:i,collection:n});var o=I18n.t("js.catalog.removed_from",{from:e.closest("label").text()});E(t,o),a.trackGAEvent("Set","Unsetted",i)})).fail((function(){E(t,I18n.t("js.catalog.error_try_again"))}))},k=function(e,t){E(e,I18n.t("js.catalog.saved_to",{to:t.parent().text()}))},C=function(){var e=$(this),t=e.closest(".entry"),i=e.data("entry"),n=e.val();-1==+n?(e.hide(),t.find(".sets .textfield").focus()):""!==n&&$.ajax({type:"post",url:o.set_path(i),data:{entry_set_id:+n},success:function(o){_(i,n,t),I(t,e,o)},error:function(){E(t,I18n.t("js.catalog.error_try_again"))}})},j=function(e){var t=$(this),i=t.closest(".entry"),n=i.data("entry-id"),r=t.closest(".sets-picker"),s=t.data("username");13===e.keyCode?(t.attr("disabled","disabled"),$.ajax({type:"post",url:o.create_entry_set_with_entry_path(s),data:{entry_id:n,entry_set:t.val()},success:function(e){var o=$(e).find(".set-link").attr("data-set-id");_(n,o,i),D(e,n),S(i,t,r)},error:function(){t.removeAttr("disabled").val(""),E(i,I18n.t("js.catalog.error_try_again"))}})):27===e.keyCode&&t.val("")},S=function(e,t){t.removeAttr("disabled").val(""),E(e,I18n.t("js.catalog.set_created"))},T=function(e){var t=$(this),i=t.closest(".entry"),n=i.data("entry-id"),r=t.closest(".sets").find(".js-selectfield"),s=t.data("username");13===e.keyCode?(t.attr("disabled","disabled"),$.ajax({type:"post",url:o.create_entry_set_with_entry_path(s),data:{entry_id:n,entry_set:t.val()},success:function(e){var o=$(e).find(".set-link").attr("data-set-id");_(n,o,i),A(i,t,r),P(e)},error:function(){t.removeAttr("disabled").val(""),E(i,I18n.t("js.catalog.error_try_again"))}})):27===e.keyCode&&r.show().val(0)},A=function(e,t,i){t.removeAttr("disabled").val(""),E(e,I18n.t("js.catalog.set_created")),i.show().val(0)},I=function(e,t){E(e,I18n.t("js.catalog.saved_to",{to:t.find("option:selected").text()})),t.removeAttr("disabled").val(0)},E=function(e,t){e.find(".feedback").html(t.trim()),e.addClass("show-feedback"),setTimeout((function(){e.removeClass("show-feedback")}),2e3)},P=function(e){var t=$("<div>").append($(e)).find("a:last");t.length>0&&$(".entry .sets .js-selectfield").each((function(){$(this).find("option:last").before('<option value="'+t.data("set-id")+'">'+t.find(".set_name").text()+"</option>")}))},D=function(e,t){var i=$("<div>").append($(e)).find("a:last");i.length>0&&$(".entry .sets-wrapper").each((function(){var e=$(this),n="";e.closest(".entry").data("entry-id")===t&&(n="checked"),e.prepend('<p><label><input type="checkbox" class="checkbox" value="'+i.data("set-id")+'" '+n+">"+i.find(".set_name").text()+"</label></p>")}))},N=function(e){$.xhrPool.abortAll(),$("title").html(e),s.returnToTop()},O=function(e){if($(this).data("article"))return!0;if($(window).width()<=666||$("body").is(".mobile-web"))return!0;if($(this).closest(".no-lightbox").length)return!1;if($(this).closest(".entry-similar").length&&!$(this).closest("#lightbox").length)return!0;if(e.metaKey)return!0;var t=$(this).attr("href"),i=$(this).closest(".entry"),n=i.prev().data("entry-id"),o=i.next().data("entry-id"),r=i.data("context-user-id");if(i.attr("data-promoted-click-tracking-url")){var c=i.attr("data-promoted-click-tracking-url"),u=i.attr("data-third-party-tracking-url");$.publish("whi:adsnative:clicked",{adsNativeTrackingUrl:c,thirdPartyTracking:u})}if(i.data("click-track")){$.publish("whi:promoted:clicked",{entryId:i.data("entry-id")});var d=i.closest(".promoted-wrapper");n=d.prev(".entry").data("entry-id"),o=d.next(".entry").data("entry-id")}if(!s.enabled)return!0;s.setTop(),s.pushState({link:t,view:"entry"}),$.publish("whi:content_update_started");var h=new Date;l.isClosed()&&l.open();var f={prev:n,next:o};""!==r&&(f.context_user=r);var p=$.ajax(t,{data:f,success:function(e,n,o){if("success"==n||"notmodified"==n){var r=$(e),s=$(r.filter("#main-container").html()),c=o.getResponseHeader("X-Page-Path"),u=r.filter("title").html();$("title").html(u);var d=i.data("external-click-track")||"",f=s.find(".original-link, .hub-button, .entry-main-image .entry-holder > a");d.length&&(console.log("External link",f,d),f.attr("href",d),f.attr("target","_blank"));var p=i.data("trackingUrl")||"",m=i.data("adsNativeSid")||"";p.length&&s.find(".entry").attr({"data-tracking-url":p,"data-ads-native-sid":m}),l.loadContent(s,{startTime:h},(function(e){if($(".entry-main").data("paid",!!i.closest(".promoted-wrapper").length),a.trackGAEvent("EntryPage","Open Lightbox"),a.trackPageView(c),e.startTime){var t=new Date;a.trackTiming("Ajax","Lightbox Entry",t-h,window.location.origin),a.trackTiming("New Entry Page","Load Entry on Lightbox",t-h,window.location.origin)}}))}else window.location.href=t}});return $.xhrPool.push(p),!1},F=function(){if($(window).width()<=666||$("body").is(".mobile-web"))return!0;if($(this).closest(".no-lightbox").length)return!1;if($(this).closest(".entry-similar").length&&!$(this).closest("#lightbox").length)return!0;var e=$(this).attr("href"),t=$(this).closest(".entry");if(!s.enabled)return!0;s.setTop(),s.pushState({link:e,view:"entry_group"}),$.publish("whi:content_update_started"),l.isClosed()&&l.open();var i=$.ajax(e,{success:function(i,n){if("success"==n||"notmodified"==n){var o=$(i),r=$(o.filter("#main-container").html()),s=o.filter("title").html();$("title").html(s),r.removeAttr("id");var a=t.data("external-click-track")||"";if(a.length){var c=r.find(".original-link, .hub-button, .entry-main-image .entry-holder > a");c.attr("href",a),c.attr("target","_blank")}l.loadContent(r)}else window.location.href=e}});return $.xhrPool.push(i),!1},R=function(){N(n)},q=function(e,t){var i=$(".entry[data-entry-id='"+t.entry+"'], .article[data-entry-id='"+t.entry+"']"),n=$(".js-add-to-collection[data-entry-id='"+t.entry+"']"),o=i.find(".js-collection-placeholder"),r=$(".js-entry-hover-actions[data-entry-id='"+t.entry+"']"),s=$(".js-entry-hover-collections-select[data-entry-id='"+t.entry+"']"),a=i.find(".js-heart-button");i.hasClass("js-heart-button")&&(a=i),a.addClass("hearted"),a.find(".icon").addClass("icon-hearted"),r.hide(),s.show(),n.show(),o.show(),console.log("hearted triggered"),console.log("$entry",i),console.log("$collectionButton",n),console.log("$collectionButton",n)},L=function(e,t){var i=$(".entry[data-entry-id='"+t.entry+"']"),n=$(".js-add-to-collection[data-entry-id='"+t.entry+"']"),o=i.find(".js-collection-placeholder"),r=$(".js-entry-hover-actions[data-entry-id='"+t.entry+"']"),s=$(".js-entry-hover-collections-select[data-entry-id='"+t.entry+"']"),a=i.find(".js-heart-button");a.removeClass("hearted"),a.find(".icon").removeClass("icon-hearted"),r.show(),s.hide(),n.hide(),o.hide()},H=function(e){e.preventDefault();var t=$(this).attr("data-entry-id"),i=$(".js-entry-hover-actions[data-entry-id='"+t+"']");$(".js-entry-hover-collections-select[data-entry-id='"+t+"']").hide(),i.show()},M=function(){var e=$(this).attr("data-entry-id");return d.openCollectionsModal(e),!1},W=function(){a.trackGridAction("Action Button Tap - Partner CTA",$(this).closest(".entry"))},U=function(e,t){var i=null,n=$(".entry[data-entry-id='"+t.entry+"']"),r=o.where();r===o.LOCATION.entry_details&&(i="Entry Details"),r===o.LOCATION.dashboard&&(i="Home"),r===o.LOCATION.collection_details&&(i="Collection"),r===o.LOCATION.inspiration&&(i="Inspiration"),r===o.LOCATION.user_canvas&&(i="Canvas"),r===o.LOCATION.discover&&(i="Discover"),i&&a.trackGridAction("Heart - "+i,n)},B=function(e,t){var i=$(".entry[data-entry-id='"+t.entry+"']");a.trackGridAction("Unheart",i)};h.events=[[window,"click",".js-entry-detail-link",O],[window,"click",".entry_tabs .opening-tab a",f],[window,"change",".sets .js-selectfield",C],[window,"click",".sets.js-selectfield",b],[window,"click",".edit-set",b],[window,"keyup",".sets .textfield",T],[window,"click",".sets-window .close",w],[window,"click",".sets-picker .checkbox",x],[window,"mouseleave",".entry.show-sets",y],[window,"keyup",".new-set .textfield",j],[window,"heart",".grid-thumb .js-heart-button",m],[window,"unheart",".grid-thumb .js-heart-button",g],[window,"follow",".grid-thumb .js-follow-button",p],["subscribe","lightbox:closed",R],["subscribe","whi:shared",v],["subscribe","whi:hearted",q],["subscribe","whi:hearted",U],["subscribe","whi:unhearted",L],["subscribe","whi:unhearted",B],[window,"click",".view-info > a",F],[window,"click",".js-add-to-collection",M],[window,"click",".call-to-action",W],[window,"click",".js-hide-entry-hover-collections-select",H]]}}),this.require.define({
"modules/views/catalog/vimeo_thumbs":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".vimeo-entry").length};var r=function(e,t){var i=e.attr("data-thumb-id"),n=e.is(".tiny")?"small":"medium";window[t]=function(e){if(e[0]){var o=e[0]["thumbnail_"+n];$("#"+i).attr("src",o),delete window[t]}}};o.init=function(){$(".vimeo-entry").each((function(){var e=$(this).attr("data-video-id"),t=$(this).attr("data-callback");r($(this),t);var i=document.createElement("script");i.type="text/javascript",i.src="//vimeo.com/api/v2/video/"+e+".json?callback="+t,document.body.appendChild(i)}))},o.events=[]}}),this.require.define({"modules/views/click_out":function(e,t,i){"use strict";function n(){var e=$(".js-click-out");e.removeClass("js-click-out"),e.click((function(){if(this.href&&this.href.match(/^http/i)){var e=this.href;o.log("click out: "+e),$.post("/track/click_out",{url:this.href})}}))}var o=t("../utils/logger"),r=t("../lib/view"),s=i.exports=new r;s.matchRoute=function(){return!0};var a=function(){n()},l=!0;s.init=function(){l&&(l=!1,n())},s.events=[["subscribe","whi:content_updated",a]]}}),this.require.define({"modules/views/collaborate":function(e,t,i){function n(e,t,i){e.preventDefault();var n=$(e.target);$.ajax({url:n.attr("href"),type:t,success:function(){n.hide(),i&&n.siblings(i).show()}})}var o=t("../lib/view"),r=(t("../lib/routes"),t("../lib/lightbox")),s=i.exports=new o;s.matchRoute=function(){return!0};var a=function(e){n(e,"POST",".js-collaboration-remove")},l=function(e){e.preventDefault();var t=$(e.target);r.confirm(t.data("prompt"),t.data("explanation"),t.data("ok"),t.data("cancel"),(function(){n(e,"POST",".js-collaboration-add")}))},c=function(e){e.preventDefault();var t=$(e.target);r.confirm(t.data("prompt"),t.data("explanation"),t.data("ok"),t.data("cancel"),(function(){n(e,"POST")}))},u=function(e){e.preventDefault();var t=$(e.target);$.post(t.attr("href"),(function(){t.parent().fadeOut()}))};s.events=[[window,"click",".js-collaboration-response",u],[window,"click",".js-collaboration-add",a],[window,"click",".js-collaboration-remove",l],[window,"click",".js-collaboration-abandon",c]]}}),this.require.define({"modules/views/cookie_acceptance":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n,r="v1";o.matchRoute=function(){return $(".js-cookie-acceptance").length},o.init=function(){whiConfig.cookies_accepted||(console.log("Show cookie banner"),$(".js-cookie-acceptance").show())};var s=function(e){e.preventDefault(),$(".js-cookie-acceptance").hide();var t=r+"."+(whiConfig.user_id||"anonymous");options={path:"/"},whiConfig.user_id?options.expires=365:options.expires=30,$.cookie("cookies_accepted",t,options),whiConfig.cookies_accepted=!0};o.events=[[".js-cookie-acceptance-accept","click",s]]}}),this.require.define({"modules/views/dashboard/box_contacts":function(e,t,i){var n,o,r=t("../../lib/view"),s=t("../../lib/facebook"),a=t("../../lib/facebook_api"),l=i.exports=new r;l.matchRoute=function(){return $(".box-contacts").length},l.init=function(){s.load((function(){c($(".box-contacts.follow"))}))};var c=function(e){var t=e.find(".grid-user");if(!e.attr("data-loaded")){e.attr("data-loaded",!0);var i=t.spin({lines:10,length:4,width:2,radius:5,speed:1.1}).find(".spinner");if(!a.authenticated())return $(this).remove();f("follow",(function(n){if(i.remove(),n.trim().length){var o=$(n).filter((function(e,t){return $(t).is(".user-grid-item")})).slice(0,5);t.prepend(o),u(o)}else e.remove()}))}},u=function(e){$(e).find("[data-facebook-id]").each((function(){var e=$(this).attr("data-facebook-id");$(this).attr("title",o[e].name)}))},d=!1,h=[],f=function(e,t){var i=!1;return n?p(e,i,t):d?h.push(f.bind(null,e,t)):(d=!0,void a.api("/me/friends",(function(r){if(!r||r.error)throw new Error(r.error.message||"Failed to get friends");n=[],o=r.data.reduce((function(e,t){return n.push(t.id),e[t.id]=t,e}),{}),p(e,i,t),h.length&&h.forEach((function(e){e()}))})))},p=function(e,t,i,o){var r=n;"object"==typeof o&&o.length&&(r=r.filter((function(e){return!~o.indexOf(e)}))),r=r.sort((function(){return Math.round(2*Math.random())-1})),t&&(r=r.slice(0,t)),$.ajax({url:"/friends/"+e+"/avatars",type:"POST",data:{friend_ids:r},success:function(e){i(e)}})},m=function(){var e=$(this).is(".user-followed")?$(this).prev(".avatar"):$(this);e.is(".followed")?$.publish("whi:unfollow_user",{userId:e.attr("data-user-id")}):$.publish("whi:follow_user",{userId:e.attr("data-user-id")}),e.spin({lines:10,length:4,width:2,radius:5,speed:1.1})},g=function(e,t){var i=$('.follow-user[data-user-id="'+t.user+'"]');i.next(".user-followed").fadeIn(200),i.addClass("followed").find(".spinner").remove()},v=function(e,t){var i=$('.follow-user[data-user-id="'+t.user+'"]');i.next(".user-followed").fadeOut(200),i.removeClass("followed").find(".spinner").remove()},b=function(){return s.load(a.requestDialog),!1};l.events=[[window,"click",".follow-user.avatar,.user-followed",m],[window,"click","#invite_friends_button",b],["subscribe","whi:followed",g],["subscribe","whi:unfollowed",v]]}}),this.require.define({"modules/views/dashboard/userFilter":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n,r=function(e){if(/[\w\s]/.test(String.fromCharCode(e.keyCode))||8==e.keyCode){var t=new RegExp($(this).val().replace(/[^\w\s\d]/,""),"i");$(this).closest(".user-filter-list").find(".user").each((function(){var e=$(this).find(".user_name").html();t&&!t.test(e)?$(this).hide():$(this).show()}))}};o.matchRoute=function(){return $(".user-filter-list").length},o.events=[[window,"keyup",".user-filter-list .searchfield",r]]}}),this.require.define({"modules/views/doubleclick_ads":function(e,t,i){"use strict";function n(e){var t=null;"googletag"in window&&googletag.pubads&&(t=googletag.pubads());var i=$(e),n=[];if(null==t||0==i.length)return n;var o=t.getSlots();if(0==o.length)return n;for(var r=0;r<i.length;r++){var s=i[r],a=$(s).attr("id");if(a)for(var l=0;l<o.length;l++){var c=o[l];if(c.getSlotElementId()==a){if(n.push(c),n.length==i.length)return n;break}}}return n}function o(e){var t=$(e),i=t.data("ad-size");if(null==i||""==i){var n=t.data("ad-unit").match(/(\d+x\d+)/);n&&(i=n[1])}var o=1e4,r=1e4,s=t.data("filter-ad-size");if(s&&(1!=s&&"width"!=s&&"both"!=s||(o=t.parent().width()),1!=s&&"height"!=s&&"both"!=s||(r=t.parent().height())),i&&i.match(/^(\d+x\d+ *)+$/)){for(var a=i.split(" "),l=[],c=0;c<a.length;c++){var u=a[c].split("x",2),d=parseInt(u[0]),h=parseInt(u[1]);d<=o&&h<=r&&l.push([d,h])}return l}return null}function r(e){var t=e;return t.data("ad-collapse")?"collapse":t.closest("[data-ad-placeholder-url]").data("ad-placeholder-url")}function s(){return window.location.search.indexOf("test_ads=1")>-1}function a(e,t,i,n){var o=i[0];if(o){for(var r=o[0]+"x"+o[1],s=o[0]*o[1],a=1;a<i.length;a++){var l=i[a][0],c=i[a][1],u=l*c;u>s&&(s=u,o=i[a]),r+=", "+l+"x"+c}var d=$(document.createElement("div"));d.css("width",o[0]).css("height",o[1]).css("background-color","#CCC").css("box-sizing","border-box").css("padding","10px").css("opacity","0.9").css("overflow","scroll").css("text-align","left").css("font-size","11px"),d.append("<div>Ad Unit: "+e+"</div>"),d.append("<div style='margin-top:5px;'>ID: "+t+"</div>"),d.append("<div style='margin-top:5px;'>Dimensions: "+r+"</div>");var h="";for(var f in n){h+=f+"="+n[f]+"; "}return d.append("<div style='margin-top:5px;'>Targeting: "+h+"</div>"),d}}function l(e){function t(e,t){return-1!==e.indexOf(t)}function i(e){if(1!=u.adserverRequestSent){u.bidders[e]=!0;var t=(new Date).getTime();f.log("Bids returned from "+e+" in "+(t-s)+"ms"),u.allBiddersBack()&&n()}}function n(){0!=e.length&&!0!==u.adserverRequestSent&&(u.adserverRequestSent=!0,u.allBiddersBack()||f.log("Not all bidders back after "+r+"ms"),googletag.cmd.push((function(){window.apstag&&window.apstag.setDisplayBids(),window.pbjs&&window.pbjs.setTargetingForGPTAsync&&window.pbjs.setTargetingForGPTAsync(),f.log("Refreshing ads on "+e.join(", ")),googletag.pubads().refresh(a)})))}function o(){window.pbjs&&window.pbjs.que&&u.adUnits.length>0&&(f.log("Requesting bids from prebid"),u.bidders.prebid=!1,window.pbjs.que.push((function(){window.pbjs.addAdUnits(u.adUnits),window.pbjs.requestBids({bidsBackHandler:function(){i("prebid")},timeout:r})}))),window.apstag&&u.apstagSlots.length>0&&(f.log("Requesting bids from a9"),u.bidders.a9=!1,window.apstag.fetchBids({slots:u.apstagSlots},(function(){i("a9")})))}var r=whiConfig&&whiConfig.prebidTimeout||2e3,s=(new Date).getTime(),a=[];window.googletag&&window.googletag.pubads&&(a=window.googletag.pubads().getSlots().filter((function(i){return t(e,i.getAdUnitPath())||t(e,i.getSlotElementId())})));var l=[];window.prebidConfig&&(l=window.prebidConfig()||[]);var c=l.filter((function(i){return t(e,i.code)})),u={adserverRequestSent:!1,apstagSlots:a.map((function(e){return{slotID:e.getSlotElementId(),slotName:e.getAdUnitPath(),sizes:e.getSizes().map((function(e){return[e.getWidth(),e.getHeight()]}))}})),adUnits:c,bidders:{},allBiddersBack:function(){for(var e in this.bidders)if(0==this.bidders[e])return!1;return!0}};o(),window.setTimeout((function(){n()}),r)}function c(){$(".sticky-ad:visible").each((function(){var e=this;$(e).waypoint({handler:function(){e.lastRefreshTime=(new Date).getTime(),f.log("DFP: enable sticky ad refresh on "+$(e).find(".ad").attr("id"))},triggerOnce:!0,offset:"bottom-in-view"})})),u()}function u(){setTimeout((function(){var e=(new Date).getTime();$(".sticky-ad:visible").each((function(){if(null!=this.lastRefreshTime){var t=parseInt($(this).find(".ad").data("refresh"));if(!(null==t||t<=0||isNaN(t))){var i=1e3*t-(e-this.lastRefreshTime);if(i<=0&&(this.refreshable||$(this).find(".ad").data("alwaysRefresh"))){this.lastRefreshTime=e,this.refreshable=!1;var o=n($(this).find(".ad"));if(o.length>0){for(var r=[],s=0;s<o.length;s++)r.push(o[s].getSlotElementId());googletag.pubads().refresh(o),l(r),f.log("DFP: refreshed slots "+r.join(" ")+"; interval: "+i)}}}}})),u()}),1e3)}function d(){$(".sticky-ad:visible").each((function(){this.refreshable=!0}))}function h(e){(e.addClass("dfp-ad"),e.find(".ad-label").show(),!e.data("adCloseable")||0!=e.find(".close-ad").length||whiConfig&&whiConfig.premiumSubscriptionDisabled)||e.append('<a href="'+m.premium_account()+'" class="close-ad"></a>').click((function(){g.trackEvent("PremiumSubscriptionPage","XButtonAds")}))}var f=t("../utils/logger"),p=t("../lib/view"),m=t("../lib/routes"),g=t("../lib/tracking"),v=i.exports=new p;v.matchRoute=function(){return"googletag"in window};var b=97720036;window.removeAdSlots=function(e){var t=null;"googletag"in window&&googletag.pubads&&(t=googletag.pubads());var i=n(e);if(null!=t&&0!=i.length){for(var o="",r=0;r<i.length;r++){var s=i[r].getSlotElementId();o=o+" "+s,$("#"+s).removeClass("ad")}googletag.destroySlots(i),f.log("DFP: removed ad slots"+o)}};var w=function(){var e=[];$(".js-doubleclick-ad:visible").each((function(t,i){(i=$(i)).removeClass("js-doubleclick-ad");var n=i.attr("id");n||(n="dfp-ad-"+(t+1)+"-"+Math.round(1e9*Math.random()),i.attr("id",n)),e.push(n),i.addClass("ad");var l=i.data("adUnit");if(l){var c=o(i);if(c){var u={},d=window.whiConfig;d&&(d.authenticated&&(u.registered=d.authenticated),d.current_locale&&(u.language=d.current_locale||"en"),d.dev_mode&&(u.staging="true"),d.screen_size&&(u.screenSize=d.screen_size),u.personalized=""+d.showPersonalizedAds);var p=i.data();if(p){var m="adTargetingName";for(var g in p)if(g.substring(0,m.length)==m){var v=p["adTargetingValue"+g.substring(m.length)];v&&(u[p[g]]=v)}}var w=r(i);if(s())i.append(a(l,n,c,u)),h(i),f.log("Dummy ad",l,c,u);else{var y=i.children();if(y.length>0){i[0].adSlotContents=y;var _=i[0].getBoundingClientRect(),x=_.bottom-_.top;i.css("min-height",x+"px")}googletag.cmd.push((function(){f.log("Define DFP Slot on "+l+" "+n+" ("+c.join(" ")+")");var e=googletag.defineSlot("/"+b+"/"+l,c,n);if(e){for(var t in w?(e.setCollapseEmptyDiv(!1),e.set("empty-url",w)):e.setCollapseEmptyDiv(!0),e.addService(googletag.pubads()),u){var i=u[t];e.setTargeting(t,i),f.log("DFP: setTargeting("+t+", "+i+")")}googletag.display(n)}else f.log("DFP: failed to define slot on "+n)}))}}}})),l(e)},y=function(e,t){w(),x(),t&&"infinite_scroll"==t.name&&d()},_=function(){d()};window.renderAdPlaceholder=function(e){var t=r(e=$(e));t&&("collapse"==t?e.hide():$.ajax(t,{success:function(t){var i=$(document.createElement("div"));i.append(t);var n=$(i[0].firstChild);e.hasClass("right")&&n.addClass("right"),n.attr("style",e.attr("style")),e.replaceWith(n),i.remove()}}))};var x=function(){setTimeout((function(){var e=[];$("[data-str-native-key]").each((function(t,i){e.push(i)})),$("[data-str-third-party-source]").each((function(t,i){e.push(i)}));for(var t=0;t<e.length;t++){var i=e[t],n=$(i).hasClass(".ad")?i:$(i).closest(".ad")[0];$(i).removeAttr("data-str-native-key").removeAttr("data-str-third-party-source"),n&&null==i.firstChild&&(f.log("SFP: hide empty ad in slot "+n.id),window.renderAdPlaceholder(n))}}),3e3)},k=function(e){var t=e.slot.getSlotElementId(),i=$(document.getElementById(t)),n=e.slot.getResponseInformation(),o=n?n.lineItemId:null;if(f.log("DFP: line item: "+(o||"none")+" to slot "+t),i.lastRefreshTime&&i.closest(".sticky-ad").length>0&&(f.log("DFP: reset refresh timer"),i.lastRefreshTime=(new Date).getTime()),i[0].adSlotContents){var r=i[0].adSlotContents;delete i[0].adSlotContents;for(var s=i.children(),a=!0,l=0;l<r.length;l++)if(r[l]!=s[l]){a=!1;break}a||(f.log("DFP: restore ad slot child elements"),i.prepend(r))}e.isEmpty?(f.log("DFP empty ad: "+t),window.renderAdPlaceholder(i)):h(i)},C=!0;v.init=function(){C&&(C=!1,c(),googletag.cmd.push((function(){googletag.pubads().enableAsyncRendering(),googletag.pubads().addEventListener("slotRenderEnded",k),whiConfig&&whiConfig.cookies_accepted||(f.log("DFP use non-personalized ads"),googletag.pubads().setRequestNonPersonalizedAds(1)),googletag.enableServices()})),x(),googletag.cmd.push(w))},v.events=[["subscribe","whi:content_updated",y],["subscribe","lightbox:closed",_]]}}),this.require.define({"modules/views/download_image":function(e,t,i){function n(e){e.denied?(f(),c.trackEvent("DownloadCap","View")):e.watermark?(g(e.src,e.mimetype),p(),c.trackEvent("WatermarkCap","View")):v(e.src)}function o(){if(window.whiConfig.download_throttle){var e=[];(window.localStorage.getItem("imageDownloads")||"").split(" ").forEach((function(t){var i=parseInt(t,10);NaN!=i&&e.push(i)}));var t=Math.round((new Date).getTime()/1e3),i=[t],n=t-window.whiConfig.download_throttle.allowed.ttl;return e.forEach((function(e){e>=n&&i.push(e)})),window.localStorage.setItem("imageDownloads",i.join(" ")),i.length}window.localStorage.removeItem("imageDownloads",null)}function r(e,t){var i=(window.localStorage.getItem("imageDownloads")||"").split(" ").map((function(e){return parseInt(e,10)}));if(0==i.length||!window.whiConfig.download_throttle)return window.localStorage.removeItem("imageDownloads",null),0;watermark=!1,denied=!1;var n=Math.round((new Date).getTime()/1e3),o=n-window.whiConfig.download_throttle.allowed.ttl,r=n-window.whiConfig.download_throttle.watermark_free.ttl;return i.forEach((function(e,t){e<o||(!watermark&&e>=r&&(watermark=t+1>=window.whiConfig.download_throttle.watermark_free.limit),!denied&&e>=o&&(denied=t+1>=window.whiConfig.download_throttle.allowed.limit))})),{watermark:watermark,denied:denied,src:a.download_image_url(e,t),mimetype:t}}var s=t("../lib/view"),a=t("../lib/routes"),l=t("../views/modal"),c=t("../lib/tracking"),u=i.exports=new s;u.init=function(){},u.matchRoute=function(){return $(".js-download-image").length};var d=function(e){var t=$("#watermark")[0];if(t){var i=.075*e.width,n=t.height*(i/t.width),o=.047*e.width,r=e.width-(i+o),s=e.height-(n+o);e.drawImage(t,r,s,i,n)}},h=function(e,t,i){var n=$(document.createElement("div"));n.css("display","none"),canvas=document.createElement("canvas"),canvas.width=e.naturalWidth,canvas.height=e.naturalHeight,n.append(canvas);var o=canvas.getContext("2d");o.width=e.naturalWidth,o.height=e.naturalHeight,o.globalAlpha=1,o.drawImage(e,0,0),d(o),canvas.toBlob((function(e){i(URL.createObjectURL(e))}),t)},f=function(){$.ajax(a.download_denied(),{success:function(e){l.load(e)},error:function(){alert("Download not allowed")}})},p=function(){var e=(new Date).getTime(),t=localStorage.getItem("watermarkAlertShown");t&&parseInt(t,10)>e-864e5||$.ajax(a.download_watermarked(),{success:function(t){l.load(t),localStorage.setItem("watermarkAlertShown",String(e))}})},m=function(e,t){var i=document.createElement("a");i.href=e,i.download="original";var n=function(){setTimeout((function(){t&&URL.revokeObjectURL(e),this.removeEventListener("click",n)}),150)};i.addEventListener("click",n,!1),i.click()},g=function(e,t){if("image/jpeg"!=t&&"image/png"!=t)v(e);else{var i=document.createElement("img");i.src=e,i.crossOrigin="anonymous",i.onload=function(){h(i,t,(function(e){m(e,!0)}))}}},v=function(e){fetch(e).then((function(e){if(e.ok)return e.blob();throw"failed"})).then((function(e){var t=URL.createObjectURL(e);m(t,!0)})).catch((function(t){console.error(t),m(e,!1)}))},b=function(e){c.trackEvent("DownloadButton","Click");var t=$(this),i=t.data("entryId"),s=t.attr("href"),l=t.data("mimetype");if("image/jpeg"==l||"image/png"==l)if(e.preventDefault(),whiConfig&&whiConfig.premiumSubscriptionDisabled)v(s);else if(whiConfig.user_authenticated)$.ajax(a.download_restrictions(i),{success:function(e){n(e)},error:function(){v(s)}});else{var u=r(i,l);u.denied||o(),n(u)}},w=function(e){e.preventDefault()};u.events=[[".js-noclick","click",w],[".js-download-restricted","contextmenu",w],[".js-download-restricted","dragstart",w],[".js-download-image","click",b]]}}),this.require.define({"modules/views/dropdown":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.init=function(){},o.matchRoute=function(){return!0};var r=function(e){e.preventDefault();var t=$(this).closest(".dropdown");t.toggleClass("dropdown-is-open"),t.attr("aria-expanded",t.hasClass("dropdown-is-open"))};o.events=[[".dropdown a.dropdown-label","click",r]]}}),this.require.define({"modules/views/dummy_ads":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".dummy_ad").length},o.init=function(){$(".dummy_ad").show()};var r=function(){return $(this).parents("div.ad").hide(),!1};o.events=[[window,"click",".hide_ad",r]]}}),this.require.define({"modules/views/email_bounced":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".js-bounce-warning").length};var r=function(){$.cookie("__hide_bounce_warning","1",{expires:2}),$(".js-bounce-warning").hide()},s=function(){"1"!==$.cookie("__hide_bounce_warning")&&$(".js-bounce-warning").slideDown()};o.init=function(){s()},o.events=[[".js-bounce-warning-close","click",r]]}}),this.require.define({"modules/views/entry/add_to_collection":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/routes"),r=t("../../lib/popup_message"),s=t("../../lib/tracking"),a=i.exports=new n;a.matchRoute=function(){return $(".entry-collection-button").length},a.init=function(){var e=$(".dropdown-collection .dropdown-menu").data("selected");if(e){e="string"==typeof e?e.split(","):[e];for(var t=0;t<e.length;t++)$(".dropdown-collection .dropdown-menu li[data-collection-id="+e[t]+"]").addClass("added")}$(".dropdown .entry-collection-button").bind("click",l),$(".dropdown .entry-more-button").bind("click",l),$(".dropdown .dropdown-menu-wrapper").bind("click",c),$(".dropdown-collection .collection").bind("click",f)};var l=function(e){$(this).parent().hasClass("active")||($(this).parent().toggleClass("active"),e.preventDefault())},c=function(e){if(!("ontouchstart"in document.documentElement))return!0;$(this).parent().removeClass("active"),e.preventDefault()},u=function(){$(".dropdown-collection").addClass("active"),s.trackGAEvent("Set","OpenCollectionSelector","EntryDropdownAuto")},d=function(){u(),$(".dropdown-collection").addClass("visible").addClass("active")},h=function(){$(".dropdown-collection").removeClass("visible")},f=function(e){var t=$(this),i=$(".entry-main").data("entryId"),n=t.data("collectionId");return t.hasClass("added")?m(i,n,t):p(i,n,t),e.preventDefault(),e.stopPropagation(),!1},p=function(e,t,i){$.post(o.set_path(e),{entry_set_id:t},void 0,"html").success((function(){i.addClass("added"),s.trackGAEvent("Set","Setted",e);var n=i.closest(".entry").data("trackingUrl"),o=i.closest(".entry").data("adsNativeSid");$.publish("whi:setted",{id:e,collection:t,adsNativeTrackingUrl:n,adsNativeSID:o})})).error((function(e){$("#notice").html(e.responseText).show()}))},m=function(e,t,i){$.ajax({url:o.remove_from_set(t),data:{entry_id:e},type:"delete",method:"post",success:function(){i.removeClass("added"),s.trackGAEvent("Set","Setted",e)},error:function(e){$("#notice").html(e.responseText).show()}})},g=function(e){var t=$(this);if(13===e.keyCode){var i=$(this).data("username"),n=$(".entry-main").data("entryId");$.ajax({type:"post",url:o.create_entry_set_with_entry_path(i),data:{entry_id:n,entry_set:t.val(),cover:!0},success:function(e){$(".dropdown-menu .collection[data-collection-id="+$(e).data("collectionId")+"]").remove(),$(".dropdown-menu .new-collection").before($(e).addClass("added"));$(".dropdown-item.collection.added");t.val("")},error:function(){t.val(""),r.alert("Network error","Please try again later")}})}else 27===e.keyCode&&t.val("")},v=function(){var e=$(this);if("ontouchstart"in document.documentElement)return!0;e.hasClass("dropdown-collection")&&s.trackGAEvent("Set","OpenCollectionSelector","EntryDropdown"),$(this).addClass("active")},b=function(){if("ontouchstart"in document.documentElement)return!0;$(this).removeClass("active")};a.events=[[".dropdown","mouseenter",v],[".dropdown","mouseleave",b],[".dropdown-collection","keydown",".new-collection-name",g],[".entry-main","heart",d],[".entry-main","unheart",h]]}}),this.require.define({"modules/views/entry/create_entry_set":function(e,t,i){var n,o=t("../../lib/view"),r=(t("../../lib/tracking"),i.exports=new o);r.matchRoute=function(){return $(".js-new-set").length||$("#create-new-set-container").length||$(".js-edit-set").length},r.init=function(){"#create"==window.location.hash&&($("#create-new-set-container").hide(),$("#create-new-set-form").show(),$("#set-name").focus())};var s=function(e){e.preventDefault();var t=$(this).closest(".set");$(this).is(".js-edit-set")&&(t=$(this).closest(".set-header")),t.addClass("form-mode").find(".textfield").focus(),$(".delete_set").addClass("showing"),$("textarea.set-description").show(),$("h2.set-description").hide(),n=$("textarea.set-description").val()},a=function(e){e&&e.preventDefault();var t=$(this).closest(".set");$(this).closest(".set-header").length&&(t=$(this).closest(".set-header")),t.removeClass("form-mode"),$(".delete_set").removeClass("showing"),$("textarea.set-description").hide(),$("h2.set-description").text()&&$("h2.set-description").show()},l=function(){$("#create-new-set-container").toggle(),$("#create-new-set-form").toggle(),$("#set-name").focus()},c=function(){$("form input.description").val($("textarea.set-description").val()),$(this).find(".loader").show(),$(this).find(".set-save, .set-cancel").hide(),setTimeout((function(){$(this).find(".textfield").attr("disabled","disabled")}))},u=function(){a.call(this)},d=function(e,t){if($(this).is("#new_entry_set")&&t.html)$(this).find(".textfield").val(""),$(this).closest(".set-container").after(t.html),a.call(this),$.publish("trackGAEvent",["Set","NewCollectionSet",""]),$.publish("trackEvent",["click",{widget:"Set",action:"NewCollectionSet",label:""}]);else if(t.redirect)window.location=t.redirect;else if(1==t.success){var i=$(this).find(".textfield").val();if($(this).closest(".set-container,.set-header").find(".title-text").text(i),$("textarea.set-description").length){var o=$("textarea.set-description").val(),r=$("h2.set-description");r.text(o),r.html(r.html().replace(/[\n|$]/g,"<br>"))}if(a.call(this),n===o)return;"true"===r.attr("data-new-description")?($.publish("trackGAEvent",["Set","UpdateCollectionDescription","New"]),$.publish("trackEvent",["click",{widget:"Set",action:"UpdateCollectionDescription",label:"New"}])):($.publish("trackGAEvent",["Set","UpdateCollectionDescription","Edited"]),$.publish("trackEvent",["click",{widget:"Set",action:"UpdateCollectionDescription",label:"Edited"}]))}else 0==t.success&&alert(t.message)},h=function(){$(this).find(".loader").hide(),$(this).find(".set-save, .set-cancel").show(),$(this).find(".textfield").removeAttr("disabled")};r.events=[["body","click","#create-new-set-button",l],[".set-container,.set-header","ajax:before",".set-form",c],[".set-container,.set-header","ajax:error",".set-form",u],[".set-container,.set-header","ajax:success",".set-form",d],[".set-container,.set-header","ajax:complete",".set-form",h],["body","click",".js-new-set,.js-edit-set",s],["body","click",".set-cancel",a],["body","click",".set-form-open",s]]}}),this.require.define({"modules/views/entry/entry":function(e,t,i){var n=t("../../lib/view"),o=(t("../../utils/utils"),t("../../utils/storage"),t("../../lib/tracking")),r=t("../../lib/whi_history"),s=(t("../../lib/start_hearting_prompt"),t("../../lib/routes")),a=t("../../lib/lightbox"),l=i.exports=new n;l.matchRoute=function(){return $(".js-entry-container").length},l.init=function(){p()};var c=function(e){if($("#lightbox .js-entry-container").length>0){e.preventDefault(),$(this).addClass("btn-is-loading");var t=$(this).attr("href");t.match(/\/entry\/(\d+)(\/|\?|$)/)?u(t):window.location=t}},u=function(e){$.xhrPool.abortAll();var t=$.ajax(e,{success:function(t,i){if("success"==i||"notmodified"==i){var n=$(t).find(".js-entry-container");$(".js-entry-container").replaceWith(n),r.pushState({link:e,view:"entry"});var o=$(t).filter("title").html();document.title=o,window.setTimeout((function(){$.publish("whi:content_updated",{url:location.href,name:"entry_page"})}),100),p()}else console.log("some error occurred navigating to entry")}});$.xhrPool.push(t)},d=function(e,t){if(t)var i=t.link.match(/\/entry\/(\d+)\//);!i&&$("#lightbox").length>0?(a.close(),o.popPagePath(),r.returnToTop()):i&&u(t.link)},h=function(){var e=$(".js-entry-container").data("entry-id"),t=s.similar_entries_path(e);$.get(t,(function(e){console.log("similar entries loaded"),$(".js-entry-similar").replaceWith($(e))}))},f=function(){window.OBR&&window.OBR.extern&&(console.log("Outbrain widget reloaded"),window.OBR.extern.reloadWidget())},p=function(){h(),f()},m=function(e){e.preventDefault(),console.log("close button clicked"),d()};l.events=[[window,"click",".js-entry-nav-next",c],[window,"click",".js-entry-nav-prev",c],[window,"click",".js-entry-close",m],["subscribe","whiHistory:pop",d]]}}),this.require.define({"modules/views/entry/entry_ftue":function(e,t,i){var n,o=t("../../lib/view"),r=t("../../utils/anonymous_session")(),s=(t("../../utils/utils"),t("../../lib/tracking")),a=i.exports=new o({min_page_views:0,reset_days:10,max_shows:5});a.times_shown=function(){var e=parseInt($.cookie("showed_entry_ftue"),10);return isNaN(e)&&(e=0),e},a.eligible=function(){try{return!n&&"yes"!=$.cookie("auth")&&"yes"!=$.cookie("has_account")&&this.times_shown()<this.max_shows&&r.current_pageviews()>=this.min_page_views&&$(".js-entry-container").length}catch(e){return!1}},a.matchRoute=function(){return this.eligible()},a.init=function(){n=!0,$.cookie("showed_entry_ftue",this.times_shown()+1,{expires:this.reset_days}),$(".js-entry-container").addClass("ftue-showing").on("click",".entry-peek",(function(){$(".entry-ftue").animate({left:"-=1000"},150)})).on("click",".entry-ftue .primay.button",(function(){s.trackGAEvent("EntryFTUE","Clicked")})).find(".entry-left-image").hide()}}}),this.require.define({"modules/views/entry/entry_group":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/whi_history"),r=t("../../lib/popup_message"),s=i.exports=new n,a=null;s.matchRoute=function(){return $(".entry-sidebar").length},s.init=function(){};var l=function(e){e.preventDefault();var t=$(this).attr("href"),i=p();i.forEach(d),c(t,(function(e){e&&(i.forEach(u(e)),$.publish("whi:content_updated",{url:t,name:"entry_group"})),i.forEach(h),$(".entry-peek").fadeOut(400),o.pushState({link:t,view:"entry_group"})}))},c=function(e,t){a?t(a):$.ajax({url:e,success:function(e){a=$(".entry-content").html(),t(e)},error:function(){r.alert("Connection error","Please try again in a few minutes"),t()}})},u=function(e){return function(t){var i=$(e).find(t.selector);i.children().css("opacity",0),t.html(i.html())}},d=function(e){e.addClass("ajax").children().animate({opacity:0},200)},h=function(e){e.removeClass("ajax").children().animate({opacity:1},200)},f=function(e,t){if("entry_group"===t.view)(i=p()).forEach(d),c(t.link,(function(e){e&&(i.forEach(u(e)),$.publish("whi:content_updated",{url:location.href,name:"entry_group"})),i.forEach(h),$(".entry-peek").fadeOut(400)}));else if("entry"===t.view&&"entry_group"===o.previousState.view){var i;(i=p()).forEach(d),c(t.link,(function(e){e&&(i.forEach(u(e)),$.publish("whi:content_updated",{url:location.href,name:"entry_page"})),i.forEach(h),$(".entry-peek").fadeIn(400)}))}a=null},p=function(){return[$(".entry-main .entry-sidebar"),$(".entry-main-content"),$(".entry-timeline")]};s.events=[[".more-section a","click",l],["subscribe","whiHistory:pop",f]]}}),this.require.define({"modules/views/entry/report_button":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/tracking"),r=i.exports=new n;r.matchRoute=function(){return $("#report-button").length},r.init=function(){};var s=function(e){e.stopPropagation(),o.trackGAEvent("ReportImage","ClickedReportImage"),$("#report-form").slideToggle(200).attr("aria-hidden","false")},a=function(e){e.stopPropagation(),$(this).hide(),$("#actual-report-form").slideDown().attr("aria-hidden","true")};r.events=[["#report-button","click",s],[".report-confirm","click",a]]}}),this.require.define({"modules/views/entry/share_buttons":function(e,t,i){t("../../lib/config");var n=t("../../lib/view"),o=t("../../lib/tracking"),r=t("../../lib/routes"),s=t("../../utils/utils"),a=t("../modal"),l=i.exports=new n;l.matchRoute=function(){return this.events.some((function(e){return"subscribe"!=e&&$(e[0]).length}))||c()};var c=function(){return window.location.hash.match(/#(facebook|twitter|tumblr|email)-(\w+)-(\d+)/i)},u=function(){var e=$(this),t=e.attr("data-type"),i=e.attr("data-item-id"),n=e.attr("data-username"),l=e.attr("data-message"),c=e.attr("data-postcard-message"),u=r["share_modal_basic"];return a.loading(!0),$.ajax(u(),{type:"post",data:{id:i,type:t,username:n,message:decodeURIComponent(l),postcard_message:c},success:function(t){a.load(t);var n=e.closest(".entry").data("trackingUrl"),o=e.closest(".entry").data("adsNativeSid");$.publish("whi:sharing_dialog",{entryId:i,adsNativeTrackingUrl:n,adsNativeSID:o}),$.publish("whi:content_updated")},error:s.defaultAjaxErrorCallback}),1==$(this).data("promoted")&&"entry"==t&&o.promotedEntryAction(item_id,service+"_share"),!1};l.events=[[window,"click",".js-share-button",u]]}}),this.require.define({"modules/views/entry/tag_form":function(e,t,i){var n=t("../../lib/view"),o=(t("../../lib/tracking"),i.exports=new n);o.matchRoute=function(){return $(".js-tag-list").length},o.init=function(){};var r=function(){var e=$(this);e.on("ajax:before",(function(){e.find(".js-tag-form-error").html(""),e.find("input[type='submit']").addClass("btn-is-loading")})).on("ajax:success",(function(e,t){$(".js-tag-list").html(t)})).on("ajax:error",(function(t,i){e.find(".js-tag-form-error").html(i.responseText)})).on("ajax:complete",(function(){e.find("input[type='submit']").removeClass("btn-is-loading")}))},s=function(e){e.preventDefault();var t=$(this).data("delete-url");$.post(t,{_method:"delete"},void 0,"html").success((function(e){console.log("delete tag success"),$(".js-tag-list").html(e)}))};o.events=[["body","submit",".js-tag-form",r],["body","click",".js-tag-delete",s]]}}),this.require.define({"modules/views/entry/youtube_autoplay":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return!1},o.init=function(){},addYouTubeAPI=function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},o.events=[]}}),this.require.define({"modules/views/facebook_widget":function(e,t,i){var n=t("../lib/view"),o=(t("../lib/config"),t("../lib/facebook")),r=i.exports=new n;r.matchRoute=function(){return $(".fb-like").length},r.init=function(){o.load(s)};var s=function(){FB.Event.subscribe("edge.create",(function(e){$.publish("trackSocial",["facebook","like",e])})),FB.Event.subscribe("edge.remove",(function(e){
$.publish("trackSocial",["facebook","unlike",e])}))}}}),this.require.define({"modules/views/file_preview":function(e,t,i){"use strict";var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".js-file-preview-input").length};var r=function(e){var t=$(e.target).data("target")||".js-file-preview-target",i=e.target.files[0],n=new FileReader;n.onload=function(e){var i=e.target.result;$("div"+t).css("background-image","url('"+i+"')"),$("img"+t).attr("src",i)},n.readAsDataURL(i)};o.events=[[".js-file-preview-input","change",r]]}}),this.require.define({"modules/views/floating_window":function(e,t,i){function n(e){e.activator=document.activeElement,r(document).forEach((function(t){e.contains(t)||(t.dataset.saveTabIndex=t.getAttribute("tabindex"),t.setAttribute("tabindex",-1))})),modalFocusables=null}function o(e){r(document).forEach((function(e){var t=e.dataset.saveTabIndex;delete e.dataset.saveTabIndex,t&&e.setAttribute("tabindex",t)})),e.activator&&(e.activator.focus(),delete e.activator)}function r(e){return e.querySelectorAll("a[href], area[href], button, input:not([type=hidden]), select, textarea, iframe, [tabindex], [contentEditable=true]")}var s=t("../lib/view"),a=i.exports=new s;a.matchRoute=function(){return!0};var l=function(e){console.log(e),e.preventDefault();var t=$($(this).data("target"));t.fadeIn(200).attr("aria-hidden","false"),n(t)},c=function(){var e=$(this).closest(".floating-window,.start_hearting_popup");e.length||(e=$(".floating-window,.start_hearting_popup")),e.length&&(e.fadeOut(200).attr("aria-hidden","true"),o(e),$.publish("whi:floating_window_closed",{window:e}))},u=function(e){var t=$(".floating-window,.start_hearting_popup");27!==e.keyCode||t.is("hidden")||c()};a.events=[[".js-floating-window-link","click",l],["body","click",".overlay, #close, .close, .closex",c],["subscribe","whi:close_floating_windows",c],[window,"keydown",u]]}}),this.require.define({"modules/views/follow_button":function(e,t,i){"use strict";var n=t("../lib/view"),o=t("../lib/routes"),r=t("../utils/utils"),s=t("../lib/tracking"),a=t("../lib/lightbox"),l=t("../views/modal"),c=i.exports=new n;c.matchRoute=function(){return!0};var u,d=function(){var e=$(this),t=e.attr("data-user-id");console.log("toggling",t,e.is(":checked")?"FOLLOW":"UNFOLLOW"),e.is(":checked")?j({userId:t,button:e}):k("unfollow",e,t,o.follows_path(),{resource:{id:t,type:"user"},_method:"delete"})},h=function(){if(!($(".grid-dashboard").length>0)){var e=$(this);e.addClass("ajax disabled");var t=e.attr("data-user-id");return j({userId:t,button:e}),!1}},f=function(){if(!($(".grid-dashboard").length>0)){var e=$(this),t=e.attr("data-user-id"),i=$("#follow-button-dialog");return 0===i.length?k("unfollow",e,t,o.follows_path(),{resource:{id:t,type:"user"},_method:"delete"}):T(t,e.attr("data-name"),e.attr("data-username"),e.attr("data-collection-count"),i),!1}},p=function(){var e=$(this),t=$(this).closest(".entry").attr("data-entry-id"),i=e.attr("data-user-id"),n=e.attr("data-name"),o=e.attr("data-username");if(e.attr("data-user-private")){P("#follow-button-dialog");var r=$("#lightbox .modal-heavy.unfollow .follow-user");return r.show(),r.text(e.text()),r.click(m(i)),$("#lightbox .modal-heavy.unfollow .unfollow-user").hide(),$("#lightbox .modal-heavy.unfollow .unfollow-collection").hide(),!1}return e.addClass("ajax disabled"),$.ajax({url:"/entry/"+t+"/"+o+"/collections",dataType:"json",success:function(t){var r,s,a,l,c=null!==t.collection_filter;(l=$("#follow-button-dialog")).attr("data-user-id",i),l.attr("data-name",n),l.attr("data-username",o),P("#follow-button-dialog"),r=$("#lightbox .modal-heavy.unfollow .unfollow-collection"),s=$("#lightbox .modal-heavy.unfollow .follow-user"),a=$("#lightbox .modal-heavy.unfollow .unfollow-user"),c?(0===t.collection_filter||-1===t.collection_filter?(s.hide(),a.show()):1===t.collection_filter&&(s.show(),a.hide(),s.click(m(i))),I(r,t.collections,t.description)):(s.show(),s.click(m(i)),a.hide(),r.hide()),e.removeClass("ajax disabled")}}),!1},m=function(e){return function(){var t=$(this);return t.addClass("ajax disabled"),j(event,{userId:e,button:t},(function(){N(),t.removeClass("ajax disabled")})),!1}},g=function(){var e=$("#lightbox  #follow-button-dialog"),t=e.attr("data-user-id"),i=$(".js-unfollow-button[data-user-id="+t+"]");return A("user",e.attr("data-name"),e.attr("data-username")),$("#lightbox .modal-heavy.confirm .confirm").click((function(){return $(this).addClass("ajax disabled"),k("unfollow",i,t,o.follows_path(),{resource:{id:t,type:"user"},_method:"delete"},(function(){$(".grid-dashboard").length?($(this).removeClass("ajax disabled"),E($(".js-follow-button[data-user-id="+t+"]").first().prev().find(".user-name").text())):N()})),!1})),!1},v=function(e){var t=$("#follow-button-dialog");return $("#lightbox .unfollow-all-collections").hide(),A("collection",t.attr("data-name"),t.attr("data-username"),e[0].name),$("#lightbox .modal-heavy.confirm .confirm").click((function(){return w($(this),e),!1})),!1},b=function(e,t){var i=$("#follow-button-dialog"),n=$("#lightbox .modal-heavy.collections");return n.find(".description").html(t),e.forEach((function(e){var t=$('<a class="button" href="/follows?resource[id]='+e.id+'&resource[type]=collection">'+e.name+"</a>");t.click((function(){return A("collection",i.attr("data-name"),i.attr("data-username"),e.name),$("#lightbox .modal-heavy.confirm .confirm").click((function(){return w($(this),[e]),!1})),!1})),n.find(".unfollow-all-collections").before(t)})),$("#lightbox .unfollow-all-collections").click((function(){return A("collections",i.attr("data-name"),i.attr("data-username")),$("#lightbox .modal-heavy.confirm .confirm").click((function(){return w($(this),e),!1})),!1})),D("collections"),!1},w=function(e,t){e.addClass("ajax disabled");var i=function(e){return $.ajax({url:o.follows_path(),type:"delete",data:{resource:{id:e.id,type:"collection"}}})};return $.when.apply($,t.map(i)).then((function(){e.closest("#follow-button-dialog").attr("data-user-id");e.removeClass("ajax disabled"),E(t.map((function(e){return e.name})).join("<br>")),t.forEach((function(){s.trackGAEvent("Follow","Unfollow Collection",s.where())}))}),(function(){r.defaultAjaxErrorCallback})),!1},y=function(){return N(),!1},_=function(){return N(),setTimeout((function(){$(".modal-heavy.refresh").hide()}),500),!1},x=function(){var e=$(this),t=e.attr("data-user-id");e.attr("data-username");return $.publish("whi:anonymous_follow",{done:o.currentUrl(),action:{type:"follow",userId:t}}),!1},k=function(e,t,i,n,o,s){var a=null;if(t){var c=$(t.closest(".entry"));t.attr("data-username"),c.data("uploaderUsername");a=c.data("entryId"),t.addClass("ajax").attr("disabled","disabled")}$.ajax({url:n,type:"post",data:o,success:C.bind(null,e,t,i,a),error:function(o,a,c){if(o.responseText.includes(".js-captcha-form")){l.load(o.responseText);var u=l.container().find(".js-captcha-form");u.length>0&&u.submit((function(o){o.preventDefault(),k(e,t,i,n,u.serialize(),s),l.close()}))}else r.showAjaxErrorModalCallback(o,a,c)},complete:function(){t&&t.removeClass("ajax").removeAttr("disabled"),s&&s()}})},C=function(e,t,i,n,o){t&&t.trigger(e,[i]);var r=$('.follow-toggle[data-user-id="'+i+'"]');"follow"==e?r.attr("checked","checked"):r.removeAttr("checked"),$.publish("whi:"+e+"ed",{user:i,html:o,entryId:n}),s.trackGAEvent("Follow","follow"===e?"Follow":"Unfollow",s.where()),"follow"==e&&0==$(".user-list .js-follow-button").length?$("#follow_all").hide():$("#follow_all").show()},j=function(e,t,i){if(t&&t.userId||(t=e),!t.userId)return console.error("triggered follow, but no user was passed.");var n=null;k("follow",t.button,t.userId,o.follows_path(),{resource:{id:t.userId,type:"user"},"g-recaptcha-response-data":n},i)},S=function(e,t){if(t&&t.userId||(t=e),!t.userId)return console.error("triggered follow, but no user was passed.");k("unfollow",t.button,t.userId,o.follows_path(),{resource:{id:t.userId,type:"user"},_method:"delete"})},T=function(e,t,i,n,r){r.attr("data-user-id",e),r.attr("data-name",t),r.attr("data-username",i),r.attr("data-collection-count",n);var s=$("#follow-button-dialog .unfollow-collection");s.css("display","none"),n>0&&(s.attr("href",o.user_collections(i)),s.css("display","block")),P("#follow-button-dialog")},A=function(e,t,i,n){var o,r;D("confirm"),(o=$("#lightbox .modal-heavy.confirm")).find(".title").hide(),o.find(".description").hide(),r=o.find(".description-"+e),o.find(".title-"+e).show(),r.show(),r.find(".name").text(t),r.find(".username").text(i),r.find(".collection-name").text(n)},I=function(e,t,i){0===t.length?e.hide():1===t.length?e.click((function(){return v(t,i)})):e.click((function(){return b(t,i)}))},E=function(e){$("#lightbox .modal-heavy.refresh .description .name").html(e),D("refresh")},P=function(e){a.isOpen()&&(u=$("#lightbox").contents().clone()),a.loadContent($(e).clone()),$(e).show(),a.open()},D=function(e){$("#lightbox .modal-heavy").hide(),$("#lightbox .modal-heavy."+e).fadeIn()},N=function(){u?a.loadContent(u):a.close()},O=function(e,t){$(".js-follow-button[data-user-id='"+t.user+"']").each((function(e,i){var n=$(i).attr("class").replace(/(js-follow-button|text-primary|text-gray|bg-gradient)/g,""),o=$(t.html).removeClass();$(i).replaceWith(o.addClass("js-unfollow-button text-primary "+n))}))},F=function(e,t){$(".js-unfollow-button[data-user-id='"+t.user+"']").each((function(e,i){var n=$(i).attr("class").replace(/(js-unfollow-button|text-primary|text-gray|bg-gradient)/g,""),o=$(t.html).removeClass();$(i).replaceWith(o.addClass("js-follow-button bg-gradient "+n))}))};c.events=[[window,"click",".js-follow-button.anonymous",x],[window,"click",".js-follow-button:not(.anonymous)",h],[window,"click",".js-unfollow-button",f],[window,"click",".grid-dashboard .follow-button",p],[window,"change",".js-follow-toggle",d],["#follow-button-dialog .unfollow-user","click",g],["#follow-button-dialog .cancel","click",y],["#follow-button-dialog .continue","click",_],["subscribe","whi:follow_user",j],["subscribe","whi:unfollow_user",S],["subscribe","whi:followed",O],["subscribe","whi:unfollowed",F]]}}),this.require.define({"modules/views/follow_collection_button":function(e,t,i){var n=t("../lib/view"),o=t("../lib/routes"),r=(t("../utils/utils"),t("../lib/tracking")),s=(t("../lib/lightbox"),t("../views/modal")),a=i.exports=new n;a.matchRoute=function(){return!0};var l=function(){var e=$(this);e.removeClass("bg-gradient"),e.addClass("btn-is-loading"),e.addClass("text-gray");var t=null;return u("post",e.data("action"),{resource:{id:e.data("collectionId"),type:"collection"},"g-recaptcha-response-data":t},(function(){e.removeClass("btn-is-loading"),e.removeClass("bg-gradient"),e.addClass("text-gray"),e.removeClass("js-follow-collection-button"),e.addClass("js-unfollow-collection-button"),e.html(e.data("unfollowLabel")),r.trackGAEvent("Follow","Follow Collection",r.where())})),!1},c=function(){var e=$(this);return e.addClass("btn-is-loading"),u("delete",e.data("action"),{resource:{id:e.data("collectionId"),type:"collection"}},(function(){e.removeClass("btn-is-loading"),e.removeClass("text-gray"),e.addClass("bg-gradient"),e.removeClass("js-unfollow-collection-button"),e.addClass("js-follow-collection-button"),e.html(e.data("followLabel")),r.trackGAEvent("Follow","Unfollow Collection",r.where())})),!1},u=function(e,t,i,n){$.ajax({url:t,type:e,data:i,success:function(){n&&n()},error:function(i){s.load(i.responseText);var o=s.container().find(".js-captcha-form");o.length>0&&o.submit((function(i){i.preventDefault(),u(e,t,o.serialize(),n),s.close()}))}})},d=function(e,t){var i=t.user,n=$(t.html).text(),o=$(".js-follow-collection-form[data-user-id]="+i+" input[type=submit]");o.removeClass("js-follow-collection-button text-primary"),o.addClass("js-unfollow-collection-button text-gray"),o.val(n)},h=function(e,t){var i=t.user,n=$(t.html).text(),o=$(".js-follow-collection-form[data-user-id]="+i+" input[type=submit]");o.removeClass("js-unfollow-collection-button text-gray"),o.addClass("js-follow-collection-button text-primary"),o.val(n),$(t.html).attr("data-user-private")&&(o.addClass("btn-is-disabled"),o.attr("disabled",!0))},f=function(){var e=$(this),t=e.attr("data-collection-id"),i=e.attr("data-username");return $.publish("whi:anonymous_follow",{done:o.currentUrl(),action:{type:"follow_collection",collectionId:t,username:i}}),!1},p=function(e,t){$.ajax({url:o.follows_path(),type:"post",data:{resource:{id:t.collectionId,type:"collection"}},success:function(){$.publish("whi:followed_collection",t)}})};a.events=[[window,"click",".js-anonymous",f],[window,"click",".js-follow-collection-button",l],[window,"click",".js-unfollow-collection-button",c],["subscribe","whi:followed",d],["subscribe","whi:unfollowed",h],["subscribe","whi:follow_collection",p]]}}),this.require.define({"modules/views/heart_button":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#commit").length},o.init=function(){};var r=function(e){ga("send","event","Extension","sign_in_"+window.browser),$(e.target).parents("form:first").submit()},s=function(){ga("send","event","Extension","sign_up_"+window.browser)};o.events=[["#commit","click",r],["#sign_up_link","click",s]]}}),this.require.define({"modules/views/heart_button_container":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".heart-button-content").length},o.init=function(){$((function(){var e=$("#content");self.resizeTo(700,e.height()+110)}))}}}),this.require.define({"modules/views/heart_button_new_entry":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#create-entry-form").length&&$("input[name='extension_version']").length},o.init=function(){};var r=function(){ga("send","event","Extension","new_collection_"+window.browser)},s=function(){ga("send","event","Extension","choose_collection_"+window.browser)},a=function(){ga("send","event","Extension","title_change_"+window.browser)},l=function(){ga("send","event","Extension","title_change_"+window.browser)},c=function(e){e.target.checked&&ga("send","event","Extension","custom_action_button_"+window.browser)},u=function(){ga("send","event","Extension","custom_action_button_label_"+window.browser)},d=function(e){var t=e.target.name.split("["),i=t[t.length-1].replace("]","");"url"===i?ga("send","event","Extension","custom_action_destination_url_"+window.browser):"label"===i&&ga("send","event","Extension","custom_action_label_"+window.browser)};o.events=[["#create_new_set","click",r],["#collection_list","change",s],["#title","change",a],["#tags","change",l],["#add_action[type='checkbox']","click",c],["#action_link_code","click",u],["input[name^='action_link']","change",d]]}}),this.require.define({"modules/views/inbox":function(e,t,i){"use strict";var n=t("../lib/view"),o=(t("../lib/tracking"),t("../lib/routes"),t("../utils/utils"),i.exports=new n);o.matchRoute=function(){return $(".js-inbox").length};var r=function(e){var t=$(this),i=t.attr("data-correspondent-id"),n=+$.cookie("postcard_reply_shown")||0;$.cookie("correspondent_id",i,{path:"/"}),n<5&&($.cookie("postcard_reply_shown",n+1,{path:"/",expires:9999}),location.href=t.attr("href")+"?postcard_reply=1",e.preventDefault())};o.events=[[".js-inbox","click",".js-reply",r]]}}),this.require.define({"modules/views/inspirations/inspirations":function(e,t,i){"use strict";var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#inspirations-view").length};var r=null,s=null,a=null,l=null;o.init=function(){if($(".content-sidebar-scroll").length){r=$(window).height(),s=$(".content-sidebar-scroll .sidebar-scroll"),$(".content-sidebar-scroll .grid-thumb"),a=s.width();var e=s.offset();(l=e.top+s.height()+100)<=r&&(l=r),l+a,0,!1}}}}),this.require.define({"modules/views/interstitial":function(e,t,i){t("../lib/config");var n=t("../lib/tracking"),o=t("../lib/view"),r=i.exports=new o;r.matchRoute=function(){return $(".js-interstitial").length},r.init=function(){$.cookie("mobile_interstitial")||($(".js-interstitial").show(),$("#navbar").hide(),$("#languages-picker").hide().attr("aria-hidden","true"),$(".floating-window").hide().attr("aria-hidden","true"),$("#main-container").hide(),setTimeout((function(){$("#branch-banner-iframe").length&&$("#branch-banner-iframe").hide()}),2e3))};var s=function(e){e.preventDefault();var t=$(this).attr("href"),i=5;$.cookie("mobile_interstitial",1,{expires:i,path:"/"}),$(".js-interstitial").remove(),$("#navbar").show(),$("#languages-picker").show(),$(".floating-window").show(),$("#main-container").show(),t?(n.trackGAEvent("Growth","Mobile web interstitial","Clicked download"),window.open(t)):n.trackGAEvent("Growth","Mobile web interstitial","Clicked browser")};r.events=[[".js-interstitial-continue","click",s]]}}),this.require.define({"modules/views/modal":function(e,t,i){function n(e){e.activator=document.activeElement,r(document).forEach((function(t){e.contains(t)||(t.dataset.saveTabIndex=t.getAttribute("tabindex"),t.setAttribute("tabindex",-1))})),modalFocusables=null}function o(e){r(document).forEach((function(e){var t=e.dataset.saveTabIndex;delete e.dataset.saveTabIndex,t&&e.setAttribute("tabindex",t)})),e.activator&&(e.activator.focus(),delete e.activator)}function r(e){return e.querySelectorAll("a[href], area[href], button, input:not([type=hidden]), select, textarea, iframe, [tabindex], [contentEditable=true]")}var s=t("../lib/view"),a=i.exports=new s;a.matchRoute=function(){return $(".js-modal-container").length},a.init=function(){};var l=function(e){e.preventDefault(),u()};a.load=function(e){var t=$(".js-modal-container").find(".modal-element").last().remove();$.publish("whi:modal:close",t),$(".js-modal-container").append(e),$(".js-modal-container").find(".modal-element").css("max-height",$(window).height()-20+"px"),$(".js-modal-container").show().attr("aria-hidden","false"),n($(".js-modal-container")[0]),$("html").addClass("no-scroll"),c(!1)},a.container=function(){return $(".js-modal-container")};var c=a.loading=function(e){$(".js-modal-container").toggleClass("modal-is-loading",e),$(".js-modal-container").show().attr("aria-hidden","false")},u=a.close=function(){var e=$(".js-modal-container"),t=e.find(".modal-element").last().remove();return $.publish("whi:modal:close",t),0==e.children().length&&(e.hide().attr("aria-hidden","true"),$("html").removeClass("no-scroll"),o($(".js-modal-container")[0])),e.children().length},d=a.closeAll=function(){for(;u(););},h=function(e){e.target===$(".js-modal-container")[0]&&0==$(".js-modal-container .js-modal-explicit-close").length&&d()};a.events=[[".js-modal-container","click",".js-modal-close",l],[".js-modal-container","click",h]]}}),this.require.define({"modules/views/modals/add_to_collection_modal":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/routes"),r=(t("../../lib/popup_message"),t("../../lib/tracking")),s=t("./collections_modal"),a=i.exports=new n,l=!1;a.matchRoute=function(){return $(".modal-element.js-add-to-collections").length},a.init=function(){$(".dropdown .entry-more-button").bind("click",c),$(".dropdown .dropdown-menu-wrapper").bind("click",u)},a.addEntriesToCollection=function(e,t){var i=e.toString().split(",");$(i).each((function(){p(e,t,"")})),l=!0};var c=function(e){$(this).parent().hasClass("active")||($(this).parent().toggleClass("active"),e.preventDefault())},u=function(e){if(!("ontouchstart"in document.documentElement))return!0;$(this).parent().removeClass("active"),e.preventDefault()},d=function(){$(".dropdown-collection").addClass("visible").addClass("active")},h=function(){$(".dropdown-collection").removeClass("visible")},f=function(e){var t=$(this).find("input[type=checkbox]"),i=$(this).closest(".js-selectable").data("entryId").toString().split(","),n=$(this).closest(".js-selectable").data("collectionId");return t.attr("disabled")||(e.srcElement!=t[0]&&t.attr("checked",!t.attr("checked")),$(i).each((function(e,i){t.prop("checked")?(l=!0,p(i,n,t)):m(i,n,t)})),event.preventDefault(),event.stopPropagation()),!1},p=function(e,t,i){""!=e&&(i.length&&i.addClass("btn-is-loading"),$.post(o.set_path(e),{entry_set_id:t},void 0,"html").success((function(){i.length&&(i.removeClass("btn-is-loading"),i.attr("checked",!0)),r.trackGAEvent("Set","Setted",e)})).error((function(){i.length&&(i.removeClass("btn-is-loading"),i.attr("checked",!0))})))},m=function(e,t,i){e&&(i.addClass("btn-is-loading"),$.ajax({url:o.remove_from_set(t),data:{entry_id:e},type:"delete",method:"post",success:function(){i.attr("checked",!1),i.removeClass("btn-is-loading"),r.trackGAEvent("Set","Unsetted",e)},error:function(e){i.attr("checked",!0),i.removeClass("btn-is-loading"),$("#notice").html(e.responseText).show()}}))},g=function(e){e.preventDefault();var t=$(this).data("entryId");s.openCreateCollectionModal(t)},v=function(e){var t=$(this),i=t.val(),n=t.closest(".list");i&&27!=e.keyCode?(n.find(".list-item").css("display","none"),n.find(".list-item:contains("+i+")").css("display","block"),n.find(".list-item:first-child").css("display","block")):n.find(".list-item").css("display","block")},b=function(){if(l){var e=$(".list-item.js-selectable").closest(".js-selectable"),t=(e.data("entryId"),e.find("input[type=checkbox][checked=checked]").map((function(e,t){return $(t).val()})));$(this).remove,$.publish("whi:content_updated"),$.publish("whi:collections_selected",{selectedIds:t}),l=!1}},w=function(){if("ontouchstart"in document.documentElement)return!0;$(this).addClass("active")},y=function(){if("ontouchstart"in document.documentElement)return!0;$(this).removeClass("active")};a.events=[[".dropdown","mouseenter",w],[".dropdown","mouseleave",y],[".modal-element.js-add-to-collections","click",".js-open-create-collection-modal",g],[".js-filter-list","keyup",v],[".modal-element.js-add-to-collections","click",".list-item.js-selectable",f],[".modal-element.js-add-to-collections","click",".js-modal-close",b],[".entry-main","heart",d],[".entry-main","unheart",h]]}}),this.require.define({"modules/views/modals/collections_modal":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/routes"),r=i.exports=new n;r.matchRoute=function(){return $(".modal.js-modal-container").length},r.init=function(){},r.openCollectionsModal=function(e,t){return a(),$.ajax({url:o.add_to_collections(e),method:"get",success:function(e){$(".modal-element.js-add-to-collections").length&&$(".modal-element.js-add-to-collections").remove(),s(e,t)},error:function(e){l(),$("#notice").html(e.responseText).show()}}),!0},r.openCreateCollectionModal=function(e){e||(e="0"),$.ajax({url:o.create_new_collection(e),method:"get",success:function(e){s(e)},error:function(e){$("#notice").html(e.responseText).show()}})};var s=function(e,t){var i=$(".modal.js-modal-container");t=t||"";i.removeClass("modal-is-loading"),i.append(e),""!==t&&i.find("[data-collection-id='"+t+"']").find("input").attr("checked",!0),$.publish("whi:content_updated"),$(".js-filter-list").focus()},a=function(){$(".modal.js-modal-container").show().addClass("modal-is-loading").attr("aria-hidden","false"),$("html").addClass("no-scroll")},l=function(e){e.preventDefault(),$(this).closest(".modal-element").remove();var t=$(".modal.js-modal-container");0==t.children().length&&($("html").removeClass("no-scroll").attr("aria-hidden","true"),t.hide())};r.events=[[".modal.js-modal-container","click",".js-modal-close",l]]}}),this.require.define({"modules/views/modals/create_new_collection_modal":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/routes"),r=t("../../lib/tracking"),s=t("./add_to_collection_modal"),a=t("./collections_modal"),l=i.exports=new n;l.matchRoute=function(){return $(".modal-element.js-create-new-collection").length},l.init=function(){};var c=function(){var e=$(".modal-element.js-create-new-collection");if(e.length){var t=e.data("username"),i=e.data("entryId"),n=e.find(".collection-name").val();e.find(".collection-desc").val();return""!==e.find(".collection-name").val().trim()?(d(t,i,n),!0):(popupMessage.alert("Missing Title","New Collection must have a title in order to be created"),e.find("input.collection-name").focus(),!1)}console.log("ERROR: no entries ids in data attribute")},u=function(e){var t=$(this);if(13===e.keyCode){var i=$(this).data("username"),n=$(".entry-main").data("entryId");d(i,n,collectionTitle)}else 27===e.keyCode&&t.val("")},d=function(e,t,i){var n=t.toString().split(",");$.ajax({type:"post",url:o.create_entry_set_with_entry_path(e),data:{entry_id:n[0],entry_set:i,cover:!0},success:function(e){var i=$(e).data("collectionId");r.trackGAEvent("Set","NewCollection",i),a.openCollectionsModal(t,i),$(n).each((function(e,t){s.addEntriesToCollection(t,i)}))},error:function(){popupMessage.alert("Network error","Please try again later")}})};l.events=[[".modal-element.js-create-new-collection","click",".create-btn",c],[".modal-element.js-create-new-collection","onkeypress","input",u]]}}),this.require.define({"modules/views/navbar/navbar":function(e,t,i){var n=t("../../lib/config"),o=t("../../lib/view"),r=(t("../../lib/routes"),t("../../lib/signup_buttons")),s=t("../../lib/lightbox"),a=i.exports=new o;a.matchRoute=function(){return $("#navbar").length||n.mobile_site},a.init=function(){if($(".navbar").length||$(".navbar .dropdown-menu").remove(),!n.mobile_site){var e=$("#content"),t=$("#sidebar");e.height()>t.height()?t.css("min-height",e.height()-5):e.css("min-height",t.height()+5),e.resize((function(){t.css("min-height",e.height()-5)})),t.resize((function(){e.css("min-height",t.height()+5)}))}};var l=function(){$(".navbar").length&&n.mobile_site&&($(".js-mobile-dropdown").removeClass("open"),$(".global-search .searchfield").is(":focus")||$(this).toggleClass("open"))},c=function(){if($(".navbar").length&&n.mobile_site){var e=$(this).parent();return e.hasClass("open")?e.removeClass("open"):($(".js-navbar-menu-toggle").removeClass("open"),$(".js-mobile-dropdown").removeClass("open"),e.addClass("open")),!1}},u=function(){$(this).parent().fadeOut()},d=new r({emailPopup:!0,emailStart:function(){},emailComplete:function(){},emailForm:function(e){s.loadContent(e).open()},googlePlusPopup:!0,googlePlusAlert:function(e){s.loadContent(e).open()}}).click,h=function(){return s.close(),!1},f=function(e){e.preventDefault();var t=$(this).parent();t.addClass("global-search-visible"),t.find(".searchfield").focus()},p=function(e){var t=$(".js-search-history"),i=$.cookie("weheartit_searches"),n=i?i.toString().split(","):[],o=n.length,r=$(e.currentTarget).width(),s="";t.find("li").remove(),$(n).each((function(e,t){if(e>o-25){var i=decodeURIComponent(t);s+='<li class="ui-menu-item js-search-history-item" style="text-align: left;" data-search-item="'+i+'"><a>'+i+"</a></li>"}})),o&&(s+='<li class="ui-menu-item js-search-history-delete" style="text-align: left;"><a>'+I18n.t("js.navbar.clear_search_history")+"</a></li>",t.prepend(s),t.width(r),$(".js-search-history-item").on("mousedown",g),$(".js-search-history-delete").on("mousedown",v),t.show("fast"))},m=function(){$searchHistoryMenu=$(".js-search-history"),$(".js-search-history-item").off("mousedown"),$searchHistoryMenu.hide(),$searchHistoryMenu.find("li").remove()},g=function(e){$(".searchfield").val($(e.currentTarget).data("searchItem")),$(".searchfield").closest("form").submit()},v=function(e){event.preventDefault(),$.cookie("weheartit_searches","",{path:"/"}),m(e)},b=function(e){var t=$(this);t.hasClass("typing")&&e.offsetX>t.width()&&(""==t.val()&&($(".global-search").removeClass("global-search-visible"),t.removeClass("typing")),t.val(""))},w=function(e){var t=$(this);""!=t.val()&&0==t.find(".closex").length?(t.addClass("typing"),m(e)):t.removeClass("typing")},y=function(e){e.preventDefault(),$("body").hasClass("high-contrast")?(window.localStorage.removeItem("highContrast"),$("body").removeClass("high-contrast")):(window.localStorage.setItem("highContrast",!0),$("body").addClass("high-contrast"))};a.events=[["#languages-picker","click",".close, .closex",u],[".js-navbar-menu-toggle","click",l],[".js-mobile-dropdown .tab","click",c],[".js-mobile-dropdown","click",".button.join",d],["body","click",".email_popup .close",h],[".global-search","click",".tab",f],[".searchfield","keyup",w],[".searchfield","click",b],[".global-search","focus",".searchfield",p],[".global-search","blur",".searchfield",m],[".js-high-contrast","click",y]]}}),this.require.define({"modules/views/navbar/notifications":function(e,t,i){var n=t("../../lib/config"),o=t("../../lib/view"),r=t("../../lib/tracking"),s=i.exports=new o;s.matchRoute=function(){return $(".js-notifications-list").length},s.init=function(){};var a=function(){r.trackGAEvent("Notifications","NotificationsAll","UserID",n.user_id)};s.events=[[window,"click",".js-notifications-view-all",a]]}}),this.require.define({"modules/views/navbar/topbar_touches":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return!0};var r=function(e){var t=$(this);t.next().hasClass("dropdown-menu")&&(t.parent().toggleClass("hovered"),e.preventDefault())};o.events=[[".navbar li > a","touchend",r]]}}),this.require.define({"modules/views/new_account/new_confirmation":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".sign_up_confirmation #share_updates").length},o.init=function(){$.cookie("lightbox_registration",!1,{path:"/"})};var r=function(){var e=$(this).data("facebook-url");$(this).is(":checked")&&!$(this).data("share-updates")&&(location.href=e)};o.events=[["#share_updates","change",r]]}}),this.require.define({"modules/views/onboarding_inspirations":function(e,t,i){"use strict";var n=t("../lib/view"),o=(t("../utils/utils"),t("../lib/tracking"),i.exports=new n);o.matchRoute=function(){return $(".js-onboarding-inspirations").length},o.init=function(){};var r=function(){$("input[type=checkbox]:checked").length>=4?($(".js-select-four-btn").addClass("hide"),$(".js-find-collections-btn").removeClass("hide")):($(".js-select-four-btn").removeClass("hide"),$(".js-find-collections-btn").addClass("hide"))};o.events=[[".js-onboarding-inspirations","changed",".js-selectable",r]]}}),this.require.define({"modules/views/postcard":function(e,t,i){"use strict";t("../lib/config");var n=t("../lib/routes"),o=t("../lib/view"),r=t("../lib/tracking"),s=(t("../lib/link_social_network"),t("../utils/utils")),a=t("./modal"),l=i.exports=new o,c=[],u=!1,d=1,h="",f=null,p=null,m=null;l.matchRoute=function(){return $(".js-postcard-modal").length},l.init=function(){(f=$(".js-postcard-modal")).find("textarea").focus(),0===$(".js-recipients-modal").length&&(c=[]),$.cookie("correspondent_id")&&(m=+$.cookie("correspondent_id"),c.push(m),$.removeCookie("correspondent_id",{path:"/"}))};var g=function(e){e.preventDefault(),j(R($(this).addClass("btn-is-loading")))},v=function(){j(R($(this).addClass("btn-is-loading")))},b=function(){var e=f.attr("data-entry-id"),t=f.find("textarea").val(),i=$(this).addClass("btn-is-loading");return $.ajax(n.create_postcard(),{type:"post",data:{content:t,entry_id:e,recipient_ids:c}}).done((function(){c=[],A(!0);var t=$(".js-postcard-modal").data("trackingUrl"),i=$(".js-postcard-modal").data("adsNativeSid");$.publish("whi:share_postcard",{adsNativeTrackingUrl:t,adsNativeSID:i}),r.trackGridAction("Postcard",$(".entry[data-entry-id='"+e+"']"))})).fail((function(e,t,i){s.defaultAjaxErrorCallback(e,t,i),a.closeAll()})).always(R(i)),!1},w=function(e){e.preventDefault(),A(!1,R($(this).addClass("btn-is-loading")))},y=function(e){""!==(h=$(this).val()).trim()?(d=1,u=!0,S((function(){u=!1})),13===e.keyCode&&e.preventDefault()):j()},_=function(e,t){var i=$(this).find("input[type=checkbox]"),n=t.checked,o=+i.val();n&&-1===c.indexOf(o)?c.push(o):n||-1===c.indexOf(o)||c.splice(c.indexOf(o),1),T()},x=function(){var e=$(".js-spinner"),t=p.find(".js-recipients"),i=t.get(0).scrollHeight-(t.scrollTop()+t.height());u||i<t.height()&&(e.show(),u=!0,S((function(i){i&&t.off("scroll",x),e.hide(),d++,u=!1})))},k=function(){f.find(".js-counter").text(200-f.find("textarea").val().length)},C=function(){13===event.keyCode&&event.preventDefault()},j=function(e){var t="";e=e||function(){},null!==m&&(t="?correspondent_id="+m,m=null),$.get(n.recipients_modal()+t).done((function(e){a.load(e),d=2,(p=$(".js-recipients-modal")).find(".js-recipients").scroll(x),p.find(".js-share").attr("data-item-id",f.attr("data-entry-id")),p.find(".js-share").attr("data-postcard-message",f.find("textarea").val()),T(),$.publish("whi:content_updated")})).fail(s.defaultAjaxErrorCallback).always(e)},S=function(e){var t=p.find(".js-recipients"),i=$(".js-spinner");$.get(n.recipients_scroll()+"?query="+h+"&page="+d).done((function(n){1===d?t.html(n):i.before(n),T(),e(!n.trim())})).fail(s.defaultAjaxErrorCallback).always((function(t,i){
"error"===i&&e&&e(!1)}))},T=function(){var e=p.find(".js-recipients input[type=checkbox]");e.prop("checked",!1),c.forEach((function(t){e.filter("[value="+t+"]").prop("checked",!0)})),F()},A=function(e,t){t=t||function(){},a.loading(!0),$.get(n.postcards_share_modal()+(e?"?postcard_sent=1":"")).done((function(e){a.closeAll(),a.load(e),$(".js-postcard-share-modal .bg-facebook").on("click",I),$(".js-postcard-share-modal .bg-tumblr").on("click",I),$(".js-postcard-share-modal .bg-twitter").on("click",I),$(".js-postcard-share-modal .js-email").on("click",I),$(".js-postcard-share-modal .js-get-link").on("click",P),$.publish("whi:content_updated")})).fail(s.defaultAjaxErrorCallback).always(t)},I=function(){var e=$(this),t=e.attr("data-service"),i=e.attr("href");return i?(r.trackSocial(t,"postcard_share"),"email"===t||(E(i),!1)):(e.addClass("ajax"),N((function(t){O(t),e.removeClass("ajax"),e.click()})),!1)},E=function(e){var t=500,i=445,n=screen.width/2-t/2,o=200;window.open(e,"title","width="+t+",height="+i+",scrollbars=yes,status=1,left="+n+",top="+o)},P=function(){var e=$(".js-link"),t=$(".js-get-link");""===e.val().trim()&&N(O),t.hide(),e.show()},D=function(){$(this).select()},N=function(e){var t=f.attr("data-entry-id"),i=f.find("textarea").val();$.post(n.postcards_share_link(),{entry_id:t,message:i}).done((function(t){e(t)})).fail(s.defaultAjaxErrorCallback).always((function(){e()}))},O=function(e){e&&($(".js-postcard-share-modal a[data-service=facebook]").attr("href",e.facebook),$(".js-postcard-share-modal a[data-service=tumblr]").attr("href",e.tumblr),$(".js-postcard-share-modal a[data-service=twitter]").attr("href",e.twitter),$(".js-postcard-share-modal a[data-service=email]").attr("href",e.email),$(".js-postcard-share-modal .js-link").val(e.link))},F=function(){var e=$(".js-postcard-modal .js-reply-send, .js-recipients-modal .js-send");e.toggleClass("btn-is-disabled",!c.length),e.attr("disabled",!c.length)},R=function(e){return function(){e.removeClass("btn-is-loading")}};l.events=[[".js-postcard-modal","click",".js-next",g],[".js-postcard-modal","click",".js-change",v],[".js-postcard-modal","click",".js-reply-send",b],[".js-postcard-modal","keyup",".js-message",k],[".js-postcard-modal","keydown",".js-message",C],[".js-recipients-modal","click",".js-share",w],[".js-recipients-modal","keyup",".js-search",y],[".js-recipients-modal","changed",".js-recipients .js-selectable",_],[".js-recipients-modal","click",".js-send",b],[".js-recipients-modal","click",".js-link",D]]}}),this.require.define({"modules/views/postcard_button":function(e,t,i){var n=t("../lib/view"),o=(t("../lib/tracking"),t("../lib/routes")),r=t("../utils/utils"),s=t("./modal"),a=i.exports=new n;a.matchRoute=function(){return $(".js-postcard-button").length};var l=function(e){e.preventDefault();var t=$(this),i=$.cookie("correspondent_id"),n=i?"?correspondent_id="+i:"";s.loading(!0),$.get(o.postcard_modal(t.attr("data-entry-id"))+n).done((function(e){s.load(e),$.publish("whi:content_updated"),$(".js-postcard-modal").attr({"data-tracking-url":t.closest(".entry").data("trackingUrl"),"data-ads-native-sid":t.closest(".entry").data("adsNativeSid")})})).fail(r.defaultAjaxErrorCallback)};a.events=[[window,"click",".js-postcard-button",l]]}}),this.require.define({"modules/views/prompts/app_promo_ad":function(e,t,i){t("../../lib/config");var n=t("../../lib/view"),o=t("../../utils/utils"),r=i.exports=new n;r.matchRoute=function(){return $(".apps-promo-ad").length},r.init=function(){};var s=function(){$.publish("trackGAEvent",["AppPromoAd","iOSClick",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:"iOS Text"}])},a=function(){$.publish("trackGAEvent",["AppPromoAd","AndroidClick",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:"Android Text"}])},l=function(){$.publish("trackGAEvent",["AppPromoAd","iOSClick2",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:"iOS Button"}])},c=function(){$.publish("trackGAEvent",["AppPromoAd","AndroidClick2",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:"Android Button"}])},u=function(){$.publish("trackGAEvent",["AppPromoAd","iOSClick3",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:"iOS Icon"}])},d=function(){$.publish("trackGAEvent",["AppPromoAd","AndroidClick3",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:"Android Icon"}])},h=function(){var e=$(this).data("gaAction");$.publish("trackGAEvent",["AppPromoAd",e,"Click"]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:e}])};r.events=[[".text .itunes-icon","click",s],[".text .play-icon","click",a],[".buttons .itunes-link","click",l],[".buttons .play-link","click",c],[".phone .itunes-icon","click",u],[".phone .play-icon","click",d],["a.hint","click",h]]}}),this.require.define({"modules/views/prompts/premium_account_promo":function(e,t,i){function n(){$.ajax("/accounts/premium/interstitial",{success:function(e){o.load(e);var t=window.localStorage.getItem("interstitials")||" ";window.localStorage.setItem("interstitials",t+"premium "),s.trackEvent("PremiumNewFeatureAlert","View")}})}var o=t("../modal"),r=t("../../lib/view"),s=t("../../lib/tracking"),a=i.exports=new r;a.matchRoute=function(){if(whiConfig.premiumSubscriptionDisabled)return!1;if($(".js-hide-intercept").length>0)return!1;if("#premium_interstitial"==window.location.hash)return!0;if(whiConfig.user_authenticated){if(whiConfig.user_premium)return!1;if((whiConfig.registered_days_ago||0)<1)return!1;var e=window.localStorage.getItem("interstitials");return!(e&&e.indexOf(" premium ")>=0)}return!1},a.init=function(){n()}}}),this.require.define({"modules/views/reactions":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".js-reactions-btn").length>0};var r=null,s=$(".js-reactions-btn").parent(),a=!1,l=!1,c=!1,u=!1,d=$(".js-reactions-list"),h={},f={};o.init=function(){h={top:d.offset().top-$(window).scrollTop(),bottom:d.offset().top-$(window).scrollTop()+d.height()},r=$(".js-reactions-btn").data("entry-id")};var p=function(e){e&&e.stopPropagation(),k(),x(!0),C(),l=window.setTimeout((function(){c=!0,s.addClass("is-hover")}),200)},m=function(e){e.preventDefault(),u=!0;var t=e.originalEvent.touches[0],i=t.pageX,n=t.clientY;if(n>=h.top&&n<=h.bottom){var o={};for(var r in f){if(!(i>=f[r].x))break;o=f[r]}j(o.reaction)}else j(!1)},g=function(e){e.length&&e.stopPropagation(),clearTimeout(l),u?(S(a),a?T(a):A(),_()):c?window.setTimeout((function(){document.addEventListener("touchstart",y)}),500):_()},v=function(e){var t=$(e.target).data("reaction");S(t),T(t),_()},b=function(){c||(E(),x(!0))},w=function(){if(!c){var e=$(".js-reactions-btn .icon");e.toggleClass("icon-heart"),e.toggleClass("icon-hearted"),e.hasClass("icon-hearted")?(heart_action="whi://actions/entry/"+r+"/heart",window.location=heart_action):I(r)}},y=function(){_()},_=function(){x(!1),a=!1,c=!1,u=!1,s.removeClass("is-hover"),document.removeEventListener("touchend",y)},x=function(e){e?$("html").addClass("no-scroll"):$("html").removeClass("no-scroll")},k=function(){$(".js-reactions-help-bubble").remove()},C=function(){f={},$(".js-reactions-option").each((function(e){var t=$(this),i=t.data("reaction");f[e]={reaction:i,x:Math.round(t.offset().left)}}))},j=function(e){var t=$('.js-reactions-option[data-reaction="'+e+'"]');t.hasClass("is-hover")||($(".js-reactions-option").removeClass("is-hover"),t.addClass("is-hover")),a=e},S=function(e){if(e){var t=$('.js-reactions-option[data-reaction="'+e+'"]');t.removeClass("is-hover"),$(".js-reactions-badge").html(""),setTimeout((function(){$(".js-reactions-badge").text(t.text())}),10)}else $(".js-reactions-badge").html("")},T=function(e){var t="/entries/"+r+"/reactions";$.ajax({url:t,dataType:"json",type:"POST",data:{reaction:e},success:function(){$.cookie("reactedThisMonth",!0,{expires:30})}})},A=function(){var e="/entries/"+r+"/reactions";$.ajax({url:e,dataType:"json",type:"DELETE",success:function(){$(".js-reactions-badge").html("")}})},I=function(e){heart_action="/entry/"+e+"/heart",$.ajax({url:heart_action,type:"DELETE",success:function(){}})},E=function(){var e="/entries/"+r+"/reactions?modal=1";$.ajax({url:e,type:"GET",success:function(e){$(".js-modal-container").append(e),$(".js-modal-container").show()}})};o.events=[[".js-reactions-btn","touchstart",p],[".js-reactions-btn","touchmove",m],[".js-reactions-btn","touchend touchcancel",g],[".js-reactions-option","touchend",v],[".js-reactions-heart","click",w],[".js-reactions-count","click",b],[".js-reactions-badge","click",A]]}}),this.require.define({"modules/views/recaptcha":function(e,t,i){function n(e){var t=(e=$(e))[0].form;1!=t.recaptcha&&(t.recaptcha=!0,$(t).submit((function(i){i.preventDefault(),grecaptcha.ready((function(){grecaptcha.execute(l.recaptchaSiteKey,{action:e.data("action")}).then((function(i){e.val(i),t.submit()}))}))})))}function o(e){e.each((function(){n(this)}))}function r(e,t){window.grecaptcha?t():u?e&&e>0?setTimeout(r,10,e-10,t):console.error("Recaptcha script not loading"):(u=!0,$.getScript("https://www.google.com/recaptcha/api.js?render="+l.recaptchaSiteKey,t))}function s(){$(".js-recaptcha-v3, .js-recaptcha-btn, .js-recaptcha-ajax").length>0&&r(5e3,(function(){o($(".js-recaptcha-v3"))}))}var a=t("../lib/view"),l=t("../lib/config"),c=i.exports=new a,u=!1;c.matchRoute=function(){return!0},c.execute=function(e,t){r(5e3,(function(){grecaptcha.ready((function(){"#fail_captcha"==window.location.hash||window.location.search.indexOf("fail_captcha=1")>-1?t():grecaptcha.execute(l.recaptchaSiteKey,{action:e}).then(t)}))}))},c.init=function(){$(s)},c.events=[["subscribe","whi:content_updated",s]]}}),this.require.define({"modules/views/registration/email_signup":function(e,t,i){function n(e){var t=$(e).val();return t&&t.length>0?parseInt(t):null}function o(e,t,i){if(!e||!t||t<=28)return!0;if(t>30&&[4,6,9,11].includes(e))return!1;if(2==e){if(t>29)return!1;if(null!=i&&i>=1e3&&(i%4!=0||i%100==0&&i%400!=0))return!1}return!0}var r=t("../../lib/view"),s=t("../../utils/slug"),a=t("../../lib/verifier"),l=(t("../../lib/routes"),i.exports=new r);l.matchRoute=function(){return $("#create-user-form, #login-form").length},l.init=function(){m(),y.apply($("#user_email")),k()};var c=function(){f(),$(".sign_up_button").addClass("disabled").addClass("ajax")},u=function(){$(".sign_up_button").removeClass("disabled").removeClass("ajax")},d=function(){$.publish("whi:signup_updated")},h=function(e){$(".js-sign-up-error").html("").append(e).slideDown(d),"grecaptcha"in window&&grecaptcha.reset()},f=function(){$(".js-sign-up-error").html("").slideUp(d)},p=function(e,t,i,n){h("<p>"+(n||"Unknown Error")+"</p>")},m=function(){var e="#user_username";new a(e,"#username-check","#suggested-username",{data:function(){return $(e).serialize()},empty:function(){return""==$(e).val()},equals:function(e){return null!=this.data()&&this.data()===e},complete:function(){k()}}).verify()},g=function(){y.apply(this,arguments);var e=s($(this).val()).toLowerCase();e.length&&$("#user_username").val(e).trigger("change")},v=function(){$("#username-preview").text($(this).val())},b=function(){var e=$(this),t=e.val(),i=!0;e.removeClass("is-valid is-invalid js-empty"),0==t.length?e.addClass("js-empty"):(t.length>=5&&(i=!/^[^\s]+?\@[^\s]+\.[^\s]+$/.test(t)),e.addClass(i?"is-invalid":"is-valid").removeClass(i?"is-valid":"is-invalid")),k()},w=function(){var e=$(this).removeClass("valid invalid js-empty").val();failed=e.length<2,e.length>0?$(this).addClass(failed?"invalid":"valid"):$(this).addClass("js-empty"),k()},y=function(){x(this,6)},_=function(){x(this,1)},x=function(e,t){var i=$(e).removeClass("is-valid is-invalid js-empty").val();null==i&&(i=""),failed=i.length<t,i.length>0?$(e).addClass(failed?"is-invalid":"is-valid"):$(e).addClass("js-empty"),k()},k=function(){var e=!$(".is-invalid").length&&!$(".js-empty").length;$.fn[e?"removeClass":"addClass"].call($(".sign_up_button"),"disabled"),e?$(".sign_up_button").removeAttr("disabled"):$(".sign_up_button").attr("disabled","disabled")},C=function(){var e=$("#user_birth_day"),t=n(e);e.removeClass("is-valid is-invalid js-empty"),t?o(n("#user_birth_month"),t,n("#user_birth_year"))?e.addClass("is-valid"):e.addClass("is-invalid"):e.addClass("js-empty"),k()},j=function(){var e=$(this),t=n(e);e.removeClass("is-valid is-invalid js-empty"),t?t>=1&&t<=12?e.addClass("is-valid"):e.addClass("is-invalid"):e.addClass("js-empty"),C()},S=function(){var e=$(this),t=n(e);if(e.removeClass("is-valid is-invalid js-empty"),t){var i=(new Date).getFullYear();t>=i-150&&t<=i?e.addClass("is-valid"):e.addClass("is-invalid")}else e.addClass("js-empty");C()};l.events=[[".error.notice","click",f],["#create-user-form","change","#user_birth_month",j],["#create-user-form","change","#user_birth_day",C],["#create-user-form","keyup blur change input","#user_birth_year",S],["#create-user-form","keyup blur change input","#user_email",b],["#login-form","keyup blur change input","#user_email",b],["#create-user-form","keyup blur change input","#user_password",y],["#login-form","keyup blur change input","#user_password_login",_],["#login-form","keyup blur change input","#user_email_or_username",w],["#create-user-form","keyup blur change input","#user_name",g],["#create-user-form","keyup blur change input","#user_username",v],["#create-user-form","ajax:before",c],["#create-user-form","ajax:error",p],["#create-user-form","ajax:complete",u]]}}),this.require.define({"modules/views/registration/join_tracker":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/tracking"),r=i.exports=new n;r.matchRoute=function(){return $("#create-user-form").length},r.init=function(){o.trackGAEvent("Registration","JoinPageViewed","Redesign",null,!0)}}}),this.require.define({"modules/views/registration/login":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/lightbox"),r=t("../../lib/signup_buttons"),s=t("../modal"),a=i.exports=new n;a.matchRoute=function(){return $("#login,#navbar .js-login").length},a.init=function(){if($("#sign_in_form").length){var e=$($("#sign_in_form").html());$("#sign_in_form").remove(),o.loadContent(e,!0),$(".js-sign-up-error").slideDown(200),o.open()}};var l=function(e){var t="/login"+("?done="+encodeURIComponent(window.location.href));e.preventDefault(),$(window).width()<800?window.location.href=t:$.ajax({url:t,type:"GET",success:function(e){s.load(e),$.publish("whi:content_updated",{url:"/users/sign_in_form",name:"sign_in"})}})},c=function(e){return e="string"==typeof e?e:"?done="+window.location.href,o.showLoader(),$.ajax({url:"/users/sign_in_form"+e,success:function(e){e=$(e),o.loadContent(e.show()),o.open()},complete:function(){o.hideLoader()}}),!1},u=new r({googlePlusPopup:!0,googlePlusAlert:function(e){o.loadContent(e).open()}});a.events=[["#navbar .email_login_link","click",c],["#navbar .google_login_link","click",u.click],["#login","click","#login-page-email-login",c],["#login","click","#login-page-google-login",u.click],["subscribe","whi:show_login",l],[".js-login","click",l]]}}),this.require.define({"modules/views/registration/registration":function(e,t,i){var n=t("../../lib/view"),o=(t("../../lib/lightbox"),t("../../lib/tracking")),r=t("../../lib/routes"),s=t("../../lib/config"),a=t("../modal"),l=i.exports=new n;l.matchRoute=function(){return!0},l.init=function(){if("1"==d("login"))return $.cookie("logged_in_earlier")||$.cookie("logged_in_earlier",!0,{path:window.location.pathname}),v();"1"==d("logout")&&$.removeCookie("logged_in_earlier"),"1"==d("sign_up")&&u()};var c=function(){$.cookie("lightbox_registration",!!$("#registration_intercept").length,{path:"/"})},u=function(){o.trackGAEvent("Registration","User Created",s.user_id||"unknown")},d=function(e){var t=new RegExp("(?:^|\\?|&)"+e+"=([^&]+)","i"),i=window.location.search.match(t);return i&&i[1]},h=function(e,t){var i=function(n,o){o.user==e&&($.unsubscribe("whi:followed",i),t())};$.subscribe("whi:followed",i)},f=function(e,t){var i=function(n,o){o.entry==e&&($.unsubscribe("whi:hearted",i),t())};$.subscribe("whi:hearted",i)},p=function(e,t){var i=function(n,o){o.collectionId==e&&($.unsubscribe("whi:followed_collection",i),t())};$.subscribe("whi:followed_collection",i)},m=function(e,t){switch(e.type){case"follow":h(e.userId,t),$.publish("whi:follow_user",e);break;case"heart":f(e.entryId,t),$.publish("whi:heart_entry",e);break;case"follow_collection":p(e.collectionId,t),$.publish("whi:follow_collection",e);break;default:console.error("doAction called with invalid type")}},g=function(){var e=$("#user_birth_month").val(),t=$("#user_birth_day").val(),i=$("#user_birth_year").val(),n=!0,o=16;if(e&&t&&i)try{e=parseInt(e)-1,t=parseInt(t),i=parseInt(i),today=new Date,(today.getFullYear()-i<o||i==today.getFullYear()-o&&(e>today.getMonth()||e==today.getMonth()&&t>today.getDate()))&&(n=!1)}catch(e){console.error(e)}return!!n||($.ajax({url:"/join/not_old_enough?registration=1",type:"GET",success:function(e){a.load(e),$.publish("whi:content_updated",{url:"/join/not_old_enough?registration=1",name:"sign_up_failed"})}}),!1)},v=function(e){w(!1);var t=b();t.done&&(t.done=t.done.replace(/(^|\?|&)login=[^&]+/gi,""));var i=function(){if(!/[&\?]login=1/.test(window.location.search)){$.removeCookie("whi:registration_complete_data",{path:"/",expires:30}),o.trackGAEvent("Registration","FlowCompleted");var i=e||t.done||r.getUrl("/dashboard");window.location=r.mergeQueryParams(i,"registration_complete=1")}};t.action?m(t.action,i):i()},b=function(){var e=$.cookie("whi:registration_complete_data");try{e=JSON.parse(e)}catch(t){e={}}return e},w=function(e){return e?$.cookie("whi_registration_step",e,{expires:999,path:"/"}):$.removeCookie("whi_registration_step",{expires:999,path:"/"})},y=function(e){if(e.preventDefault(),$(window).width()<800)window.location.href=e.target.href||"/join";else{var t="/join?modal=1";if(e.target.href&&e.target.href.indexOf("?")>=0&&URLSearchParams){var i=new URL(e.target.href).searchParams;i.get("done")&&(t+="&done="+escape(i.get("done")))}$.ajax({url:t,type:"GET",success:function(e){a.load(e),$.publish("whi:content_updated",{url:"/join",name:"sign_up"}),$("#user_birth_month").closest("form").submit(g)}})}},_=function(e){e.preventDefault();var t=$("#user_password")[0];t&&("password"==t.type?(t.type="text",$(".js-show-password").hide(),$(".js-hide-password").show()):(t.type="password",$(".js-hide-password").hide(),$(".js-show-password").show()))};l.events=[["subscribe","whi:signup",u],["subscribe","whi:initiate_signup",c],["subscribe","whi:show_signup",y],[".js-sign-up","click",y],[".js-show-password","click",_],[".js-hide-password","click",_]]}}),this.require.define({"modules/views/registration/testimonials":function(e,t,i){var n=t("../../lib/view"),o=5e3,r=i.exports=new n;r.matchRoute=function(){return $("#registration_testimonials").length},r.init=function(){this.slideInterval=setInterval(s,o)},r.teardown=function(){clearInterval(this.slideInterval)};var s=function(){var e=$("#registration_testimonials .testimonials_carousel"),t=e.find("li"),i=t.first().outerWidth()+parseInt(t.first().css("margin-left"),10)+parseInt(t.first().css("margin-right"),10),n=i*t.length,o=parseInt(e.css("left"),10)-i,r=function(){};Math.abs(o)>=n&&(e.prepend(t.last().clone()),e.css({left:0}),o=-i,r=function(){e.find("li:first-child").remove(),e.css({left:0})}),e.animate({left:o},{duration:800,complete:r,easing:"easeInOutCubic"})}}}),this.require.define({"modules/views/share_modal":function(e,t,i){"use strict";t("../lib/config");var n=t("../lib/routes"),o=t("../lib/view"),r=t("../lib/tracking"),s=t("../lib/link_social_network"),a=t("../utils/utils"),l=t("./modal"),c=i.exports=new o;c.matchRoute=function(){return $(".js-share-modal, .js-share-modal-basic").length},c.init=function(){};var u=function(e){var t=$(".js-share-modal input[type=submit]"),i=$(".js-modal-errors"),o=$(this),s=o.find("textarea").val(),c=o.find("input[name=type]").val(),u=o.find("input[name=link]").val(),d=o.find("input[name=id]").val(),h=[];return e.preventDefault(),o.find("input[value=facebook]").is(":checked")&&h.push("facebook"),o.find("input[value=twitter]").is(":checked")&&h.push("twitter"),o.find("input[value=twitter]").is(":checked")&&h.push("tumblr"),g(!1),t.addClass("btn-is-loading"),i.empty(),$.ajax(n.share(),{type:"post",data:{services:h,type:c,content:s,link:u,id:d},success:function(e){var t=!1;r.trackGridAction("Share",$(".entry[data-entry-id='"+d+"']")),e.forEach((function(e){e.success&&r.trackSocial(e.service,"modal_share"),e.error&&($(".js-modal-errors").append($("<p>").text(e.error)),t=t||e.error)})),t?($(".js-modal-errors").fadeIn(),setTimeout((function(){$(".js-modal-errors").fadeOut()}),5e3)):l.closeAll()},error:function(e,t,i){a.defaultAjaxErrorCallback(e,t,i),l.closeAll()},complete:function(){g(!0),t.removeClass("btn-is-loading")}}),!1},d=function(){var e=$(this),t=e.find("a").attr("href"),i=e.attr("data-service");return f(t,i),!1},h=function(e){return function(){var t=$(this),i=($(".js-share-modal input[type=submit]"),t.hasClass("js-connected")),o=t.find("input[type=checkbox]");if("tumblr"===e&&o.attr("checked")){var r=t.find("a").attr("href");r=(r=r.replace(/source=.*?&/,"source="+encodeURIComponent($(".js-carousel-images img").attr("src").replace("thumb","original"))+"&")).replace(/caption=.*?&/,"caption="+encodeURIComponent($(".js-share-modal textarea").val())+"&"),f(r,"tumblr")}if(!i&&"tumblr"!==e){var a=n["link_"+e];o.attr("checked",!1);var l=s.openPopup(a(),(function(i){"success"===i&&(t.addClass("js-connected"),o.attr("checked",!0),g(),"twitter"===e&&p(!0)),s.closePopup(l)}));return!1}$(".js-btn-facebook input[type=checkbox]").attr("checked");var c=!!$(".js-btn-twitter input[type=checkbox]").attr("checked");g(),p(c)}},f=function(e,t){var i=500,n=445,o=screen.width/2-i/2,s=200;window.open(e,"title","width="+i+",height="+n+",scrollbars=yes,status=1,left="+o+",top="+s);r.trackSocial(t,"inline_share")},p=function(e){$(".js-counter").toggle(e),m()},m=function(){if($(".js-btn-twitter input[type=checkbox]").is(":checked")){var e=$(".js-message");e.val().length>140&&e.val(e.val().slice(0,140)),$(".js-counter").text("("+(140-e.val().length)+")")}},g=function(e){var t=$(".js-share-modal input[type=submit]");void 0===e&&(e=(e=(e=(e=!1)||$(".js-btn-facebook input[type=checkbox]").is(":checked"))||$(".js-btn-twitter input[type=checkbox]").is(":checked"))||$(".js-btn-tumblr input[type=checkbox]").is(":checked")),t.toggleClass("btn-is-disabled",!e),t.attr("disabled",!e)};c.events=[[".js-share-modal","submit","form",u],[".js-share-modal-basic","click",".js-btn-facebook",d],[".js-share-modal-basic","click",".js-btn-tumblr",d],[".js-share-modal-basic","click",".js-btn-twitter",d],[".js-share-modal","changed",".js-btn-facebook",h("facebook")],[".js-share-modal","changed",".js-btn-twitter",h("twitter")],[".js-share-modal","changed",".js-btn-tumblr",h("tumblr")],[".js-share-modal","keyup",".js-message",m]]}}),this.require.define({"modules/views/sidebar":function(e,t,i){"use strict";var n=t("../lib/view"),o=i.exports=new n,r=!1,s=null;o.matchRoute=function(){return $(".sidebar").length&&$(".grid-item").length},o.init=function(){r||(r=!0,s=$(".sidebar")[0].clientHeight,a())};var a=function(){var e=$(".grid-item")[0].clientHeight,t=s;if(t%e!=0&&t%e!=1)if(e>t)$(".sidebar").css("height",e);else{var i=e-t%e;$(".sidebar").css("height",t+i+1)}},l=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments),setTimeout((function(){t=!1}),100))}};o.events=[[".sidebar","resize",l(a)]]}}),this.require.define({"modules/views/static/app":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/config"),r=i.exports=new n;r.matchRoute=function(){return $(".apps-page").length};var s=function(){$.publish("trackGAEvent",["DownloadApp","iTunesStore",o.user_id]),$.publish("trackEvent",["click",{widget:"DownloadApp",action:"iTunesStore"}])},a=function(){$.publish("trackGAEvent",["DownloadApp","GooglePlay",o.user_id]),$.publish("trackEvent",["click",{widget:"DownloadApp",action:"GooglePlay"}])};r.events=[[".apps-page","click",".store-itunes",s],[".apps-page","click",".store-play",a]]}}),this.require.define({"modules/views/static/contact":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return!1},o.events=[]}}),this.require.define({"modules/views/static/download_heart_button":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".js-download-heart-button").length};var r=function(e){var t=$(this),i=t.html();t.hasClass("disabled")?e.preventDefault():(t.html(t.attr("data-disable-with")).addClass("disabled"),setTimeout((function(){t.html(i).removeClass("disabled")}),5e3),chrome&&(chrome.webstore.install(),e.preventDefault()))};o.events=[[".js-download-heart-button","click",r]]}}),this.require.define({"modules/views/static/facebook_timeline":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".facebook-timeline").length},o.init=function(){$("#ticker-item").hover((function(){$("#ticker-hover").fadeIn(),$("#fb-ticker-container").addClass("hover")}),(function(){$("#ticker-hover").fadeOut(),$("#fb-ticker-container").removeClass("hover")}))}}}),this.require.define({"modules/views/static/left_share_buttons":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".left_share_buttons").length};var r=!1,s=function(){var e=$(window).scrollTop();$(".left_share_buttons").css({top:e}),r=!1},a=function(){r||(r=!0,requestAnimationFrame(s))};o.events=[[window,"scroll",a]]}}),this.require.define({"modules/views/static/popular":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/routes"),r=i.exports=new n;r.matchRoute=function(){return $(".date_selection_container .popular_date_select").length},r.init=function(){};var s=function(){return $(".date_selection_container .date_selection").toggle(),!1},a=function(){var e=$(this).closest(".date_selection"),t={date:$(this).data("date"),selected:$(this).data("selected-date")};return $(this).data("query")&&(t.query=$(this).data("query")),$.ajax({url:o.date_selection_path(),data:t,success:function(t){e.html(t),$.publish("whi:content_updated")}}),!1},l=function(){0==$(this).closest(".date_selection").length&&$(".date_selection_container .date_selection").hide()},c=function(e){var t=$(e.target);return!(!t.attr("href")||t.hasClass("disabled"))};r.events=[[".date_selection_container .popular_date_select","click",s],[".date_selection_container .date_selection_close","click",s],[".date_selection_container .date_selection a[data-date]","click",a],[".date_selection_container .date_selection","click",c],[window,"click","*",l]]}}),this.require.define({"modules/views/static/postcards":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/config"),r=i.exports=new n;r.matchRoute=function(){return $(".js-postcards").length};var s=function(){$.publish("trackGAEvent",["DownloadApp","iTunesStore",o.user_id]),$.publish("trackEvent",["click",{widget:"DownloadApp",action:"iTunesStore"}])},a=function(){$.publish("trackGAEvent",["DownloadApp","GooglePlay",o.user_id]),$.publish("trackEvent",["click",{widget:"DownloadApp",action:"GooglePlay"}])};r.events=[[".js-postcards","click",".store-itunes",s],[".js-postcards","click",".store-play",a]]}}),this.require.define({"modules/views/static/postcards_gallery":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/config"),r=i.exports=new n;r.matchRoute=function(){return $(".js-postcards-gallery").length},r.init=function(){$(window).width()>767&&$(".js-sticky-postcard").each((function(){var e=$(this),t=e.width(),i=($(window).height()-e.height())/2;i>=0&&(e.css("width",t),e.css("position","fixed"),e.css("top",i))}))};var s=function(){$.publish("trackGAEvent",["DownloadApp","iTunesStore",o.user_id]),$.publish("trackEvent",["click",{widget:"DownloadApp",action:"iTunesStore"}])},a=function(){$.publish("trackGAEvent",["DownloadApp","GooglePlay",o.user_id]),$.publish("trackEvent",["click",{widget:"DownloadApp",action:"GooglePlay"}])};r.events=[[".js-postcards-gallery","click",".store-itunes",s],[".js-postcards-gallery","click",".store-play",a]]}}),this.require.define({"modules/views/text_preview":function(e,t,i){"use strict";var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".js-text-preview-input").length};var r=function(){var e=$(this),t=e.data("target")||".js-text-preview-target",i=e.val()||e.data("preview-default")||"";$(t).text(i)};o.events=[[".js-text-preview-input","keyup focus blur change input load",r]]}}),this.require.define({"modules/views/toggle_element":function(e,t,i){var n=t("../lib/view"),o=(t("../lib/lightbox"),i.exports=new n);o.matchRoute=function(){return $(".js-toggle-element").length||$(".js-switch-elements").length||$(".js-show-element").length||$(".js-hide-element").length},o.init=function(){};var r=function(e){e.preventDefault();var t=$(this).data("element");u(t)},s=function(e){e.preventDefault();var t=$(this),i=t.data("element"),n=t.find(":selected");l(n,i)},a=function(){var e=$(this),t=$(this).data("element");l(e,t)},l=function(e,t){e.hasClass("js-show-element")?$(t).show():e.hasClass("js-hide-element")&&$(t).hide()},c=function(){console.log("switchElements");var e=$(this);e.find("option").each((function(){var e=$(this).data("element");$(e).hide()}));var t=e.find(":selected").data("element");$(t).show()},u=function(e){$(e).toggle()};o.events=[[window,"click",".js-toggle-element",r],[window,"click","js-show-element, .js-hide-element",a],[window,"change",".js-switch-elements",c],[window,"change",'select:has(".js-hide-element, .js-show-element")',s]]}}),this.require.define({"modules/views/user_account/edit_notices":function(e,t,i){var n,o,r,s=t("../../lib/config"),a=t("../../lib/view"),l=i.exports=new a;l.matchRoute=function(){return $(".js-toggle-checkboxes").length},l.init=function(){n=s.emailOptedOut,o=$(".js-toggle-checkboxes"),r=$(".js-notices-form input:checkbox"),o.attr("checked",c()),n&&r.attr("checked",!1)};var c=function(){return r.length===r.filter(":checked").length},u=function(e){e.preventDefault(),$checkboxes=$(e.target).closest("tr").find("input:checkbox"),$firstCheckBox=$($checkboxes[0]),checked=!$firstCheckBox.attr("checked"),$checkboxes.attr("checked",checked)},d=function(){o.attr("checked",c())},h=function(){r.attr("checked",o.is(":checked"))};l.events=[[".js-notices-form label","click",u],[".js-notices-form input:checkbox","click",d],[".js-toggle-checkboxes","click",h]]}}),this.require.define({"modules/views/user_account/edit_profile":function(e,t,i){t("../../lib/config");var n=t("../../lib/view"),o=t("../../lib/tracking"),r=i.exports=new n;r.matchRoute=function(){return $(".js-profile-color").length},r.init=function(){};var s=function(e){e.preventDefault(),$(this).find("input[type=radio]").prop("checked",!0),$(this).closest("div").find(".js-profile-color").each((function(e,t){var i=$(t).find(".js-checkmark");$(t).find("input[type=radio]").prop("checked")?i.css("visibility","visible"):i.css("visibility","hidden")})),o.trackEvent("BackgroundColors","Click")};r.events=[[".js-profile-color","click",s]]}}),this.require.define({"modules/views/user_account/email_suggestion":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".email-suggestion").length},o.init=function(){};var r=function(){var e=$(this).attr("data-email-field-id"),t=$(this).attr("data-did-you-mean");$(this).mailcheck({suggested:function(i,n){var o="<u>"+n.address+"@<strong>"+n.domain+"</strong></u>",r='<a href="#" onclick="'+("$('#"+e+"').val('"+n.full.replace("'","\\'")+"');$('#"+e+"_suggestion').hide();return false;")+'">'+t.replace("__EMAIL__",o)+"</a>";$("#"+e+"_suggestion").html(r).show()},empty:function(){$("#"+e+"_suggestion").hide()}})};o.events=[[".email-suggestion","change",r]]}}),this.require.define({"modules/views/user_account/facebook_timeline":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#update-facebook-timeline").length},o.init=function(){};var r=function(){return $("#update-facebook-timeline").submit(),!1},s=function(){$(".js-entry-container")||$(this).is(".success-highlight")?$("#update-facebook-timeline").effect("highlight",{},2e3):window.location.reload()};o.events=[["#update-facebook-timeline","ajax:success",s],["#update-facebook-timeline-button","click",r]]}}),this.require.define({"modules/views/user_account/find_friends":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/paginator"),r=t("../../lib/tracking"),s=t("../../lib/facebook"),a=t("../../lib/facebook_api"),l=i.exports=new n;l.matchRoute=function(){
return $("#find_friends_result,#follow_all").length},l.init=function(){var e=$("#find_friends_result[data-result-url]");e.attr("data-result-url")&&$.post(e.attr("data-result-url"),{},(function(e){$("#find_friends_result").html(e),$("#other_networks").show(),new o("#find_friends_result .userlist",".pagination")}),"html"),0==$(".user-list .js-follow-button").length&&$("#follow_all").hide(),$.subscribe("whi:fb_init",c)};var c=function(){FB.getLoginStatus((function(e){"unknown"===e.status?FB.login((function(e){e.authResponse&&($(".auth_explain").hide(),$(".invite-sidebar").show())})):"connected"===e.status&&($(".auth_explain").hide(),$(".invite-sidebar").show())}))},u=function(){return $("#find_friends_result .js-follow-button").click(),r.trackGAEvent("Follow","Follow","all"),!1},d=function(){return s.load(a.requestDialog),!1};l.events=[[window,"click","#find_friends_result #follow_all",u],[window,"click","#invite_friends_button",d]]}}),this.require.define({"modules/views/user_account/link_account":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/tracking"),r=t("../../lib/routes"),s=t("../../utils/utils"),a=t("../../lib/link_social_network"),l=t("../../lib/facebook"),c=t("../../lib/facebook_api"),u=i.exports=new n;u.matchRoute=function(){return $(".link-accounts").length};var d=function(){var e=$(this).attr("data-service"),t=$(this).attr("data-link");o.trackSocial(e,"link");var i=a.openPopup(t,(function(e){$.ajax({url:r.link_account(),success:function(t){"success"===e&&($("#sidebar").html(t),$.publish("whi:content_updated")),a.closePopup(i)},error:function(e,t,n){s.defaultAjaxErrorCallback(e,t,n),a.closePopup(i)}})}));return!1},h=function(){var e=$(this).attr("data-service");o.trackSocial(e,"unlink")},f=function(){o.trackSocial("facebook","add_timeline_link")},p=function(){var e=$(this).attr("data-service");o.trackSocial(e,"link_find")},m=function(){return l.load(c.requestDialog),!1},g=function(){var e=$(this);if(e.is(".share_toggle")){var t=e.closest(".sharing-setting").data("update-url"),i=$(this).is(":checked")?"yes":0;$.ajax({type:"put",url:t,data:{share_updates:i},success:function(){},error:s.defaultAjaxErrorCallback})}};u.events=[[".link-accounts","click",".link-account:not(.linked)",d],[".link-accounts","click",".unlink-account",h],[".link-accounts","click",".add_timeline_link",f],[".sharing-settings","change",".share_toggle",g],[".link_find","click",p],[window,"click","#link_invite_button",m]]}}),this.require.define({"modules/views/user_account/verify_age":function(e,t,i){var n=t("../../lib/view"),o=t("../../views/modal"),r=t("../../lib/config"),s=t("../../utils/utils"),a=t("../../lib/tracking"),l=i.exports=new n;l.matchRoute=function(){return r.age_verification};var c=function(){$.get("/accounts/age_verification").done((function(e){e&&""!=e.trim()&&(o.load(e),$(".js-verify-age-form").submit(f),a.trackEvent("AgeVerification","WebExistingAgeGate"))}))},u=function(){a.trackEvent("AgeVerification","WebExistingAgeGateFail"),$.get("/accounts/age_verification_failed").done((function(e){e&&""!=e.trim()&&o.load(e)}))},d=function(){a.trackEvent("AgeVerification","WebExistingAgeGateSuccess"),$.get("/accounts/age_verification_success").done((function(e){e&&""!=e.trim()&&o.load(e)}))},h=function(){a.trackEvent("AgeVerification","WebExistingAgeGateError"),o.load('<div class="modal-element"><div class="grid text-center panel">'+s.render5xxAjaxErrorBox()+"</div></div>")},f=function(){return $(this).find("button[type=submit]").attr({disabled:!0}),$.post("/accounts/verify_age",$(this).serialize()).done((function(e){e.verified?d():u()})).error(h),!1};l.init=function(){c()},l.events=[]}}),this.require.define({"modules/views/user_profile/profile":function(e,t,i){t("../../lib/routes");var n=t("../../lib/view"),o=t("../../utils/utils"),r=t("../../lib/tracking"),s=i.exports=new n;s.matchRoute=function(){return $(".user-header").length};var a=function(){r.trackGAEvent("Profile","TagClick",o.uniqueUserId())},l=function(){r.trackGAEvent("Profile","HeartSearch",o.uniqueUserId())};s.events=[[document,"click",".user-tags a.tag",a],[document,"submit","#user-search",l]]}}),this.require.define({"modules/views/user_set":function(e,t,i){var n=t("../lib/view"),o=(t("../lib/lightbox"),i.exports=new n);o.matchRoute=function(){return $(".js-edit-set-form").length||$(".js-create-set-form").length},o.init=function(){};var r=function(e){e.preventDefault(),$(".js-edit-set-form").show(),$(".js-set-name-field").focus()},s=function(e){e.preventDefault(),$(".js-edit-set-form").hide(),$(".js-set-name-field").blur()},a=function(e){e.preventDefault(),$(".js-create-set-form").show(),$(".js-set-name-field").focus()},l=function(e){e.preventDefault(),$(".js-create-set-form").hide(),$(".js-set-name-field").focus()};o.events=[[window,"click",".js-edit-set-button",r],[window,"click",".js-edit-set-cancel",s],[window,"click",".js-create-set-button",a],[window,"click",".js-create-set-cancel",l]]}}),this.require.define({"modules/views/widgets":function(e,t,i){var n=t("../lib/view"),o=(t("../lib/lightbox"),i.exports=new n);o.matchRoute=function(){return $(".js-widget-builder").length},o.init=function(){a()};var r=function(){var e=$(".js-widget-url").val(),t="-",i=e.match(/entry\/([0-9]+)/),n=e.match(/\/([a-zA-Z0-9_]+)\/?$/),o=e.match(/\/collections\/([0-9]+)/);return i?t="widget/entry/"+i[1]:n?t="widget/hearts/"+n[1]:o&&(t="widget/collection/"+o[1]),t+"/?"},s=function(){return $(".js-widget-builder").serialize()+""},a=function(e){var t="//"+window.location.hostname+"/",i=s();if($(".js-widget-url").length){var n=t+r(e)+i,o=$("<iframe></iframe>").attr("frameborder","0").attr("scrolling","no");o.attr("src",n),o.attr("width",$(".js-widget-width").val()),$(".js-widget-preview").html(o),l(o),$(".js-iframe-url").text(n)}$(".js-code-params").text(i)},l=function(e){e.load((function(){var t=$(this.contentWindow.document).find("body").height();t=0!=t?t:540,e.css({height:t+"px"}),$(".js-iframe-style").html("width:"+$(".js-widget-width").val()+"px;height:"+t+"px")}))};o.events=[[".js-widget-builder","change","select, input",a],[".js-widget-builder","keyup","input, textarea",a]]}}),this.require.define({"modules/whi":function(e,t,i){var n,o,r,s,a=t("./lib/config"),l=t("./utils/logger"),c=t("./lib/heart_button_thumb"),u=t("./lib/heart_button_thumb_anonymous"),d=t("./lib/tracking"),h=(t("./lib/whi_history"),t("./utils/anonymous_session")()),f=i.exports=function(e){a.updateCache(),o=(e=e||{}).views||[],n=e.modules||[],d.init(),this.init(),h.track_anonymous_session()};f.prototype.subscriptions={"whi:content_updated":function(){s.addHearts&&s.addHearts(),this.refreshViews()},"whi:tags_loaded":function(){s.addHearts&&s.addHearts()},"whi:load_view":function(){var e=Array.prototype.slice.call(arguments,1);this.loadView.apply(this,e)},"whi:unload_view":function(e,t){try{this.views[t]._teardown()}catch(e){l.log("Could not unload view: "+t,e.toString())}for(var i=r.length-1;i>=0;i--)if(r[i].name==t)return r.splice(i,1)}},f.prototype.init=function(){var e=this;for(var i in r=this.currentViews=[],n.forEach((function(e){t("./lib/"+e).init()})),s=(/^yes/.test(a.authenticated)?c:u).init(),this.subscriptions)this.subscriptions.hasOwnProperty(i)&&$.subscribe(i,this.subscriptions[i].bind(this));e.views={},o.forEach((function(i,n){try{var r=t("./views/"+i);r.name=i,o[n]=r,e.views[r.name]=r}catch(t){if(a.dev_mode)throw t;l.error("failed to load view",i,"with error",t.stack),e.viewErrors=e.viewErrors||{},e.viewErrors[i]=t}})),this.refreshViews()},f.prototype.loadView=function(e){var t=this.views[e];if(!t)return l.error("tried to instantiate non existent view",e);r.push(t);var i=Array.prototype.slice.call(arguments,1);t._init.apply(t,i)},f.prototype.clearViews=function(){r.forEach((function(e){e._teardown()}))},f.prototype.refreshViews=function(){this.clearViews(),r=o.filter((function(e){return e?e.matchRoute?!!e.matchRoute()&&(e._init(),e):l.error("View",e.name,"is missing a matchRoute method."):l.error("view",e.name,"does not export a view. Did you forget to module.exports the view?")})),l.log("current views : ",r.map((function(e){return e.name})))}}}),$((function(){$("[data-include-witlee=true]").length>0&&whiConfig.witleeEnabled&&$((function(){loadWitleeScript()}))})),$((function(){$(".js-carousel-next").live("click",(function(e){e.preventDefault();var t=$(this).closest(".js-carousel").find(".js-carousel-images"),i=t.find("img").first();t.append(i)})),$(".js-carousel-prev").live("click",(function(e){e.preventDefault();var t=$(this).closest(".js-carousel").find(".js-carousel-images"),i=t.find("img").last();t.prepend(i)}))})),$((function(){function e(){clearTimeout(t),t=!1}var t=!1,i=!1,n=0;$(".js-doubletap-action").on("touchend",(function(o){if(o.preventDefault(),prevScrollTop=n,n=$(window).scrollTop(),i||n!=prevScrollTop)return!0;var r=$(this),s=r.attr("href"),a=r.data("doubletap-action");if(t)return e(),r.removeClass("is-doubletapped"),r.addClass("is-doubletapped"),window.location=a,!0;t=setTimeout((function(){e(),window.location=s}),300)})),$(window).on("touchstart",(function(){i=!1,n=$(window).scrollTop()})),$(window).on("scroll",(function(){e(),i=!0}))})),$((function(){jQuery.expr[":"].contains=function(e,t,i){return jQuery(e).text().toUpperCase().indexOf(i[3].toUpperCase())>=0},$(window).on("click",".js-selectable",(function(e){console.log("selectable click");var t=null;$(this),t=$(this).find("input[type=checkbox]"),$(e.target).is("input[type=checkbox]")||(t.prop("checked",!t.prop("checked")),e.preventDefault()),$(this).toggleClass("is-selected"),$(this).trigger("changed",{checked:t.prop("checked")})})),$(".js-filter-list").keyup((function(e){var t=$(this),i=t.val(),n=t.closest(".list");i&&27!=e.keyCode?(n.find(".list-item").css("display","none"),n.find(".list-item:contains("+i+")").css("display","block"),n.find(".list-item:first-child").css("display","block")):n.find(".list-item").css("display","block")}))})),$(".overlay-tap, .overlay-tap-reverse").on("click",(function(){$(this).toggleClass("is-active")})),$(".blur-tap-reverse").on("click",(function(){$(this).toggleClass("is-active")})),$((function(){function e(){var e=this;this.container=$(".sponsored-podcast-container.three-dots-carousal-container"),this.isPresent=function(){return e.container.length>0},this.sendEvent=function(t,i){var n=e.campaignName(t),o=e.campaignProductTitle(t);ga("send","event",n,i,o)},this.getCampaign=function(t){return $(".podcast-promotion[id='"+t+"']",e.container)},this.campaignName=function(e){if(e)return e.data("name")},this.campaignProductTitle=function(e){if(e)return e.data("product-title")},this.getCampaignFromRadioButton=function(t){e.container;var i=null;if(t&&t.length>0){var n="slide_img"+t.attr("id").replace("i","");i=e.getCampaign(n)}return i},this.activeRadioButton=function(){return $('input[type="radio"][name="images"]:checked',e.container)},this.displayingCampaign=function(){return e.getCampaignFromRadioButton(e.activeRadioButton())},this.displayingCampaignName=function(){e.campaignName(e.displayingCampaign())},this.displayingCampaignProductTitle=function(){e.campaignProductTitle(e.displayingCampaign())},this.recordImpressionOfCampaign=function(t){t&&t.length>0&&!t.data("impression-recorded")&&(e.sendEvent(t,"campaign_impression"),t.data("impression-recorded",!0))},this.recordImpressionOfdisplayingCampaign=function(){e.recordImpressionOfCampaign(e.displayingCampaign())},this.recordClicks=function(){$(".podcast-promotion",e.container).click((function(t){var i=$(t.target),n=i.closest(".podcast-promotion"),o=i.closest(".play-icon").length>0?"campaign_play":"campaign_click";e.sendEvent(n,o)}))},this.recordImpressions=function(){e.recordImpressionOfdisplayingCampaign(),$(".slider span.label",e.container).click((function(t){t.preventDefault();var i=$(this);if(!i.hasClass("disabled")){var n=i.data("for");if(n){var o=$("#"+n,e.container);if(o[0]){o[0].checked=!0;var r=e.getCampaignFromRadioButton(o);e.recordImpressionOfCampaign(r)}}}}))},this.captureAutoPlay=function(){$(".play-icon",e.container).click((function(e){e.preventDefault(),window.open($(this).data("url"),"_blank")}))}}podcastPromotionCarousel=new e,podcastPromotionCarousel.isPresent()&&(podcastPromotionCarousel.recordImpressions(),podcastPromotionCarousel.recordClicks(),podcastPromotionCarousel.captureAutoPlay())}));var checkRequiredFields=function(e){var t=!1;$(e).closest("form").find(".js-required-field").each((function(){return $(this).hasClass("js-required-max-file-size")?this.files&&this.files[0]&&(this.files[0].size>10485760?($(this).addClass("js-validation-error"),t=!0):$(this).removeClass("js-validation-error")):$(this).val()||(t=!0),!0})),$(".js-required-submit").attr("disabled",t)};$("form .js-required-submit").each((function(){var e=$(this).closest("form");e.find(".js-required-field").on("click change load focus keyup blur",(function(){checkRequiredFields(this)})),$((function(){checkRequiredFields(e)}))})),$(".js-sticky").each((function(){function e(){n||(i=t.offset().top);var e=$(window).scrollTop()+o;i<e?(n=!0,t.css("position","fixed").css("top",o+"px")):"static"!=t.css("position")&&(n=!1,t.css("position","static"))}var t=$(this);t.css("width",t.parent().width());var i=t.offset().top,n=!1,o=(t.data("stickyTop")?$("#"+t.data("stickyTop")):t.parent()).offset().top;t.data("maxHeight")&&t.height(window.innerHeight-o),$(window).scroll(debounce(e,10)),e()})),$(".js-article-actions").each((function(){function e(){var e=$(window).scrollTop();if(e>=i){if(e<=n.offset().top-t.height()-145){var o=e-i;t.css("transform","translateY("+o+"px)")}}else t.css("transform","translateY(0)")}var t=$(this),i=t.offset().top-100,n=$(".js-sticky-max");$(window).scroll(e),$(window).resize(e),e()})),function(){function e(e){return!!e.exifdata}function t(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var i=atob(e),n=i.length,o=new ArrayBuffer(n),r=new Uint8Array(o),s=0;s<n;s++)r[s]=i.charCodeAt(s);return o}function i(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){200!=this.status&&0!==this.status||t(this.response)},i.send()}function o(e,n){function o(t){var i=r(t),o=s(t);e.exifdata=i||{},e.iptcdata=o||{},n&&n.call(e)}if(e.src)if(/^data\:/i.test(e.src))o(t(e.src));else if(/^blob\:/i.test(e.src)){(l=new FileReader).onload=function(e){o(e.target.result)},i(e.src,(function(e){l.readAsArrayBuffer(e)}))}else{var a=new XMLHttpRequest;a.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";o(a.response),a=null},a.open("GET",e.src,!0),a.responseType="arraybuffer",a.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var l;(l=new FileReader).onload=function(e){h&&console.log("Got file of length "+e.target.result.byteLength),o(e.target.result)},l.readAsArrayBuffer(e)}}function r(e){var t=new DataView(e);if(h&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return h&&console.log("Not a valid JPEG"),!1;for(var i,n=2,o=e.byteLength;n<o;){if(255!=t.getUint8(n))return h&&console.log("Not a valid marker at offset "+n+", found: "+t.getUint8(n)),!1;if(i=t.getUint8(n+1),h&&console.log(i),225==i)return h&&console.log("Found 0xFFE1 marker"),d(t,n+4,t.getUint16(n+2)-2);n+=2+t.getUint16(n+2)}}function s(e){var t=new DataView(e);if(h&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return h&&console.log("Not a valid JPEG"),!1;for(var i=2,n=e.byteLength,o=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};i<n;){if(o(t,i)){var r=t.getUint8(i+7);return r%2!=0&&(r+=1),0===r&&(r=4),a(e,i+8+r,t.getUint16(i+6+r))}i++}}function a(e,t,i){for(var n,o,r,s,a=new DataView(e),l={},c=t;c<t+i;)28===a.getUint8(c)&&2===a.getUint8(c+1)&&(s=a.getUint8(c+2))in w&&((r=a.getInt16(c+3))+5,o=w[s],n=u(a,c+5,r),l.hasOwnProperty(o)?l[o]instanceof Array?l[o].push(n):l[o]=[l[o],n]:l[o]=n),c++;return l}function l(e,t,i,n,o){var r,s,a,l=e.getUint16(i,!o),u={};for(a=0;a<l;a++)r=i+12*a+2,!(s=n[e.getUint16(r,!o)])&&h&&console.log("Unknown tag: "+e.getUint16(r,!o)),u[s]=c(e,r,t,i,o);return u}function c(e,t,i,n,o){var r,s,a,l,c,d,h=e.getUint16(t+2,!o),f=e.getUint32(t+4,!o),p=e.getUint32(t+8,!o)+i;switch(h){case 1:case 7:if(1==f)return e.getUint8(t+8,!o);for(r=f>4?p:t+8,s=[],l=0;l<f;l++)s[l]=e.getUint8(r+l);return s;case 2:return u(e,r=f>4?p:t+8,f-1);case 3:if(1==f)return e.getUint16(t+8,!o);for(r=f>2?p:t+8,s=[],l=0;l<f;l++)s[l]=e.getUint16(r+2*l,!o);return s;case 4:if(1==f)return e.getUint32(t+8,!o);for(s=[],l=0;l<f;l++)s[l]=e.getUint32(p+4*l,!o);return s;case 5:if(1==f)return c=e.getUint32(p,!o),d=e.getUint32(p+4,!o),(a=new Number(c/d)).numerator=c,a.denominator=d,a;for(s=[],l=0;l<f;l++)c=e.getUint32(p+8*l,!o),d=e.getUint32(p+4+8*l,!o),s[l]=new Number(c/d),s[l].numerator=c,s[l].denominator=d;return s;case 9:if(1==f)return e.getInt32(t+8,!o);for(s=[],l=0;l<f;l++)s[l]=e.getInt32(p+4*l,!o);return s;case 10:if(1==f)return e.getInt32(p,!o)/e.getInt32(p+4,!o);for(s=[],l=0;l<f;l++)s[l]=e.getInt32(p+8*l,!o)/e.getInt32(p+4+8*l,!o);return s}}function u(e,t,i){var o="";for(n=t;n<t+i;n++)o+=String.fromCharCode(e.getUint8(n));return o}function d(e,t){if("Exif"!=u(e,t,4))return h&&console.log("Not valid EXIF data! "+u(e,t,4)),!1;var i,n,o,r,s,a=t+6;if(18761==e.getUint16(a))i=!1;else{if(19789!=e.getUint16(a))return h&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;i=!0}if(42!=e.getUint16(a+2,!i))return h&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var c=e.getUint32(a+4,!i);if(c<8)return h&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(a+4,!i)),!1;if((n=l(e,a,a+c,g,i)).ExifIFDPointer)for(o in r=l(e,a,a+n.ExifIFDPointer,m,i)){switch(o){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":r[o]=b[o][r[o]];break;case"ExifVersion":case"FlashpixVersion":r[o]=String.fromCharCode(r[o][0],r[o][1],r[o][2],r[o][3]);break;case"ComponentsConfiguration":r[o]=b.Components[r[o][0]]+b.Components[r[o][1]]+b.Components[r[o][2]]+b.Components[r[o][3]]}n[o]=r[o]}if(n.GPSInfoIFDPointer)for(o in s=l(e,a,a+n.GPSInfoIFDPointer,v,i)){switch(o){case"GPSVersionID":s[o]=s[o][0]+"."+s[o][1]+"."+s[o][2]+"."+s[o][3]}n[o]=s[o]}return n}var h=!1,f=this,p=function(e){return e instanceof p?e:this instanceof p?void(this.EXIFwrapped=e):new p(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports.EXIF=p):f.EXIF=p;var m=p.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},g=p.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},v=p.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},b=p.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},w={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};p.getData=function(t,i){return!((t instanceof Image||t instanceof HTMLImageElement)&&!t.complete)&&(e(t)?i&&i.call(t):o(t,i),!0)},p.getTag=function(t,i){if(e(t))return t.exifdata[i]},p.getAllTags=function(t){if(!e(t))return{};var i,n=t.exifdata,o={};for(i in n)n.hasOwnProperty(i)&&(o[i]=n[i]);return o},p.pretty=function(t){if(!e(t))return"";var i,n=t.exifdata,o="";for(i in n)n.hasOwnProperty(i)&&("object"==typeof n[i]?n[i]instanceof Number?o+=i+" : "+n[i]+" ["+n[i].numerator+"/"+n[i].denominator+"]\r\n":o+=i+" : ["+n[i].length+" values]\r\n":o+=i+" : "+n[i]+"\r\n");return o},p.readFromBinaryFile=function(e){return r(e)},"function"==typeof define&&define.amd&&define("exif-js",[],(function(){return p})),p.fixOrientation=function(e,t){e=$(e)[0],t=t||{};var i=$(t.element||e),n=t.callback;i.css("transform",""),i.removeClass("rotated"),!p.getData(e,(function(){var e=parseInt(p.getTag(this,"Orientation"));2==e?(i.css("transform","scaleX(-1)"),i.removeClass("rotated")):3==e?(i.css("transform","rotate(180deg)"),i.removeClass("rotated")):4==e?(i.css("transform","rotate(180deg) scaleX(-1)"),i.removeClass("rotated")):5==e?(i.css("transform","rotate(270deg) scaleX(-1)"),i.addClass("rotated")):6==e?(i.css("transform","rotate(90deg)"),i.addClass("rotated")):7==e?(i.css("transform","rotate(90deg) scaleX(-1)"),i.addClass("rotated")):8==e&&(i.css("transform","rotate(270deg)"),i.addClass("rotated")),n&&n(i)}))&&n&&n(i)}}.call(this),function(){var e,t;e=this.jQuery||window.jQuery,t=e(window),e.fn.stick_in_parent=function(i){var n,o,r,s,a,l,c,u,d,h,f;for(null==i&&(i={}),f=i.sticky_class,a=i.inner_scrolling,h=i.recalc_every,d=i.parent,u=i.offset_top,c=i.spacer,o=i.bottoming,null==u&&(u=0),null==d&&(d=void 0),null==a&&(a=!0),null==f&&(f="is_stuck"),n=e(document),null==o&&(o=!0),r=function(i,r,s,l,p,m,g,v){var b,w,y,_,x,k,$,C,j,S,T,A;if(!i.data("sticky_kit")){if(i.data("sticky_kit",!0),x=n.height(),$=i.parent(),null!=d&&($=$.closest(d)),!$.length)throw"failed to find stick parent";if(b=y=!1,(T=null!=c?c&&i.closest(c):e("<div />"))&&T.css("position",i.css("position")),(C=function(){var e,t,o;if(!v&&(x=n.height(),e=parseInt($.css("border-top-width"),10),t=parseInt($.css("padding-top"),10),r=parseInt($.css("padding-bottom"),10),s=$.offset().top+e+t,l=$.height(),y&&(b=y=!1,null==c&&(i.insertAfter(T),T.detach()),i.css({position:"",top:"",width:"",bottom:""}).removeClass(f),o=!0),p=i.offset().top-(parseInt(i.css("margin-top"),10)||0)-u,m=i.outerHeight(!0),g=i.css("float"),T&&T.css({width:i.outerWidth(!0),height:m,display:i.css("display"),"vertical-align":i.css("vertical-align"),float:g}),o))return A()})(),m!==l)return _=void 0,k=u,S=h,A=function(){var e,d,w,j;if(!v&&(w=!1,null!=S&&(0>=--S&&(S=h,C(),w=!0)),w||n.height()===x||C(),w=t.scrollTop(),null!=_&&(d=w-_),_=w,y?(o&&(j=w+m+k>l+s,b&&!j&&(b=!1,i.css({position:"fixed",bottom:"",top:k}).trigger("sticky_kit:unbottom"))),w<p&&(y=!1,k=u,null==c&&("left"!==g&&"right"!==g||i.insertAfter(T),T.detach()),e={position:"",width:"",top:""},i.css(e).removeClass(f).trigger("sticky_kit:unstick")),a&&(e=t.height(),m+u>e&&!b&&(k-=d,k=Math.max(e-m,k),k=Math.min(u,k),y&&i.css({top:k+"px"})))):w>p&&(y=!0,(e={position:"fixed",top:k}).width="border-box"===i.css("box-sizing")?i.outerWidth()+"px":i.width()+"px",i.css(e).addClass(f),null==c&&(i.after(T),"left"!==g&&"right"!==g||T.append(i)),i.trigger("sticky_kit:stick")),y&&o&&(null==j&&(j=w+m+k>l+s),!b&&j)))return b=!0,"static"===$.css("position")&&$.css({position:"relative"}),i.css({position:"absolute",bottom:r,top:"auto"}).trigger("sticky_kit:bottom")},j=function(){return C(),A()},w=function(){if(v=!0,t.off("touchmove",A),t.off("scroll",A),t.off("resize",j),e(document.body).off("sticky_kit:recalc",j),i.off("sticky_kit:detach",w),i.removeData("sticky_kit"),i.css({position:"",bottom:"",top:"",width:""}),$.position("position",""),y)return null==c&&("left"!==g&&"right"!==g||i.insertAfter(T),T.remove()),i.removeClass(f)},t.on("touchmove",A),t.on("scroll",A),t.on("resize",j),e(document.body).on("sticky_kit:recalc",j),i.on("sticky_kit:detach",w),setTimeout(A,0)}},s=0,l=this.length;s<l;s++)i=this[s],r(e(i));return this}}.call(this),window.require=require,(window.localStorage.getItem("highContrast")||window.location.search.indexOf("highcontrast=1")>=0)&&$("body").addClass("high-contrast");